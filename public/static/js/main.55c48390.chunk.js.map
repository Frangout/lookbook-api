{"version":3,"sources":["utils/url/index.js","components/navbar/index.js","components/carousel/index.js","constants/strings/index.js","store/looks/index.js","routes/looks/index.js","routes/shopify/Authorize.js","App.js","utils/media/index.js","store/files/index.js","components/upload/index.js","routes/look/index.js","store/scripts/index.js","context/index.js","routes/settings/index.js","store/products/index.js","routes/embed/index.js","routes/index.js","index.js"],"names":["parseQuery","queryString","window","location","search","query","pairs","substr","split","i","length","pair","decodeURIComponent","WithSubnavigation","useDisclosure","isOpen","onToggle","bg","useColorModeValue","color","minH","py","base","px","borderBottom","borderStyle","borderColor","align","flex","md","ml","display","onClick","icon","w","h","variant","justify","to","direction","spacing","fontSize","fontWeight","href","_hover","in","animateOpacity","DesktopNav","linkColor","linkHoverColor","popoverContentBgColor","NAV_ITEMS","map","navItem","trigger","placement","p","textDecoration","label","children","border","boxShadow","rounded","minW","child","DesktopSubNav","subLabel","role","transition","_groupHover","transform","opacity","as","ChevronRightIcon","MobileNav","MobileNavItem","Link","ChevronDownIcon","style","marginTop","mt","pl","borderLeft","settings","dots","arrows","fade","infinite","autoplay","speed","autoplaySpeed","slidesToShow","slidesToScroll","CaptionCarousel","props","React","useState","slider","setSlider","top","useBreakpointValue","side","medias","position","height","width","overflow","borderWidth","shadow","margin","left","zIndex","slickPrev","size","right","slickNext","ref","media","index","backgroundPosition","backgroundRepeat","backgroundSize","backgroundImage","url","src","padding","bottom","background","INTERNAL_SERVER_ERROR","INITIAL_LOOKS_STATE","get","loading","success","ok","data","failure","error","message","post","patch","destroy","useLooksStore","create","set","looks","getLooks","a","id","shop","lookbook","produce","state","Looks","Parse","Object","extend","looksQuery","Query","equalTo","descending","first","find","Cloud","run","ids","pop","filter","Boolean","products","postLooks","name","save","console","patchLooks","destroyLooks","renderLookPoints","look","columns","IoEye","IoHandLeftSharp","IoCartSharp","IoLogoUsd","renderCarousel","orangeColorMode","marginRight","alignItems","bgGradient","LooksCreatedDate","date","DateTime","fromISO","toISOString","toLocaleString","DATETIME_MED","renderLooks","flexDirection","marginLeft","sm","marginBottom","justifyContent","isLoaded","colorScheme","isFullWidth","leftIcon","objectId","useToast","useEffect","maxW","status","defaultProps","Authorize","storeDomain","setStoreDomain","isShopifySiteURLInvalid","setIsShopifySiteURLInvalid","boxSize","isRequired","isInvalid","onChange","e","target","value","type","placeholder","process","App","shopifySessionAvailable","setShopifySessionAvailable","shopifyHmacAvailable","setShopifyHmacAvailable","shopifyCodeAvailable","setShopifyCodeAvailable","shopifyHostAvailable","setShopifyHostAvailable","isEmbed","setIsEmbed","code","session","hmac","embed","host","userToken","replace","document","getBase64","file","reader","FileReader","readAsDataURL","Promise","reslove","reject","onload","result","onerror","INITIAL_FILES_STATE","useFilesStore","files","getFiles","axios","headers","Authorization","localStorage","getItem","accept","postFiles","uploads","all","upload","base64s","base64","parseFile","File","savedFile","savedFiles","destroyFiles","delete","Upload","onClose","on","toast","setUploads","onDrop","useCallback","acceptedUploads","assign","preview","URL","createObjectURL","useDropzone","maxFiles","multiple","getRootProps","getInputProps","isDragActive","forEach","revokeObjectURL","saveUploads","title","dropText","activeBg","closeOnOverlayClick","onEsc","cursor","borderRadius","textAlign","objectFit","mr","loadingText","isLoading","CreateLooks","onOpen","isResourcePickerOpen","onResourcePickerOpen","onResourcePickerClose","useParams","useNavigate","looksName","setLooksName","setProducts","onUploadWidgetClose","onResourcePickerDone","selection","d","image","images","originalSrc","getLooskById","admin_graphql_api_id","onDestroyLook","lookId","history","back","renderProducts","product","IoClose","splice","removeProduct","SimpleGrid","lg","noOfLines","lineHeight","form","onSubmit","preventDefault","required","_before","content","removeUpload","IoCloseCircleOutline","fontFamily","onSelection","onCancel","selectMultiple","showVariants","resourceType","open","initialSelectionIds","disabled","Blur","viewBox","fill","xmlns","cx","cy","r","INITIAL_SCRIPTS_STATE","useScriptsStore","scripts","postScripts","destroyScripts","ShopContext","createContext","SettingsRoute","useContext","enableWidget","disableWidget","mx","letterSpacing","INITIAL_PRODUCTS_STATE","useProductsStore","getProducts","ProductsModal","productIds","isCentered","scrollBehavior","blockScrollOnMount","preserveScrollBarGap","lockFocusAcrossFrames","minChildWidth","pos","_after","pt","textTransform","variants","handle","rightIcon","EmbedRoute","bgColor","setProductIds","isModalvis","setIsModalvis","currentLookId","setCurrentLookId","onModalClose","onLooksClick","AppRoutes","path","element","initialize","serverURL","ReactDOM","render","StrictMode","config","apiKey","forceRedirect","Provider","getElementById"],"mappings":"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","file":"static/js/main.55c48390.chunk.js","sourcesContent":["export const parseQuery = (queryString = window.location.search) => {\n\tvar query = {};\n\tvar pairs = (queryString[0] === '?' ? queryString.substr(1) : queryString).split('&');\n\tfor (var i = 0; i < pairs.length; i++) {\n\t\t\tvar pair = pairs[i].split('=');\n\t\t\tquery[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');\n\t}\n\treturn query;\n}","import {\n    Box,\n    Flex,\n    Text,\n    IconButton,\n    Button,\n    Stack,\n    Collapse,\n    Icon,\n    Popover,\n    PopoverTrigger,\n    PopoverContent,\n    useColorModeValue,\n    useBreakpointValue,\n    useDisclosure,\n  } from '@chakra-ui/react';\n  import {\n    HamburgerIcon,\n    CloseIcon,\n    ChevronDownIcon,\n    ChevronRightIcon,\n  } from '@chakra-ui/icons';\n  import { Link } from \"react-router-dom\"\n  \n  export default function WithSubnavigation() {\n    const { isOpen, onToggle } = useDisclosure();\n  \n    return (\n      <Box>\n        <Flex\n          bg={useColorModeValue('white', 'gray.800')}\n          color={useColorModeValue('gray.600', 'white')}\n          minH={'60px'}\n          py={{ base: 2 }}\n          px={{ base: 4 }}\n          borderBottom={1}\n          borderStyle={'solid'}\n          borderColor={useColorModeValue('gray.200', 'gray.900')}\n          align={'center'}>\n          <Flex\n            flex={{ base: 1, md: 'auto' }}\n            ml={{ base: -2 }}\n            display={{ base: 'flex', md: 'none' }}>\n            <IconButton\n              onClick={onToggle}\n              icon={\n                isOpen ? <CloseIcon w={3} h={3} /> : <HamburgerIcon w={5} h={5} />\n              }\n              variant={'ghost'}\n              aria-label={'Toggle Navigation'}\n            />\n          </Flex>\n          <Flex flex={{ base: 1 }} justify={{ base: 'center', md: 'start' }}>  \n            <Flex display={{ base: 'none', md: 'flex' }} ml={10}>\n              <DesktopNav />\n            </Flex>\n          </Flex>\n            <Link to=\"/looks/create\">\n            <Stack\n              flex={{ base: 1, md: 0 }}\n              justify={'flex-end'}\n              direction={'row'}\n              spacing={6}>\n              <Button\n                display={{ base: 'none', md: 'inline-flex' }}\n                fontSize={'sm'}\n                fontWeight={600}\n                color={'white'}\n                bg={'pink.400'}\n                href={'#'}\n                _hover={{\n                  bg: 'pink.300',\n                }}>\n                Create Look\n              </Button>\n            </Stack>\n          </Link>\n        </Flex>\n  \n        <Collapse in={isOpen} animateOpacity>\n          <MobileNav />\n        </Collapse>\n      </Box>\n    );\n  }\n  \n  const DesktopNav = () => {\n    const linkColor = useColorModeValue('gray.600', 'gray.200');\n    const linkHoverColor = useColorModeValue('gray.800', 'white');\n    const popoverContentBgColor = useColorModeValue('white', 'gray.800');\n  \n    return (\n      <Stack direction={'row'} spacing={4}>\n        {NAV_ITEMS.map((navItem) => (\n          <Box key={navItem.label}>\n            <Popover trigger={'hover'} placement={'bottom-start'}>\n              <PopoverTrigger>\n                <Link\n                  p={2}\n                  to={navItem.href ?? '#'}\n                  fontSize={'sm'}\n                  fontWeight={500}\n                  color={linkColor}\n                  _hover={{\n                    textDecoration: 'none',\n                    color: linkHoverColor,\n                  }}>\n                  {navItem.label}\n                </Link>\n              </PopoverTrigger>\n  \n              {navItem.children && (\n                <PopoverContent\n                  border={0}\n                  boxShadow={'xl'}\n                  bg={popoverContentBgColor}\n                  p={4}\n                  rounded={'xl'}\n                  minW={'sm'}>\n                  <Stack>\n                    {navItem.children.map((child) => (\n                      <DesktopSubNav key={child.label} {...child} />\n                    ))}\n                  </Stack>\n                </PopoverContent>\n              )}\n            </Popover>\n          </Box>\n        ))}\n      </Stack>\n    );\n  };\n  \n  const DesktopSubNav = ({ label, href, subLabel }) => {\n    return (\n      <Link\n        to={href}\n        role={'group'}\n        display={'block'}\n        p={2}\n        rounded={'md'}\n        _hover={{ bg: useColorModeValue('pink.50', 'gray.900') }}>\n        <Stack direction={'row'} align={'center'}>\n          <Box>\n            <Text\n              transition={'all .3s ease'}\n              _groupHover={{ color: 'pink.400' }}\n              fontWeight={500}>\n              {label}\n            </Text>\n            <Text fontSize={'sm'}>{subLabel}</Text>\n          </Box>\n          <Flex\n            transition={'all .3s ease'}\n            transform={'translateX(-10px)'}\n            opacity={0}\n            _groupHover={{ opacity: '100%', transform: 'translateX(0)' }}\n            justify={'flex-end'}\n            align={'center'}\n            flex={1}>\n            <Icon color={'pink.400'} w={5} h={5} as={ChevronRightIcon} />\n          </Flex>\n        </Stack>\n      </Link>\n    );\n  };\n  \n  const MobileNav = () => {\n    return (\n      <Stack\n        bg={useColorModeValue('white', 'gray.800')}\n        p={4}\n        display={{ md: 'none' }}>\n        {NAV_ITEMS.map((navItem) => (\n          <MobileNavItem key={navItem.label} {...navItem} />\n        ))}\n      </Stack>\n    );\n  };\n  \n  const MobileNavItem = ({ label, children, href }) => {\n    const { isOpen, onToggle } = useDisclosure();\n  \n    return (\n      <Stack spacing={4} onClick={children && onToggle}>\n        <Flex\n          py={2}\n          as={Link}\n          to={href ?? '#'}\n          justify={'space-between'}\n          align={'center'}\n          _hover={{\n            textDecoration: 'none',\n          }}>\n          <Text\n            fontWeight={600}\n            color={useColorModeValue('gray.600', 'gray.200')}>\n            {label}\n          </Text>\n          {children && (\n            <Icon\n              as={ChevronDownIcon}\n              transition={'all .25s ease-in-out'}\n              transform={isOpen ? 'rotate(180deg)' : ''}\n              w={6}\n              h={6}\n            />\n          )}\n        </Flex>\n  \n        <Collapse in={isOpen} animateOpacity style={{ marginTop: '0!important' }}>\n          <Stack\n            mt={2}\n            pl={4}\n            borderLeft={1}\n            borderStyle={'solid'}\n            borderColor={useColorModeValue('gray.200', 'gray.700')}\n            align={'start'}>\n            {children &&\n              children.map((child) => (\n                <Link key={child.label} py={2} to={child.href}>\n                  {child.label}\n                </Link>\n              ))}\n          </Stack>\n        </Collapse>\n      </Stack>\n    );\n  };\n\n  const NAV_ITEMS = [\n    // {\n    //   label: 'Home',\n    //   children: [\n    //     {\n    //       label: 'Explore Design Work',\n    //       subLabel: 'Trending Design to inspire you',\n    //       href: '#',\n    //     },\n    //     {\n    //       label: 'New & Noteworthy',\n    //       subLabel: 'Up-and-coming Designers',\n    //       href: '#',\n    //     },\n    //   ],\n    // },\n    // {\n    //   label: 'Find Work',\n    //   children: [\n    //     {\n    //       label: 'Job Board',\n    //       subLabel: 'Find your dream design job',\n    //       href: '#',\n    //     },\n    //     {\n    //       label: 'Freelance Projects',\n    //       subLabel: 'An exclusive list for contract work',\n    //       href: '#',\n    //     },\n    //   ],\n    // },\n    // {\n    //   label: 'Looks',\n    //   href: '/looks',\n    // },\n    {\n        label: 'Settings',\n        href: '/settings',\n    },\n  ];","import React from 'react';\nimport {\n  Box,\n  IconButton,\n  useBreakpointValue,\n  Stack,\n  Heading,\n  Text,\n  Container,\n} from '@chakra-ui/react';\n// Here we have used react-icons package for the icons\nimport { BiLeftArrowAlt, BiRightArrowAlt } from 'react-icons/bi';\n// And react-slick as our Carousel Lib\nimport Slider from 'react-slick';\n\n// Settings for the slider\nconst settings = {\n  dots: true,\n  arrows: false,\n  fade: true,\n  infinite: true,\n  autoplay: true,\n  speed: 500,\n  autoplaySpeed: 5000,\n  slidesToShow: 1,\n  slidesToScroll: 1,\n};\n\nexport default function CaptionCarousel(props) {\n  // As we have used custom buttons, we need a reference variable to\n  // change the state\n  const [slider, setSlider] = React.useState(null);\n\n  // These are the breakpoints which changes the position of the\n  // buttons as the screen size changes\n  const top = useBreakpointValue({ base: '90%', md: '50%' });\n  const side = useBreakpointValue({ base: '30%', md: '40px' });\n  \n  const { medias = [] } = props;\n  // This list contains all the data for carousels\n  // This can be static or loaded from a server\n  return (\n    <Box\n      position={'relative'}\n      height={props.height || '400px'}\n      width={props.width || '400px'}\n      overflow={'hidden'}\n      borderWidth=\"1px\"\n\t\t\trounded=\"lg\"\n\t\t\tshadow=\"lg\"\n      margin=\"0 auto\"\n    > \n      {/* Left Icon */}\n      <IconButton\n        aria-label=\"left-arrow\"\n        variant=\"ghost\"\n        position=\"absolute\"\n        left={side}\n        top={top}\n        transform={'translate(-50%, -50%)'}\n        zIndex={2}\n        onClick={() => slider?.slickPrev()}>\n        <BiLeftArrowAlt size=\"40px\" />\n      </IconButton>\n      {/* Right Icon */}\n      <IconButton\n        aria-label=\"right-arrow\"\n        variant=\"ghost\"\n        position=\"absolute\"\n        right={side}\n        top={top}\n        transform={'translate(50%, -50%)'}\n        zIndex={2}\n        onClick={() => slider?.slickNext()}>\n        <BiRightArrowAlt size=\"40px\" />\n      </IconButton>\n      {/* Slider */}\n      <Slider autoplay={false} {...settings} ref={(slider) => setSlider(slider)}>\n        {medias.map((media, index) => (\n          <Box\n            key={index}\n            // height={'6xl'}\n            position=\"relative\"\n            backgroundPosition=\"center\"\n            backgroundRepeat=\"no-repeat\"\n            backgroundSize=\"cover\"\n            backgroundImage={`url(${media.url ? media.url() : media.src})`}>\n            {/* This is the block you need to change, to customize the caption */}\n            <Container padding=\"0\" size=\"container.lg\" height={props.height || '400px'} position=\"relative\">\n              <Stack\n                padding=\"0\"\n                w={'full'}\n                position=\"absolute\"\n                bottom=\"0\"\n                background=\"#00000094\"\n            >\n                {/* <Heading padding=\"1\" textAlign=\"center\" color=\"white\" fontSize={{ base: 'md', md: 'xl', lg: '2xl' }}>\n                  {card.title}\n                </Heading>\n                <Text margin=\"0\" padding=\"0\" fontSize={{ base: 'md', lg: 'lg' }} color=\"GrayText\">\n                  {card.text}\n                </Text> */}\n              </Stack>\n            </Container>\n          </Box>\n        ))}\n      </Slider>\n    </Box>\n  );\n}","export const INTERNAL_SERVER_ERROR = \"Something went wrong. Try again\"","import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\nimport Parse from \"parse\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\n\nconst INITIAL_LOOKS_STATE = {\n\tget: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: [],\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tpost: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tpatch: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tdestroy: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t}\n};\n\nconst useLooksStore = create((set, get) => ({\n\tlooks: INITIAL_LOOKS_STATE,\n\tgetLooks: async({ id = '', shop = window.lookbook.shop } = {}) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tlooks: {\n\t\t\t\t...state.looks,\n\t\t\t\tget: {\n\t\t\t\t\t...INITIAL_LOOKS_STATE.get,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst Looks = Parse.Object.extend('Looks');\n\t\t\tconst looksQuery = new Parse.Query(Looks);\n\t\t\tlooksQuery.equalTo('shop', shop);\n\t\t\tlooksQuery.descending('createdAt');\n\t\t\tconst fud = id ? looksQuery.equalTo('objectId', id) : null;\n\t\t\t// const data = id ? await looksQuery.first(Parse.User.current()) :  await looksQuery.find(Parse.User.current());\n\t\t\tconst data = id ? await looksQuery.first() :  await looksQuery.find();\n\n\t\t\tif (id && data.get('products').length) {\n\t\t\t\tconst { data: products } = await Parse.Cloud.run('get_products', {\n\t\t\t\t\tshop: shop,\n\t\t\t\t\tids: data.get('products').map(p => {\n\t\t\t\t\t\tif (typeof p === \"string\") {\n\t\t\t\t\t\t\treturn p.split('/')?.pop()\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined\n\t\t\t\t\t}).filter(Boolean)\n\t\t\t\t});\n\t\t\t\tdata.set('products', products);\n\t\t\t}\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tget: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.get,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})));\n\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tget: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.get,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t}\n\t},\n\tpostLooks: async ({ id, shop = window.lookbook.shop, name, medias, products = [] }) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tlooks: {\n\t\t\t\t...state.looks,\n\t\t\t\tpost: {\n\t\t\t\t\t...INITIAL_LOOKS_STATE.post,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst Looks = Parse.Object.extend('Looks');\n\t\t\tconst looks = new Looks();\n\t\t\tlooks.set('name', name);\n\t\t\tlooks.set('medias', medias);\n\t\t\tlooks.set('products', products);\n\t\t\tlooks.set('shop', shop);\n\t\t\t// if (Parse.User.current() && Parse.User.current().id) {\n\t\t\t// \tlooks.set('createdBy', Parse.User.current());\n\t\t\t// \tconst acl = new Parse.ACL();\n\t\t\t// \tacl.setPublicWriteAccess(false);\n\t\t\t// \tacl.setPublicReadAccess(true);\n\t\t\t// \tacl.setWriteAccess(Parse.User.current().id, true);\n\t\t\t// \tlooks.setACL(acl);\n\t\t\t// }\n\t\t\t// const data = await looks.save(null, Parse.User.current());\n\t\t\tconst data = await looks.save(null);\n\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tpost: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.post,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tpost: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.post,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t},\n\tpatchLooks: async ({ id, shop = window.lookbook.shop, name, medias, products = [] }) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tlooks: {\n\t\t\t\t...state.looks,\n\t\t\t\tpatch: {\n\t\t\t\t\t...INITIAL_LOOKS_STATE.patch,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\t\ttry {\n\t\t\tconst Looks = Parse.Object.extend('Looks');\n\t\t\tconst looks = new Looks();\n\t\t\tlooks.id = id;\n\t\t\tlooks.set('name', name);\n\t\t\tlooks.set('medias', medias);\n\t\t\tlooks.set('products', products);\n\t\t\tlooks.set('shop', shop);\n\t\t\t// const data = await looks.save(null, Parse.User.current());\n\t\t\tconst data = await looks.save(null);\n\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tpatch: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.patch,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tpatch: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.patch,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t},\n\tdestroyLooks: async (id) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tlooks: {\n\t\t\t\t...state.looks,\n\t\t\t\tdestroy: {\n\t\t\t\t\t...INITIAL_LOOKS_STATE.destroy,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst Looks = Parse.Object.extend('Looks');\n\t\t\tconst looks = new Looks();\n\t\t\tlooks.id = id;\n\t\t\t// const data = await looks.destroy(Parse.User.current());\n\t\t\tconst data = await looks.destroy();\n\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tdestroy: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.destroy,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tdestroy: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.destroy,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t}\n}));\n\nexport default useLooksStore;\n\t\n","import { useEffect } from \"react\";\nimport {\n\tBox,\n  Heading,\n  Icon,\n  Text,\n  Divider,\n  HStack,\n  Flex,\n  SimpleGrid,\n  Stack,\n  Button,\n  useColorModeValue,\n  Container,\n  VStack,\n\tuseToast,\n\tSkeleton,\n\tAlert,\n\tAlertIcon,\n} from '@chakra-ui/react';\nimport { DateTime } from \"luxon\";\nimport Carousel from \"../../components/carousel\";\nimport {\n\tIoCaretForwardOutline,\n\tIoHandLeftSharp,\n\tIoEye,\n\tIoCartSharp,\n\tIoLogoUsd\n} from 'react-icons/io5';\nimport { Link } from \"react-router-dom\"\nimport useLooksStore from \"../../store/looks\"\n\nconst renderSkeleton = (looks) => {\n\treturn (\n\t\t<Flex alignItems=\"flex-start\" flexDirection=\"row\">\n\t\t\t<Skeleton> \n\t\t\t\t<Carousel medias={[]} />\n\t\t\t</Skeleton>\n\t\t\t<Flex direction=\"column\" width=\"90%\" marginLeft=\"5\">\n\t\t\t<Skeleton width=\"100%\" height=\"40px\"> \n\t\t\t</Skeleton>\n\t\t\t<br />\n\t\t\t<Skeleton width=\"100%\" height=\"20px\"> \n\t\t\t</Skeleton>\n\t\t\t<br />\n\t\t\t<Skeleton width=\"100%\" height=\"20px\"> \n\t\t\t</Skeleton>\n\t\t\t<br />\n\t\t\t<Skeleton width=\"100%\" height=\"20px\"> \n\t\t\t</Skeleton>\n\t\t\t</Flex>\n\t\t</Flex>\t\n\t)\n}\n\nconst renderLookPoints = ({ look }) => {\n\treturn (\n\t\t<SimpleGrid columns={2} spacing={5} marginTop=\"5\">\n\t\t\t<HStack align={'top'}>\n\t\t\t\t<Box color={'green.400'} px={2}>\n\t\t\t\t\t<Icon as={IoEye} />\n\t\t\t\t</Box>\n\t\t\t\t<VStack align={'start'}>\n\t\t\t\t\t<Text fontWeight={600}>Views</Text>\n\t\t\t\t\t<Text color={'gray.600'} marginTop=\"0\" style={{ marginTop: 0 }}>Total views</Text>\n\t\t\t\t</VStack>\n\t\t\t</HStack>\n\t\t\t<HStack align={'top'}>\n\t\t\t\t<Box color={'green.400'} px={2}>\n\t\t\t\t\t<Icon as={IoHandLeftSharp} />\n\t\t\t\t</Box>\n\t\t\t\t<VStack align={'start'}>\n\t\t\t\t\t<Text fontWeight={600}>Clicks</Text>\n\t\t\t\t\t<Text color={'gray.600'} marginTop=\"0\" style={{ marginTop: 0 }}>Total clicks</Text>\n\t\t\t\t</VStack>\n\t\t\t</HStack>\n\t\t\t<HStack align={'top'}>\n\t\t\t\t<Box color={'green.400'} px={2}>\n\t\t\t\t\t<Icon as={IoCartSharp} />\n\t\t\t\t</Box>\n\t\t\t\t<VStack align={'start'}>\n\t\t\t\t\t<Text fontWeight={600}>Add to cart</Text>\n\t\t\t\t\t<Text color={'gray.600'} marginTop=\"0\" style={{ marginTop: 0 }}>Cart revenue</Text>\n\t\t\t\t</VStack>\n\t\t\t</HStack>\n\t\t\t<HStack align={'top'}>\n\t\t\t\t<Box color={'green.400'} px={2}>\n\t\t\t\t\t<Icon as={IoLogoUsd} />\n\t\t\t\t</Box>\n\t\t\t\t<VStack align={'start'}>\n\t\t\t\t\t<Text fontWeight={600}>Conversion</Text>\n\t\t\t\t\t<Text color={'gray.600'} marginTop=\"0\" style={{ marginTop: 0 }}>Total revenue</Text>\n\t\t\t\t</VStack>\n\t\t\t</HStack>\n\t</SimpleGrid>\n\t)\n}\n\nconst renderCarousel = ({ orangeColorMode, look }) => {\n\treturn (\n\t\t<Box\n\t\t\tdisplay=\"flex\"\n\t\t\tflex=\"1\"\n\t\t\tmarginRight=\"3\"\n\t\t\tposition=\"relative\"\n\t\t\talignItems=\"center\">\n\t\t\t<Box\n\t\t\t\twidth={{ base: '100%' }}\n\t\t\t\tzIndex=\"2\"\n\t\t\t>\n\t\t\t\t<Carousel medias={look?.get('medias')} />\n\t\t\t</Box>\n\t\t\t<Box zIndex=\"1\" width=\"100%\" position=\"absolute\" height=\"100%\">\n\t\t\t\t<Box\n\t\t\t\t\tbgGradient={orangeColorMode}\n\t\t\t\t\tbackgroundSize=\"20px 20px\"\n\t\t\t\t\topacity=\"0.4\"\n\t\t\t\t\theight=\"100%\"\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t</Box>\n\n\t)\n}\n\nexport const LooksCreatedDate = (props) => {\n\tconst date = DateTime.fromISO(props.date.toISOString())\n  return (\n    <HStack display=\"flex\" alignItems=\"center\">\n      <Text fontWeight=\"light\" fontSize=\"sm\">Created at:</Text>\n      <Text fontSize=\"sm\">{date.toLocaleString(DateTime.DATETIME_MED)}</Text>\n    </HStack>\n  );\n};\n\nexport const renderLooks = ({ looks, orangeColorMode, getLooks }) => {\n\tif (looks.get.loading) {\n\t\treturn renderSkeleton(looks);\n\t} else if (looks.get.failure.error) {\n\t\treturn (\n\t\t\t<Box>\n\t\t\t\t<Flex direction=\"column\" align=\"center\">\n\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t<Heading as=\"h1\" size=\"md\">{looks.get.failure.message}</Heading>\n\t\t\t\t\t</VStack>\n\t\t\t\t\t<br />\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<br />\n\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t<Button onClick={() => getLooks()}>Try Again</Button>\t\n\t\t\t\t\t</VStack>\n\t\t\t\t</Flex>\n\t\t\t</Box>\n\t\t);\n\t} else if (looks.get.success.data.length) {\n\t\treturn looks.get.success.data.map(look => (\n\t\t\t<Box key={look.id}>\n\t\t\t\t<Box\n\t\t\t\t\tmarginTop={{ base: '1', sm: '5' }}\n\t\t\t\t\tmarginBottom={{ base: '1', sm: '5' }}\n\t\t\t\t\tdisplay=\"flex\"\n\t\t\t\t\tflexDirection={{ base: 'column', sm: 'row' }}\n\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\tkey={look.objectId}\n\t\t\t\t>\n\t\t\t\t\t{renderCarousel({ orangeColorMode, look })}\n\t\t\t\t\t<Box\n\t\t\t\t\t\tdisplay=\"flex\"\n\t\t\t\t\t\tflex=\"1\"\n\t\t\t\t\t\tflexDirection=\"column\"\n\t\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\t\tmarginTop={{ base: '3', sm: '0' }}>\n\t\t\t\t\t\t{/* <BlogTags tags={['Engineering', 'Product']} /> */}\n\t\t\t\t\t\t<Skeleton isLoaded={!looks.get.loading}>\n\t\t\t\t\t\t<Heading marginTop=\"1\">\n\t\t\t\t\t\t\t<Link textDecoration=\"none\" _hover={{ textDecoration: 'none' }} to={`looks/${look.id}`}>\n\t\t\t\t\t\t\t\t{look.get('name')}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Heading>\n\t\t\t\t\t\t<LooksCreatedDate date={look.get('createdAt')} />\n\t\t\t\t\t\t</Skeleton>\n\t\t\t\t\t\t{renderLookPoints({ look })}\n\t\t\t\t\t\t<Stack direction='row' spacing={4} marginTop=\"5\">\n\t\t\t\t\t\t\t<Link to={`looks/${look.id}`}>\n\t\t\t\t\t\t\t\t<Button colorScheme=\"blue\" isFullWidth leftIcon={<IoCaretForwardOutline />} variant='solid'>\n\t\t\t\t\t\t\t\t\tView / Modify\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t\t<Divider marginTop=\"1em\" marginBottom=\"1em\"/>\n\t\t\t</Box>\n\t\t))\n\t} else if (!looks.get.success.data.length) {\n\t\treturn (\n\t\t\t<Box>\n\t\t\t\t<Flex direction=\"column\" align=\"center\">\n\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t<Heading as=\"h1\" size=\"md\">You have not created any looks yet.</Heading>\n\t\t\t\t\t</VStack>\n\t\t\t\t\t<br />\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<br />\n\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t<Link to=\"/looks/create\">\n\t\t\t\t\t\t\t<Button>Create Look</Button>\t\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</VStack>\n\t\t\t\t</Flex>\n\t\t\t</Box>\n\t\t)\n\t}\n\treturn null;\n}\n  \nfunction Looks(props) {\n    const looks = useLooksStore((state) => state.looks);\n    const getLooks = useLooksStore((state) => state.getLooks);\n    const toast = useToast();\n\t\tconst orangeColorMode = useColorModeValue(\n\t\t\t'radial(orange.600 1px, transparent 1px)',\n\t\t\t'radial(orange.300 1px, transparent 1px)'\n\t\t);\n\t\tuseEffect(() => {\n\t\t\tgetLooks();\n\t\t}, [])\n    \n    return (\n\t\t\t<Container maxW={'7xl'} p=\"12\">\n\t\t\t\t<Alert status='info'>\n\t\t\t\t\t<AlertIcon />\n\t\t\t\t\tTo enable or disable \"Shop the look\" widget on your store, please visit the &nbsp;<Link to=\"/settings\" style={{ textDecoration: 'underline'}}><b>Settings page</b></Link>.\n\t\t\t\t</Alert>\n\t\t\t\t<br />\n\t\t\t\t{renderLooks({ looks, orangeColorMode, getLooks })}\n    </Container>\n  );\n};\n\n  \n  Looks.defaultProps = {\n  }\n\n  export default Looks;","import { useState } from \"react\";\nimport {\n\tBox,\n\tFormControl,\n\tFormLabel,\n\tFormErrorMessage,\n\tButton,\n\tInput,\n\tInputLeftAddon,\n\tInputGroup,\n\tDivider,\n\tText,\n\tImage,\n\tVStack,\n\tHeading\n} from \"@chakra-ui/react\"\n// import FlagImage from \"../../assets/shopify/images/flag.svg\";\n\nexport default function Authorize() {\n\tconst [storeDomain, setStoreDomain] = useState(''); \n  const [isShopifySiteURLInvalid, setIsShopifySiteURLInvalid] = useState(false);\n\n    const onAuthorize = () => {\n      if (!storeDomain) {\n\t\t\tsetIsShopifySiteURLInvalid(true);\n\t\t\treturn false;\n\t\t}\n      window.location.href=`${process.env.REACT_APP_SERVER_URL}/shopify?shop=${storeDomain}`\n    }\n\treturn (\n\t\t<Box marginTop=\"24\">\n\t\t\t<VStack>\n\t\t\t\t<Box boxSize=\"lg\">\n\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t{/* <Image boxSize=\"200px\" src={FlagImage}/> */}\n\t\t\t\t\t\t<Heading as=\"h1\" size=\"md\">Shopify Store Authentication</Heading>\n\t\t\t\t\t\t<Text>The access data to your Shopify site has expired.</Text>\n\t\t\t\t\t</VStack>\n\t\t\t\t\t<br />\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<br />\n\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t<FormControl id=\"shopify-site\" isRequired isInvalid={isShopifySiteURLInvalid}>\n\t\t\t\t\t\t\t<FormLabel>Shopify site sub domain</FormLabel>\n\t\t\t\t\t\t\t<InputGroup>\n\t\t\t\t\t\t\t\t<InputLeftAddon children=\"https://\" />\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tonChange={(e) => setStoreDomain(e.target.value)}\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={storeDomain}\n\t\t\t\t\t\t\t\t\tplaceholder=\"yourstore.myshopify.com\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</InputGroup>\n\t\t\t\t\t\t\t<FormErrorMessage>This is required</FormErrorMessage>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<Button onClick={onAuthorize} isFullWidth>Authorize</Button>\n\t\t\t\t\t</VStack>\n\t\t\t\t</Box>\n\t\t\t</VStack>\n\t\t</Box>\n\t);\n  }","import { useState, useEffect} from \"react\";\nimport {\n\tFlex,\n  Skeleton,\n  Box,\n  Container\n} from \"@chakra-ui/react\"\nimport {\n  Navigate\n} from \"react-router-dom\";\nimport NavBar from \"./components/navbar\";\nimport LooksRoute from \"./routes/looks\";\nimport { parseQuery } from \"./utils/url\";\nimport Authorize from \"./routes/shopify/Authorize\";\nimport Parse from \"parse\";\nfunction App() {\n  const [shopifySessionAvailable, setShopifySessionAvailable] = useState(false);\n  const [shopifyHmacAvailable, setShopifyHmacAvailable] = useState(false);\n  const [shopifyCodeAvailable, setShopifyCodeAvailable] = useState(false);\n  const [shopifyHostAvailable, setShopifyHostAvailable] = useState(false);\n\n  const [isEmbed, setIsEmbed] = useState(false);\n  useEffect(() => {\n    const { code, session, hmac, embed, host = '', userToken } = parseQuery(window.location.search);\n    window.lookbook = (parseQuery(window.location.search));\n    if (session) {\n      setShopifySessionAvailable(true);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(false);\n      setShopifyHostAvailable(false)\n    } else if (code) {\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(true);\n      setShopifyHostAvailable(false)\n      window.location.replace(`${process.env.REACT_APP_SERVER_URL}/shopify/callback${document.location.search}`)\n    } else if (hmac){\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(true);\n      setShopifyCodeAvailable(false)\n      setShopifyHostAvailable(false)\n      window.location.replace(`${process.env.REACT_APP_SERVER_URL}/shopify${document.location.search}`)\n    } else if (host && !code && !hmac) {\n      setShopifyHostAvailable(true);\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(false)\n    } else if (embed) {\n      setIsEmbed(true);\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(false)\n      setShopifyHostAvailable(false)\n    }\n\n    if (userToken) {\n      // if (Parse.User.current()) {\n      //   if (Parse.User.current().get('sessionToken') !== userToken) {\n      //     Parse.User.logOut().then(() => Parse.User.become(userToken)).catch(() => Parse.User.become(userToken))\n      //   }\n      // } else {\n      //   Parse.User.become(userToken);\n      // } \n    } else {\n    }\n  }, []);\n  \n\n  if (shopifySessionAvailable) {\n    return (\n      <>\n        <NavBar />\n        <LooksRoute />\n      </>\n    );\n  } else if (isEmbed) {\n    return <Navigate to=\"/embed\" replace />\n  } else if ((shopifyHmacAvailable || shopifyCodeAvailable) || shopifyHostAvailable) {\n    return (\t\n      <Container maxW={'7xl'} p=\"12\">\n        <Flex alignItems=\"flex-start\" flexDirection=\"row\">\n          <Skeleton> \n            <Box></Box>\n          </Skeleton>\n          <Flex direction=\"column\" width=\"90%\" marginLeft=\"5\">\n            <Skeleton width=\"100%\" height=\"40px\"> \n          </Skeleton>\n          <br />\n          <Skeleton width=\"100%\" height=\"20px\"> \n          </Skeleton>\n          <br />\n          <Skeleton width=\"100%\" height=\"20px\"> \n          </Skeleton>\n          <br />\n          <Skeleton width=\"100%\" height=\"20px\"> \n          </Skeleton>\n          </Flex>\n        </Flex>\n      </Container>\n    )\n  } else {\n    return <Authorize />\n  }\n}\n\nexport default App;\n","const getBase64 = async (file) => {\n  var reader = new FileReader();\n  reader.readAsDataURL(file);\n\n  return new Promise((reslove, reject) => {\n    reader.onload = () => reslove(reader.result);\n    reader.onerror = (error) => reject(error);\n  })\n}\nexport { getBase64 };","import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\nimport Parse from \"parse\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\nimport { getBase64 } from \"../../utils/media\";\n\nconst INITIAL_FILES_STATE = {\n\tget: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tpost: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tdestroy: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t}\n};\n\nconst useFilesStore = create((set, get) => ({\n\tfiles: INITIAL_FILES_STATE,\n\tgetFiles: async() => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tfiles: {\n\t\t\t\t...state.files,\n\t\t\t\tget: {\n\t\t\t\t\t...INITIAL_FILES_STATE.get,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst { data } = await axios.get(``, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${window.localStorage.getItem('thinkificAccessToken')}`,\n\t\t\t\t\taccept: 'application/json',\n\t\t\t\t}\n\t\t\t});\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tfiles: {\n\t\t\t\t\t...state.files,\n\t\t\t\t\tget: {\n\t\t\t\t\t\t...INITIAL_FILES_STATE.get,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata: [],\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tfiles: {\n\t\t\t\t\t...state.files,\n\t\t\t\t\tget: {\n\t\t\t\t\t\t...INITIAL_FILES_STATE.get,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t}\n\t},\n\tpostFiles: async (uploads) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tfiles: {\n\t\t\t\t...state.files,\n\t\t\t\tpost: {\n\t\t\t\t\t...INITIAL_FILES_STATE.post,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst base64s = await Promise.all(uploads.map(async upload => {\n\t\t\t\treturn {\n\t\t\t\t\tdata: await getBase64(upload),\n\t\t\t\t\ttype: upload.type,\n\t\t\t\t}\n\t\t\t}));\n\t\t\tconst savedFiles = await Promise.all(base64s.map(async (base64) => {\n\t\t\t\tconst parseFile = new Parse.File(\"looks\", { base64: base64.data }, base64.type );\n\t\t\t\tconst savedFile = await parseFile.save();\n\t\t\t\treturn savedFile;\n\t\t\t}));\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tfiles: {\n\t\t\t\t\t...state.files,\n\t\t\t\t\tpost: {\n\t\t\t\t\t\t...INITIAL_FILES_STATE.post,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata: savedFiles\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn savedFiles;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tfiles: {\n\t\t\t\t\t...state.files,\n\t\t\t\t\tpost: {\n\t\t\t\t\t\t...INITIAL_FILES_STATE.post,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t},\n\tdestroyFiles: async (id) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tfiles: {\n\t\t\t\t...state.files,\n\t\t\t\tdestroy: {\n\t\t\t\t\t...INITIAL_FILES_STATE.destroy,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst { data } = await axios.delete(``,{\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${window.localStorage.getItem('thinkificAccessToken')}`,\n\t\t\t\t\taccept: '*/*',\n\t\t\t\t\t'Access-Control-Allow-Origin': '*',\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tfiles: {\n\t\t\t\t\t...state.files,\n\t\t\t\t\tdestroy: {\n\t\t\t\t\t\t...INITIAL_FILES_STATE.destroy,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tfiles: {\n\t\t\t\t\t...state.files,\n\t\t\t\t\tdestroy: {\n\t\t\t\t\t\t...INITIAL_FILES_STATE.destroy,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t}\n}));\n\nexport default useFilesStore;\n\t\n","import { useCallback, useState, useEffect } from \"react\";\nimport {\n\tModal,\n\tModalOverlay,\n\tModalContent,\n\tModalHeader,\n\tModalFooter,\n\tModalBody,\n\tModalCloseButton,\n\tSimpleGrid,\n\tButton,\n\tCenter,\n\tuseColorModeValue,\n\tText,\n\tImage,\n\tVStack,\n\tuseToast,\n} from '@chakra-ui/react'\nimport { useDropzone } from 'react-dropzone';\nimport useFilesStore from \"../../store/files\"; \nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\n\nfunction Upload(props = {}) {\n\tconst { isOpen = false, onClose, on } = props;\n\tconst files = useFilesStore((state) => state.files);\n  const postFiles = useFilesStore((state) => state.postFiles);\n\tconst toast = useToast()\n\tconst [uploads, setUploads] = useState([]);\n\t\n\tconst onDrop = useCallback(async (acceptedUploads) => {\n\t\tsetUploads(acceptedUploads.map(file => Object.assign(file, {\n\t\t\tpreview: URL.createObjectURL(file)\n\t\t})));\n\t});\n\tconst { getRootProps, getInputProps, isDragActive } = useDropzone({\n\t\tonDrop, accept: 'image/*', maxFiles: 3, multiple: true,\n\t});\n\tuseEffect(() => {\n\t\tsetUploads([])\n\t}, [])\n\tuseEffect(() => () => {\n\t\tuploads.forEach(file => URL.revokeObjectURL(file.preview));\n\t}, [uploads])\n\t\n\tconst saveUploads = async () => {\n\t\ttry {\n\t\t\tconst data = await postFiles(uploads);\n\t\t\tsetUploads([]);\n\t\t\tonClose(data || []);\n\t\t} catch (e) {\n\t\t\ttoast({\n\t\t\t\ttitle: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\tstatus: 'error'\n\t\t\t})\n\t\t}\n\t}\n\n\tconst dropText = isDragActive ? 'Drop upto 3 png, jpeg or gifs here ...' : 'Drag \\'n\\' drop upto 3 png, jpeg or gifs files here, or click to select uploads';\n\tconst activeBg = useColorModeValue('gray.100', 'gray.600');\n\tconst borderColor = useColorModeValue(\n\t\tisDragActive ? 'teal.300' : 'gray.300',\n\t\tisDragActive ? 'teal.500' : 'gray.500',\n\t);\n\n\treturn (\n\t\t<Modal isOpen={isOpen} onClose={onClose} closeOnOverlayClick={false} onEsc={() => setUploads([])}>\n\t\t\t<ModalOverlay />\n\t\t\t<ModalContent>\n\t\t\t\t<ModalHeader>Add images for this look.</ModalHeader>\n\t\t\t\t<ModalBody>\n\t\t\t\t\t<Center\n\t\t\t\t\t\tp={10}\n\t\t\t\t\t\tcursor=\"pointer\"\n\t\t\t\t\t\tbg={isDragActive ? activeBg : 'transparent'}\n\t\t\t\t\t\t_hover={{ bg: activeBg }}\n\t\t\t\t\t\ttransition=\"background-color 0.2s ease\"\n\t\t\t\t\t\tborderRadius={4}\n\t\t\t\t\t\tborder=\"3px dashed\"\n\t\t\t\t\t\tborderColor={borderColor}\n\t\t\t\t\t\t{...getRootProps()}\n\t\t\t\t\t>\n\t\t\t\t\t<VStack>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input {...getInputProps()} />\n\t\t\t\t\t\t<Text textAlign=\"center\">{dropText}</Text>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</VStack>\n\t\t\t\t</Center>\n\t\t\t\t<Center>\n\t\t\t\t\t<SimpleGrid spacing={5} columns={3} marginTop=\"5\">\n\t\t\t\t\t\t{uploads.map(file => (\n\t\t\t\t\t\t\t\t<Image key={file.name} src={file.preview} width={100} height={100} objectFit=\"cover\" borderRadius=\"5\" borderColor=\"gray\" borderWidth=\"2\" />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</SimpleGrid>\n\t\t\t\t</Center>\n\t\t\t\t</ModalBody>\n\n\t\t\t\t<ModalFooter>\n\t\t\t\t\t<Button variant='ghost' onClick={() => { setUploads([]); onClose([])}} colorScheme='red'>Close</Button>\n\t\t\t\t\t<Button colorScheme='teal' mr={3} onClick={saveUploads} loadingText=\"Uploading...\" isLoading={files.post.loading}>\n\t\t\t\t\t\tUpload\n\t\t\t\t\t</Button>\n\t\t\t\t</ModalFooter>\n\t\t\t</ModalContent>\n\t\t</Modal>\n\t)\n}\n\nexport default Upload;","import { useEffect, useState } from \"react\";\nimport {\n\t\tBox,\n\t\tFlex,\n\t\tStack,\n\t\tHeading,\n\t\tText,\n\t\tContainer,\n\t\tInput,\n\t\tButton,\n\t\tSimpleGrid,\n\t\tuseBreakpointValue,\n\t\tFormControl,\n\t\tFormLabel,\n\t\tIcon,\n\t\tStackDivider,\n\t\tuseColorModeValue,\n\t\tImage,\n\t\tuseDisclosure,\n\t\tchakra,\n\t\ttoast,\n\t\tuseToast,\n\t\tAvatar,\n\t\tAvatarGroup,\n\t\tSkeletonText,\n\t\tSkeletonCircle,\n\t\tSkeleton,\n\t\tVStack,\n\t\tDivider,\n\t\tAvatarBadge,\n\t\tButtonGroup\n} from '@chakra-ui/react';\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport {\n\t\tIoClose,\n\t\tIoAddOutline,\n\t\tIoCloseCircleOutline,\n\t} from 'react-icons/io5';\nimport {ResourcePicker} from '@shopify/app-bridge-react';\n\nimport useFilesStore from \"../../store/files\"; \n\nimport Upload from \"../../components/upload\";\nimport useLooksStore from \"../../store/looks\"\nimport { INTERNAL_SERVER_ERROR } from '../../constants/strings';\n\nconst renderSkeleton = () => {\n\treturn (\n\t\t<Flex direction=\"column\" width=\"100%\">\n\t\t\t<Skeleton width=\"100%\" height=\"40px\"> </Skeleton>\n\t\t\t<SkeletonText mt='4' noOfLines={1} spacing='4' />\n\t\t\t<br />\n\t\t\t<br />\n\t\t\t<Box >\n\t\t\t\t<SkeletonCircle size='20' />\n\t\t\t\t<SkeletonText mt='4' noOfLines={4} spacing='4' />\n\t\t\t</Box>\n\t\t</Flex>\n\t)\n}\n\n\t\nfunction CreateLooks(props) {\n\tconst { isOpen, onOpen, onClose } = useDisclosure()\n\tconst { isOpen: isResourcePickerOpen, onOpen: onResourcePickerOpen, onClose: onResourcePickerClose } = useDisclosure()\n\tconst looks = useLooksStore((state) => state.looks);\n\tconst files = useFilesStore((state) => state.files);\n\tconst getLooks = useLooksStore((state) => state.getLooks);\n\tconst postLooks = useLooksStore((state) => state.postLooks);\n\tconst destroyLooks = useLooksStore((state) => state.destroyLooks);\n\tconst patchLooks = useLooksStore((state) => state.patchLooks);\n\tconst { id = '' } = useParams();\n\tconst toast = useToast();\n\tconst navigate = useNavigate()\n\tconst colorMode = useColorModeValue('gray.100', 'gray.700');\n\tconst [looksName, setLooksName] = useState(\n\t\tprops.looks.name\n\t);\n\tconst [uploads, setUploads] = useState(\n\t\tprops.looks.files || []\n\t);\n\tconst [products, setProducts] = useState(\n\t\tprops.looks.products || []\n\t);\n\tconst onUploadWidgetClose = (data = []) => {\n\t\tsetUploads([\n\t\t\t...uploads,\n\t\t\t...data\n\t\t])\n\t\tonClose();\n\t}\n\n\tconst onResourcePickerDone = (data = {}) => {\n\t\tsetProducts([\n\t\t\t...products.filter(Boolean),\n\t\t\t...data?.selection?.map(d => {\n\t\t\t\treturn {\n\t\t\t\t\ttitle: d.title,\n\t\t\t\t\timage: d.images[0] && d.images[0].originalSrc || '',\n\t\t\t\t\tid: d.id,\n\t\t\t\t}\n\t\t\t}).filter(Boolean),\n\t\t])\n\t\tonResourcePickerClose()\n\t}\n\n\tconst getLooskById = async () => {\n\t\tif (id) {\n\t\t\tconst data = await getLooks({ id });\n\t\t\tif (data) {\n\t\t\t\tsetLooksName(data?.get('name'))\n\t\t\t\tsetUploads([\n\t\t\t\t\t...uploads,\n\t\t\t\t\t...data?.get('medias'), \n\t\t\t\t])\n\t\t\t\t\n\t\t\t\tsetProducts([\n\t\t\t\t\t...products,\n\t\t\t\t\t...data?.get('products').map(p => ({\n\t\t\t\t\t\tid: p.admin_graphql_api_id,\n\t\t\t\t\t\ttitle: p.title,\n\t\t\t\t\t\timage: p.image.src\n\t\t\t\t\t}))\n\t\t\t\t])\n\t\t\t}\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tgetLooskById()\n\t}, [])\n\n\tconst removeUpload = (upload, index) => {\n\t\tuploads.splice(index, 1)\n\t\tsetUploads([...uploads.filter(Boolean)])\n\t}\n\n\tconst removeProduct = (index) => {\n\t\tproducts.splice(index, 1);\n\t\tsetProducts([...products.filter(Boolean)])\n\t}\n\n\tconst onDestroyLook = async (lookId) => {\n\t\ttry {\n\t\t\tawait destroyLooks(lookId);\n\t\t\ttoast({\n\t\t\t\ttitle: `Look deleted!`,\n\t\t\t\tstatus: 'success'\n\t\t\t});\n\t\t\twindow.history.back();\n\t\t} catch (e) {\n\t\t\ttoast({\n\t\t\t\ttitle: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\tstatus: 'error'\n\t\t\t})\n\t\t}\n\t}\n\tconst renderProducts = () => {\n\t\treturn products.map((product, index) => (\n\t\t\t<Stack id={product.id} key={index} justifyContent=\"space-between\"  direction={'row'} background=\"white\" padding=\"3\" borderRadius=\"lg\" marginBottom=\"4\" align={'center'}>\n\t\t\t\t<Flex flexDirection=\"row\" alignItems=\"center\">\n\t\t\t\t\t<Flex\n\t\t\t\t\t\tw={16}\n\t\t\t\t\t\th={16}\n\t\t\t\t\t\talign={'center'}\n\t\t\t\t\t\tjustify={'center'}\n\t\t\t\t\t\trounded={'full'}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Image objectFit=\"contain\" width=\"100%\" height=\"100%\" src={product.image} color={'yellow.500'} />\n\t\t\t\t\t</Flex>\n\t\t\t\t\t<Flex direction=\"column\">\n\t\t\t\t\t\t<Text marginLeft=\"3\" fontWeight={600}>{product.title}</Text>\n\t\t\t\t\t</Flex>\n\t\t\t\t</Flex>\n\t\t\t\t<Icon as={IoClose} color={'red.500'} w={5} h={5} onClick={() => removeProduct(index)} />\n\t\t\t</Stack>\n\t\t));\n\t}\n\tconst renderLooks = () => {\n\t\tif (looks.get.loading) {\n\t\t\treturn renderSkeleton();\n\t\t} else if (looks.get.failure.error) {\n\t\t\treturn (\n\t\t\t\t<Box>\n\t\t\t\t\t<Flex direction=\"column\" align=\"center\">\n\t\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t\t<Heading as=\"h1\" size=\"md\">{looks.get.failure.message}</Heading>\n\t\t\t\t\t\t</VStack>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t\t<Button onClick={() => getLooskById()}>Try Again</Button>\t\n\t\t\t\t\t\t</VStack>\n\t\t\t\t\t</Flex>\n\t\t\t\t</Box>\n\t\t\t)\n\t\t} else {\n\t\t\tconst { data } = looks?.get?.success;\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<Stack spacing={4}>\n\t\t\t\t\t\t<Heading\n\t\t\t\t\t\t\tcolor={'gray.800'}\n\t\t\t\t\t\t\tlineHeight={1.1}\n\t\t\t\t\t\t\tfontSize={{ base: '2xl', sm: '3xl', md: '4xl' }}>\n\t\t\t\t\t\t\t{data && data.get ? data.get('name') : 'Create a look'}\n\t\t\t\t\t\t</Heading>\n\t\t\t\t\t\t<Text color={'gray.500'} fontSize={{ base: 'sm', sm: 'md' }}>\n\t\t\t\t\t\t\tAdd a name for the look you create and link the products from your store that can form this look.\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Stack>\n\t\t\t\t\t<Box mt={10}>\n\t\t\t\t\t\t<chakra.form\n\t\t\t\t\t\t\tonSubmit={async (e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tif (id) {\n\t\t\t\t\t\t\t\t\tawait patchLooks({\n\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\tname: looksName,\n\t\t\t\t\t\t\t\t\t\t\tmedias: uploads,\n\t\t\t\t\t\t\t\t\t\t\tproducts: products.map(product => product.id),\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tawait postLooks({\n\t\t\t\t\t\t\t\t\t\t\tname: looksName,\n\t\t\t\t\t\t\t\t\t\t\tmedias: uploads,\n\t\t\t\t\t\t\t\t\t\t\tproducts: products.map(product => product.id),\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\twindow.history.back()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttoast({\n\t\t\t\t\t\t\t\t\t\ttitle: `Looks ${id ? 'updated' : 'created'} successfully!`,\n\t\t\t\t\t\t\t\t\t\tstatus: 'success'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\ttoast({\n\t\t\t\t\t\t\t\t\t\ttitle: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\t\t\t\t\t\t\tstatus: 'error'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<Stack spacing={4}>\n\t\t\t\t\t\t\t<FormControl id='look-name'>\n\t\t\t\t\t\t\t\t<FormLabel>Look name</FormLabel>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tplaceholder=\"Winter Fashion Look\"\n\t\t\t\t\t\t\t\t\tname=\"look_name\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={looksName}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLooksName(e.target.value)}\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t<FormLabel>Add medias to this look</FormLabel>\n\t\t\t\t\t\t\t\t<AvatarGroup>\n\t\t\t\t\t\t\t\t\t{uploads.map((upload, index) => (\n\t\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\t\tkey={upload.name() + index}\n\t\t\t\t\t\t\t\t\t\t\tname={upload.name()}\n\t\t\t\t\t\t\t\t\t\t\tsrc={upload.url()}\n\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\t// size={useBreakpointValue({ base: 'md', md: 'lg' })}\n\t\t\t\t\t\t\t\t\t\t\tposition={'relative'}\n\t\t\t\t\t\t\t\t\t\t\tzIndex={2}\n\t\t\t\t\t\t\t\t\t\t\t_before={{\n\t\t\t\t\t\t\t\t\t\t\t\tcontent: '\"\"',\n\t\t\t\t\t\t\t\t\t\t\t\twidth: 'full',\n\t\t\t\t\t\t\t\t\t\t\t\theight: 'full',\n\t\t\t\t\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\t\t\t\t\ttransform: 'scale(1.125)',\n\t\t\t\t\t\t\t\t\t\t\t\tbgGradient: 'linear(to-bl, red.400,pink.400)',\n\t\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\t\t\tzIndex: -1,\n\t\t\t\t\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<AvatarBadge  boxSize='1.25em' bg='red.500' onClick={() => removeUpload(upload, index)}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon as={IoCloseCircleOutline} color={'white.500'} w={5} h={5} />\n\t\t\t\t\t\t\t\t\t\t\t</AvatarBadge>\n\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\tonClick={onOpen}\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\tbg={'pink.400'}\n\t\t\t\t\t\t\t\t\t\t_hover={{ bg: 'pink.300' }}\n\t\t\t\t\t\t\t\t\t\tcursor=\"pointer\"\n\t\t\t\t\t\t\t\t\t\ticon={<IoAddOutline size=\"2em\" color=\"white\" />}\n\t\t\t\t\t\t\t\t\t\t_before={{\n\t\t\t\t\t\t\t\t\t\t\tcontent: '\"\"',\n\t\t\t\t\t\t\t\t\t\t\twidth: 'full',\n\t\t\t\t\t\t\t\t\t\t\theight: 'full',\n\t\t\t\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\t\t\t\ttransform: 'scale(1.2)',\n\t\t\t\t\t\t\t\t\t\t\tbgGradient: 'linear(to-bl, red.400,pink.400)',\n\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\t\tzIndex: -1,\n\t\t\t\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t</AvatarGroup>\n\t\t\t\t\t\t\t\t<Upload isOpen={isOpen} onClose={onUploadWidgetClose} />\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<FormControl id='look-products'>\n\t\t\t\t\t\t\t\t\t<FormLabel>Add products for this look</FormLabel>\n\t\t\t\t\t\t\t\t\t<Stack\n\t\t\t\t\t\t\t\t\t\tspacing={4}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{renderProducts()}\n\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t\t<Button fontFamily={'heading'} bg={'gray.200'} color={'gray.800'} onClick={onResourcePickerOpen}>\n\t\t\t\t\t\t\t\t\t\t\tLink products +\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<ResourcePicker\n\t\t\t\t\t\t\t\t\t\tonSelection={onResourcePickerDone}\n\t\t\t\t\t\t\t\t\t\tonCancel={onResourcePickerClose}\n\t\t\t\t\t\t\t\t\t\tselectMultiple\n\t\t\t\t\t\t\t\t\t\tshowVariants={false}\n\t\t\t\t\t\t\t\t\t\tresourceType=\"Product\"\n\t\t\t\t\t\t\t\t\t\topen={isResourcePickerOpen}\n\t\t\t\t\t\t\t\t\t\tinitialSelectionIds={products.map(product => ({ id: product.id })).filter(Boolean)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t<ButtonGroup mt={8} width=\"full\">\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdata && data.id ? (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tisLoading={looks.destroy.loading}\n\t\t\t\t\t\t\t\t\t\tonClick={() => onDestroyLook(data.id)}\n\t\t\t\t\t\t\t\t\t\tisFullWidth\n\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\tcolorScheme=\"red\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tDelete Look\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisLoading={looks.post.loading || looks.patch.loading}\n\t\t\t\t\t\t\t\tdisabled={looks.post.loading || looks.patch.loading}\n\t\t\t\t\t\t\t\tloadingText={`${id ? 'Updating' : 'Saving'} look`}\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tfontFamily={'heading'}\n\t\t\t\t\t\t\t\tisFullWidth\n\t\t\t\t\t\t\t\tw={'full'}\n\t\t\t\t\t\t\t\tbgGradient=\"linear(to-r, red.400,pink.400)\"\n\t\t\t\t\t\t\t\tcolor={'white'}\n\t\t\t\t\t\t\t\t_hover={{\n\t\t\t\t\t\t\t\t\tbgGradient: 'linear(to-r, red.400,pink.400)',\n\t\t\t\t\t\t\t\t\tboxShadow: 'xl',\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t{`${id ? 'Update' : 'Save'} look`}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</chakra.form>\n\t\t\t\t\t</Box>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t\t\n\t}\n\n\treturn (\n\t\t<Box position={'relative'}>\n\t\t\t<Container\n\t\t\t\tas={SimpleGrid}\n\t\t\t\tmaxW={'7xl'}\n\t\t\t\tcolumns={{ base: 1, md: 1 }}\n\t\t\t\tspacing={{ base: 10, lg: 32 }}\n\t\t\t\tpy={{ base: 10, sm: 15, lg: 20 }}\n\t\t\t>\n\t\t\t\t\n\t\t\t\t<Stack\n\t\t\t\t\tbg={'gray.50'}\n\t\t\t\t\trounded={'xl'}\n\t\t\t\t\tp={{ base: 4, sm: 6, md: 8 }}\n\t\t\t\t\tspacing={{ base: 8 }}\n\t\t\t\t\tmaxW=\"3xl\"\n\t\t\t\t\tzIndex=\"9\"\n\t\t\t\t\tmargin=\"0 auto\"\n\t\t\t\t\twidth=\"100%\"\n\t\t\t\t>\n\t\t\t\t\t{renderLooks()}\n\t\t\t\t</Stack>\n\t\t\t</Container>\n\t\t\t<Blur\n\t\t\t\tposition={'absolute'}\n\t\t\t\ttop={-10}\n\t\t\t\tleft={-10}\n\t\t\t\tstyle={{ filter: 'blur(70px)' }}\n\t\t\t/>\n\t\t</Box>\n\t);\n}\n\t\n\texport const Blur = (props) => {\n\t\treturn (\n\t\t\t<Icon\n\t\t\t\twidth={useBreakpointValue({ base: '100%', md: '40vw', lg: '30vw' })}\n\t\t\t\tzIndex={useBreakpointValue({ base: -1, md: -1, lg: 0 })}\n\t\t\t\theight=\"560px\"\n\t\t\t\tviewBox=\"0 0 528 560\"\n\t\t\t\tfill=\"none\"\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t{...props}>\n\t\t\t\t<circle cx=\"71\" cy=\"61\" r=\"111\" fill=\"#F56565\" />\n\t\t\t\t<circle cx=\"244\" cy=\"106\" r=\"139\" fill=\"#ED64A6\" />\n\t\t\t\t<circle cy=\"291\" r=\"139\" fill=\"#ED64A6\" />\n\t\t\t\t<circle cx=\"80.5\" cy=\"189.5\" r=\"101.5\" fill=\"#ED8936\" />\n\t\t\t\t<circle cx=\"196.5\" cy=\"317.5\" r=\"101.5\" fill=\"#ECC94B\" />\n\t\t\t\t<circle cx=\"70.5\" cy=\"458.5\" r=\"101.5\" fill=\"#48BB78\" />\n\t\t\t\t<circle cx=\"426.5\" cy=\"-0.5\" r=\"101.5\" fill=\"#4299E1\" />\n\t\t\t</Icon>\n\t\t);\n\t};\n\n\n\tCreateLooks.defaultProps = {\n\t\tlooks: {\n\t\t\tname: ''\n\t\t}\n\t}\n\n\texport default CreateLooks;","import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\nimport Parse from \"parse\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\n\nconst INITIAL_SCRIPTS_STATE = {\n\tget: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: [],\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tpost: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tpatch: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tdestroy: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t}\n};\n\nconst useScriptsStore = create((set, get) => ({\n\tscripts: INITIAL_SCRIPTS_STATE,\n\tpostScripts: async (shop = window.lookbook.shop) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tscripts: {\n\t\t\t\t...state.scripts,\n\t\t\t\tpost: {\n\t\t\t\t\t...INITIAL_SCRIPTS_STATE.post,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst data = await Parse.Cloud.run('post_scripts', { shop });\n\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tscripts: {\n\t\t\t\t\t...state.scripts,\n\t\t\t\t\tpost: {\n\t\t\t\t\t\t...INITIAL_SCRIPTS_STATE.post,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tscripts: {\n\t\t\t\t\t...state.scripts,\n\t\t\t\t\tpost: {\n\t\t\t\t\t\t...INITIAL_SCRIPTS_STATE.post,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t},\n\tdestroyScripts: async (shop = window.lookbook.shop) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tscripts: {\n\t\t\t\t...state.scripts,\n\t\t\t\tdestroy: {\n\t\t\t\t\t...INITIAL_SCRIPTS_STATE.destroy,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst data = await Parse.Cloud.run('destroy_scripts', { shop })\n\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tscripts: {\n\t\t\t\t\t...state.scripts,\n\t\t\t\t\tdestroy: {\n\t\t\t\t\t\t...INITIAL_SCRIPTS_STATE.destroy,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tscripts: {\n\t\t\t\t\t...state.scripts,\n\t\t\t\t\tdestroy: {\n\t\t\t\t\t\t...INITIAL_SCRIPTS_STATE.destroy,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t}\n}));\n\nexport default useScriptsStore;\n\t\n","import React from \"react\";\nexport const ShopContext = React.createContext();\n","import { useEffect, useContext } from \"react\";\nimport {\n\tBox,\n  Heading,\n  ButtonGroup,\n  Text,\n  Button,\n  Container,\n\tuseToast,\n\tCode,\n\tDivider\n} from '@chakra-ui/react';\nimport useScriptsStore from \"../../store/scripts\";\nimport { ShopContext } from \"../../context\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\nimport NavBar from \"../../components/navbar\";\n\n\nconst SettingsRoute = () => {\n\tconst shop = useContext(ShopContext);\n\tconst scripts = useScriptsStore((state) => state.scripts);\n  const postScripts = useScriptsStore((state) => state.postScripts);\n\tconst destroyScripts = useScriptsStore((state) => state.destroyScripts);\n\tconst toast = useToast();\n\n\tconst enableWidget = async () => {\n\t\ttry {\n\t\t\tawait postScripts(shop);\n\t\t\ttoast({\n\t\t\t\ttitle: `Widget added successfully! Please visit your online store after 30 seconds to check the widget.`,\n\t\t\t\tstatus: 'success'\n\t\t\t});\n\t\t} catch (e) {\n\t\t\ttoast({\n\t\t\t\ttitle: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\tstatus: 'error'\n\t\t\t})\n\t\t}\n\t}\n\n\tconst disableWidget = async () => {\n\t\ttry {\n\t\t\tawait destroyScripts(shop);\n\t\t\ttoast({\n\t\t\t\ttitle: `Widget removed successfully!`,\n\t\t\t\tstatus: 'success'\n\t\t\t});\n\t\t} catch (e) {\n\t\t\ttoast({\n\t\t\t\ttitle: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\tstatus: 'error'\n\t\t\t})\n\t\t}\n\t}\n\n\t\n\treturn  (\n\t\t<>\n\t\t<NavBar />\n\t\t<Container maxW={'7xl'} p=\"12\">\n\t\t\t<Box as=\"section\">\n\t\t\t\t<Box\n\t\t\t\t\tmaxW=\"2xl\"\n\t\t\t\t\tmx=\"auto\"\n\t\t\t\t\tpx={{ base: '6', lg: '8' }}\n\t\t\t\t\tpy={{ base: '16', sm: '20' }}\n\t\t\t\t\ttextAlign=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<Heading size=\"3xl\" fontWeight=\"extrabold\" letterSpacing=\"tight\">\n\t\t\t\t\t\tWidget embed settings\n\t\t\t\t\t</Heading>\n\t\t\t\t\t<Text mt=\"4\" fontSize=\"lg\">\n\t\t\t\t\t\tEnable or disable \"Shop the look\" widget on your store. The widget gets appended to the bottom of your store page above the\n\t\t\t\t\t\tfooter on the home page.\n\t\t\t\t\t</Text>\n\t\t\t\t\t<ButtonGroup mt=\"8\" variant='outline' spacing='6'>\n\t\t\t\t\t\t<Button isLoading={scripts.post.loading} fontWeight=\"bold\" size=\"lg\" colorScheme='blue' onClick={enableWidget}>Enable Widget Embed</Button>\n\t\t\t\t\t\t<Button isLoading={scripts.destroy.loading} fontWeight=\"bold\" size=\"lg\" colorScheme=\"red\" onClick={disableWidget}>Disable Widget Embed</Button>\n\t\t\t\t\t</ButtonGroup>\n\n\t\t\t\t\t{/* <br />\n\t\t\t\t\t<br />\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<Text mt=\"4\" fontSize=\"lg\">\n\t\t\t\t\t\tNOTE: If you want the widget only on certain pages or only in certain positions please add the following html tag to custom liquid or custom html section.\n\t\t\t\t\t</Text>\n\n\t\t\t\t\t<br />\n\t\t\t\t\t<Code children={`<div id=\"frangout-shop-look-app\"> </div>`}></Code>\n\t\t\t\t */}\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Container>\n\t\t</>\n\t)\n\n}\n\nexport default SettingsRoute;","import create from \"zustand\";\nimport produce from \"immer\";\nimport Parse from \"parse\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\n\nconst INITIAL_PRODUCTS_STATE = {\n\tget: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: [],\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n};\n\nconst useProductsStore = create((set, get) => ({\n\tproducts: INITIAL_PRODUCTS_STATE,\n\tgetProducts: async({ products = [], shop } = {}) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tproducts: {\n\t\t\t\t...state.products,\n\t\t\t\tget: {\n\t\t\t\t\t...INITIAL_PRODUCTS_STATE.get,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst { data } = await Parse.Cloud.run('get_products', {\n\t\t\t\tshop: shop,\n\t\t\t\tids: products.map(p => {\n\t\t\t\t\tif (typeof p === \"string\") {\n\t\t\t\t\t\treturn p.split('/')?.pop()\n\t\t\t\t\t}\n\t\t\t\t\treturn undefined\n\t\t\t\t}).filter(Boolean)\n\t\t\t});\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tproducts: {\n\t\t\t\t\t...state.products,\n\t\t\t\t\tget: {\n\t\t\t\t\t\t...INITIAL_PRODUCTS_STATE.get,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})));\n\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tproducts: {\n\t\t\t\t\t...state.products,\n\t\t\t\t\tget: {\n\t\t\t\t\t\t...INITIAL_PRODUCTS_STATE.get,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t}\n\t},\n}));\n\nexport default useProductsStore;\n\t\n","import { useEffect, useState, useContext } from \"react\";\nimport {\n  Container,\n\tBox,\n  Center,\n  useColorModeValue,\n  Heading,\n  Text,\n  Stack,\n  Link,\n\tButton,\n\tFlex,\n\tSimpleGrid,\n\tVStack,\n\tDivider,\n\tSkeleton,\n\tuseDisclosure,\n\tModal,\n\tModalBody,\n\tModalCloseButton,\n\tModalContent,\n\tModalFooter,\n\tModalOverlay,\n\tModalHeader,\n\tuseBreakpointValue\n} from '@chakra-ui/react';\nimport Carousel from \"../../components/carousel\";\nimport useLooksStore from \"../../store/looks\"\nimport useProductsStore from \"../../store/products\";\nimport { ExternalLinkIcon } from \"@chakra-ui/icons\";\nimport { ShopContext } from \"../../context\";\nimport \"../../embed.css\"\n\nconst ProductsModal = (props) => {\n\tconst { isOpen, onClose, productIds = [], lookId } = props;\n\tconst products = useProductsStore((state) => state.products);\n\tconst getProducts = useProductsStore((state) => state.getProducts);\n\tconst shop = useContext(ShopContext);\n\n\tuseEffect(() => {\n\t\tgetProducts({ products: productIds, shop });\n\t}, [])\n\n\tconst renderProducts = () => {\n\t\tif (products.get.loading) {\n\t\t\treturn <SimpleGrid  minChildWidth='330px' spacing='10px'>\n\t\t\t\t{\n\t\t\t\t\t[1,2,3].map((e,i) => (\n\t\t\t\t\t\t<Center p={4} key={i}>\n\t\t\t\t\t\t\t<Skeleton width=\"330px\" height=\"330px\" />\n\t\t\t\t\t\t</Center>\n\t\t\t\t\t))\n\t\t\t\t}\n\t\t\t</SimpleGrid>\n\t\t} else if (products.get.failure.error) {\n\t\t\treturn (\n\t\t\t\t<Box>\n\t\t\t\t\t<Flex direction=\"column\" align=\"center\">\n\t\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t\t<Heading as=\"h1\" size=\"md\">{products.get.failure.message}</Heading>\n\t\t\t\t\t\t</VStack>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t\t<Button onClick={() => getProducts({ products: productIds, shop })}>Try Again</Button>\t\n\t\t\t\t\t\t</VStack>\n\t\t\t\t\t</Flex>\n\t\t\t\t</Box>\n\t\t\t)\n\t\t} else if (products.get.success.data.length) {\n\t\t\treturn (\n\t\t\t\t<SimpleGrid  minChildWidth='330px' spacing='10px'>\n\t\t\t\t\t{\n\t\t\t\t\t\tproducts.get.success.data.map(product => (\n\t\t\t\t\t\t\t<Center py={8} key={product.admin_graphql_api_id || product.id}>\n\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\trole={'group'}\n\t\t\t\t\t\t\t\t\tp={4}\n\t\t\t\t\t\t\t\t\tmaxW={'330px'}\n\t\t\t\t\t\t\t\t\tw={'full'}\n\t\t\t\t\t\t\t\t\tboxShadow={'2xl'}\n\t\t\t\t\t\t\t\t\trounded={'lg'}\n\t\t\t\t\t\t\t\t\tpos={'relative'}\n\t\t\t\t\t\t\t\t\tzIndex={1}>\n\t\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\t\trounded={'lg'}\n\t\t\t\t\t\t\t\t\t\tmt={-12}\n\t\t\t\t\t\t\t\t\t\tpos={'relative'}\n\t\t\t\t\t\t\t\t\t\theight={'260px'}\n\t\t\t\t\t\t\t\t\t\t_groupHover={{\n\t\t\t\t\t\t\t\t\t\t\t_after: {\n\t\t\t\t\t\t\t\t\t\t\t\tfilter: 'blur(20px)',\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t<Carousel medias={product.images} height={260} width={282} />\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t<Stack pt={3} align={'center'}>\n\t\t\t\t\t\t\t\t\t\t<Text color={'gray.500'} fontSize={'sm'} textTransform={'uppercase'}>\n\t\t\t\t\t\t\t\t\t\t\t{product.variants && product.variants.length ? `${product.variants.length} variants available` : null }\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t<Heading textAlign=\"center\" fontSize={'2xl'} fontFamily={'body'} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t\t{product.title}\n\t\t\t\t\t\t\t\t\t\t</Heading>\n\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\tmarginTop={\"10px\"}\n\t\t\t\t\t\t\t\t\t\t\thref={`http://${shop}/products/${product.handle}?app=shoplook&lookid=${lookId}`}\n\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\twidth=\"full\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Button isFullWidth rightIcon={<ExternalLinkIcon />}>View Product</Button>\n\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t</SimpleGrid>\n\t\t\t);\n\t\t\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n  return (\n    <>\n      <Modal isCentered scrollBehavior={\"inside\"} closeOnOverlayClick blockScrollOnMount={false} preserveScrollBarGap lockFocusAcrossFrames={false} isOpen={isOpen} onClose={onClose} size=\"xl\">\n        <ModalOverlay />\n        <ModalContent>\n          <ModalHeader>Shop the products in this look</ModalHeader>\n          <ModalCloseButton />\n          <ModalBody>\n\t\t\t\t\t\t{renderProducts()}\n          </ModalBody>\n\n          <ModalFooter>\n            <Button colorScheme='blue' mr={3} onClick={onClose}>\n              Close\n            </Button>\n          </ModalFooter>\n        </ModalContent>\n      </Modal>\n    </>\n  )\n}\n\nconst EmbedRoute = (props) => {\n\tconst bgColor = useColorModeValue('white', 'gray.800');\n  const looks = useLooksStore((state) => state.looks);\n  const getLooks = useLooksStore((state) => state.getLooks);\n\tconst shop = useContext(ShopContext);\n\tconst { isOpen, onOpen, onClose } = useDisclosure();\n\tconst [productIds, setProductIds] = useState([]);\n\tconst [isModalvis, setIsModalvis] = useState(false);\n\tconst [currentLookId, setCurrentLookId] = useState('');\n\t\n\tuseEffect(() => {\n\t\tgetLooks({ shop })\n\t}, []);\n\n\tconst onLooksClick = ({ lookId, products }) => {\n\t\tsetProductIds(products);\n\t\tsetCurrentLookId(lookId);\n\t\tsetIsModalvis(true);\n\t\tonOpen();\n\t}\n\n\tconst onModalClose = () => {\n\t\tsetCurrentLookId('');\n\t\tsetProductIds([]);\n\t\tsetIsModalvis(false);\n\t\tonClose();\n\t}\n\n\tconst renderList = () => {\n\t\tif (looks.get.loading) {\n\t\t\treturn [1,2,3].map((e, i) => (\n\t\t\t\t<Center key={i}>\n\t\t\t\t\t<Skeleton width=\"330px\" height=\"330px\" />\n\t\t\t\t</Center>\n\t\t\t));\n\t\t} else if (looks.get.failure.error) {\n\t\t\treturn (\n\t\t\t\t<Box>\n\t\t\t\t\t<Flex direction=\"column\" align=\"center\">\n\t\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t\t<Heading as=\"h1\" size=\"md\">{looks.get.failure.message}</Heading>\n\t\t\t\t\t\t</VStack>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t\t<Button onClick={() => getLooks({ shop })}>Try Again</Button>\t\n\t\t\t\t\t\t</VStack>\n\t\t\t\t\t</Flex>\n\t\t\t\t</Box>\n\t\t\t);\n\t\t} else if (looks.get.success.data.length) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t{ isModalvis ? <ProductsModal isOpen={isOpen} onClose={onModalClose} lookId={currentLookId} productIds={productIds} /> : null }\n\t\t\t\t\t{\n\t\t\t\t\t\tlooks.get.success.data.map(look => (\n\t\t\t\t\t\t\t<Center py={8} key={look.id || look.objectId}>\n\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\trole={'group'}\n\t\t\t\t\t\t\t\t\tp={4}\n\t\t\t\t\t\t\t\t\tmaxW={'330px'}\n\t\t\t\t\t\t\t\t\tw={'full'}\n\t\t\t\t\t\t\t\t\tbg={bgColor}\n\t\t\t\t\t\t\t\t\tboxShadow={'2xl'}\n\t\t\t\t\t\t\t\t\trounded={'lg'}\n\t\t\t\t\t\t\t\t\tpos={'relative'}\n\t\t\t\t\t\t\t\t\tzIndex={1}>\n\t\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\t\trounded={'lg'}\n\t\t\t\t\t\t\t\t\t\tmt={-12}\n\t\t\t\t\t\t\t\t\t\tpos={'relative'}\n\t\t\t\t\t\t\t\t\t\theight={'260px'}\n\t\t\t\t\t\t\t\t\t\t// _after={{\n\t\t\t\t\t\t\t\t\t\t// \ttransition: 'all .3s ease',\n\t\t\t\t\t\t\t\t\t\t// \tcontent: '\"\"',\n\t\t\t\t\t\t\t\t\t\t// \tw: 'full',\n\t\t\t\t\t\t\t\t\t\t// \th: 'full',\n\t\t\t\t\t\t\t\t\t\t// \tpos: 'absolute',\n\t\t\t\t\t\t\t\t\t\t// \ttop: 5,\n\t\t\t\t\t\t\t\t\t\t// \tleft: 0,\n\t\t\t\t\t\t\t\t\t\t// \tbackgroundImage: `url(${look.get('medias')[0].url()})`,\n\t\t\t\t\t\t\t\t\t\t// \tfilter: 'blur(15px)',\n\t\t\t\t\t\t\t\t\t\t// \tzIndex: -1,\n\t\t\t\t\t\t\t\t\t\t// }}\n\t\t\t\t\t\t\t\t\t\t_groupHover={{\n\t\t\t\t\t\t\t\t\t\t\t_after: {\n\t\t\t\t\t\t\t\t\t\t\t\tfilter: 'blur(20px)',\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t{/* <Image\n\t\t\t\t\t\t\t\t\t\t\trounded={'lg'}\n\t\t\t\t\t\t\t\t\t\t\theight={230}\n\t\t\t\t\t\t\t\t\t\t\twidth={282}\n\t\t\t\t\t\t\t\t\t\t\tobjectFit={'cover'}\n\t\t\t\t\t\t\t\t\t\t\tsrc={'https://images.unsplash.com/photo-1518051870910-a46e30d9db16?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=1350&q=80'}\n\t\t\t\t\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t\t\t\t\t<Carousel medias={look.get('medias')} height={260} width={282} />\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t<Stack pt={3} align={'center'}>\n\t\t\t\t\t\t\t\t\t\t<Text color={'gray.500'} fontSize={'sm'} textTransform={'uppercase'}>\n\t\t\t\t\t\t\t\t\t\t\t{look.get('products').length} products in this look\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t<Heading fontSize={'2xl'} fontFamily={'body'} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t\t{look.get('name')}\n\t\t\t\t\t\t\t\t\t\t</Heading>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tmarginTop={\"10px\"}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => onLooksClick({ lookId: look.id, products: look.get('products')})}\n\t\t\t\t\t\t\t\t\t\t\tisFullWidth\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tShop The Look\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t}\n\t\n\treturn  (\n\t\t<Container maxW={'7xl'} p=\"12\">\n\t\t\t<Center>\n\t\t\t\t<Heading>Shop The Look</Heading>\n\t\t\t</Center>\n\t\t\t<br />\n\t\t\t<SimpleGrid minChildWidth='330px' spacing='10px'>\t\t\t\t\n\t\t\t\t{renderList()}\n\t\t\t</SimpleGrid>\n\t\t</Container>\n\t)\n\n}\n\nexport default EmbedRoute;","import React, { useEffect } from 'react';\nimport {\n  Routes,\n  Route,\n  Navigate,\n} from \"react-router-dom\";\nimport App from '../App';\nimport LookRoute from \"./look\";\nimport Authorize from \"./shopify/Authorize\";\nimport SettingsRoute from \"./settings\";\nimport EmbedRoute from './embed';\n// You should always import these components even without using else app back navigation will break\nimport { ClientRouter, useClientRouting, useRoutePropagation, RoutePropagator } from '@shopify/app-bridge-react';\nconst AppRoutes = (props) => {\n\n\n\treturn (\n\t\t<>\n\t\t<Routes>\n\t\t\t{/* <Route path=\"/shopify\" element={<Authorize />} />\n\t\t\t<Route path=\"/shopify/callback\" element={<Authorize />} />\n\t\t\t<Route\n\t\t\t\t\tpath=\"/install\"\n\t\t\t\t\telement={<Navigate to={{\n\t\t\t\t\t\tpathname: \"/shopify/authorize\",\n\t\t\t\t\t\tsearch: window.location.search,\n\t\t\t\t\t}} replace={true} />}\n\t\t\t\t/>\n\t\t\t<Route path=\"/shopify/authorize\" element={<Authorize />} /> */}\n\t\t\t<Route path=\"/embed\" element={<EmbedRoute />} />\n\t\t\t<Route path=\"/settings\" element={<SettingsRoute />} />\n\t\t\t<Route path=\"/looks\" element={<App />} />\n\t\t\t<Route path=\"/looks/:id\" element={<LookRoute />} />\n\t\t\t<Route path=\"/looks/create\" element={<LookRoute />} />\n\t\t\t<Route path=\"/shopify\" element={<App />} />\n\t\t\t<Route path=\"/shopify/callback\" element={<App />} />\n\t\t\t<Route path=\"/authorize\" element={<Authorize />} />\n\t\t\t<Route path=\"/\" element={<App />} />\n\t\t</Routes>\n\t\t</>\n\t)\n}\n\nexport default AppRoutes","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ChakraProvider } from \"@chakra-ui/react\"\nimport {\n  BrowserRouter,\n} from \"react-router-dom\";\nimport Parse from \"parse\";\nimport './index.css';\nimport {Provider} from '@shopify/app-bridge-react';\nimport { parseQuery } from \"./utils/url\";\nimport AppRoutes from \"./routes\"\nimport { ShopContext } from \"./context\";\n\nParse.initialize(process.env.REACT_APP_API_SHOPLOOKS_PARSE_APP_ID, process.env.REACT_APP_API_SHOPLOOKS_PARSE_JSKEY);\nParse.serverURL = process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL + '/parse';\n\nconst { host, shop = '' } = parseQuery(window.location.search);\nif (!host) {\n  ReactDOM.render(\n    <React.StrictMode>\n        <ChakraProvider>\n          <BrowserRouter>\n            <ShopContext.Provider value={shop}>\n              <AppRoutes />\n            </ShopContext.Provider>\n          </BrowserRouter>\n        </ChakraProvider>\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n  \n} else {\n  ReactDOM.render(\n    <React.StrictMode>\n        <ChakraProvider>\n          <BrowserRouter>\n            <Provider config={{ apiKey: process.env.REACT_APP_SHOPIFY_API_KEY, host: host,  forceRedirect: true }}>\n              <ShopContext.Provider value={shop}>\n                <AppRoutes />\n              </ShopContext.Provider>\n            </Provider>\n          </BrowserRouter>\n        </ChakraProvider>\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n}\n"],"sourceRoot":""}