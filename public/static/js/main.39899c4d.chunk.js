(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{671:function(e,t){},724:function(e,t,c){},819:function(e,t,c){},820:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c.n(r),a=c(79),s=c.n(a),o=c(62),i=c(47),l=c(46),j=c.n(l),b=(c(724),c(172)),d=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,t={},c=("?"===e[0]?e.substr(1):e).split("&"),r=0;r<c.length;r++){var n=c[r].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]||"")}return t},u=c(13),O=c(26),p=c(326),h=c(338),x=c(6),g=c(24),f=c(170),m=c(328),k=c(111),v=c(358),w=c(7),y=c(126),S=c(2);function C(){var e=Object(g.c)(),t=e.isOpen,c=e.onToggle;return Object(S.jsxs)(p.a,{children:[Object(S.jsxs)(p.e,{bg:Object(f.d)("white","gray.800"),color:Object(f.d)("gray.600","white"),minH:"60px",py:{base:2},px:{base:4},borderBottom:1,borderStyle:"solid",borderColor:Object(f.d)("gray.200","gray.900"),align:"center",children:[Object(S.jsx)(p.e,{flex:{base:1,md:"auto"},ml:{base:-2},display:{base:"flex",md:"none"},children:Object(S.jsx)(m.c,{onClick:c,icon:t?Object(S.jsx)(y.c,{w:3,h:3}):Object(S.jsx)(y.e,{w:5,h:5}),variant:"ghost","aria-label":"Toggle Navigation"})}),Object(S.jsx)(p.e,{flex:{base:1},justify:{base:"center",md:"start"},children:Object(S.jsx)(p.e,{display:{base:"none",md:"flex"},ml:10,children:Object(S.jsx)(T,{})})}),Object(S.jsx)(i.b,{to:"/looks/create",children:Object(S.jsx)(p.j,{flex:{base:1,md:0},justify:"flex-end",direction:"row",spacing:6,children:Object(S.jsx)(m.a,{display:{base:"none",md:"inline-flex"},fontSize:"sm",fontWeight:600,color:"white",bg:"pink.400",href:"#",_hover:{bg:"pink.300"},children:"Create Look"})})})]}),Object(S.jsx)(k.a,{in:t,animateOpacity:!0,children:Object(S.jsx)(L,{})})]})}var T=function(){var e=Object(f.d)("gray.600","gray.200"),t=Object(f.d)("gray.800","white"),c=Object(f.d)("white","gray.800");return Object(S.jsx)(p.j,{direction:"row",spacing:4,children:I.map((function(r){var n;return Object(S.jsx)(p.a,{children:Object(S.jsxs)(v.a,{trigger:"hover",placement:"bottom-start",children:[Object(S.jsx)(v.c,{children:Object(S.jsx)(i.b,{p:2,to:null!==(n=r.href)&&void 0!==n?n:"#",fontSize:"sm",fontWeight:500,color:e,_hover:{textDecoration:"none",color:t},children:r.label})}),r.children&&Object(S.jsx)(v.b,{border:0,boxShadow:"xl",bg:c,p:4,rounded:"xl",minW:"sm",children:Object(S.jsx)(p.j,{children:r.children.map((function(e){return Object(S.jsx)(z,Object(x.a)({},e),e.label)}))})})]})},r.label)}))})},z=function(e){var t=e.label,c=e.href,r=e.subLabel;return Object(S.jsx)(i.b,{to:c,role:"group",display:"block",p:2,rounded:"md",_hover:{bg:Object(f.d)("pink.50","gray.900")},children:Object(S.jsxs)(p.j,{direction:"row",align:"center",children:[Object(S.jsxs)(p.a,{children:[Object(S.jsx)(p.k,{transition:"all .3s ease",_groupHover:{color:"pink.400"},fontWeight:500,children:t}),Object(S.jsx)(p.k,{fontSize:"sm",children:r})]}),Object(S.jsx)(p.e,{transition:"all .3s ease",transform:"translateX(-10px)",opacity:0,_groupHover:{opacity:"100%",transform:"translateX(0)"},justify:"flex-end",align:"center",flex:1,children:Object(S.jsx)(w.a,{color:"pink.400",w:5,h:5,as:y.b})})]})})},L=function(){return Object(S.jsx)(p.j,{bg:Object(f.d)("white","gray.800"),p:4,display:{md:"none"},children:I.map((function(e){return Object(S.jsx)(W,Object(x.a)({},e),e.label)}))})},W=function(e){var t=e.label,c=e.children,r=e.href,n=Object(g.c)(),a=n.isOpen,s=n.onToggle;return Object(S.jsxs)(p.j,{spacing:4,onClick:c&&s,children:[Object(S.jsxs)(p.e,{py:2,as:i.b,to:null!==r&&void 0!==r?r:"#",justify:"space-between",align:"center",_hover:{textDecoration:"none"},children:[Object(S.jsx)(p.k,{fontWeight:600,color:Object(f.d)("gray.600","gray.200"),children:t}),c&&Object(S.jsx)(w.a,{as:y.a,transition:"all .25s ease-in-out",transform:a?"rotate(180deg)":"",w:6,h:6})]}),Object(S.jsx)(k.a,{in:a,animateOpacity:!0,style:{marginTop:"0!important"},children:Object(S.jsx)(p.j,{mt:2,pl:4,borderLeft:1,borderStyle:"solid",borderColor:Object(f.d)("gray.200","gray.700"),align:"start",children:c&&c.map((function(e){return Object(S.jsx)(i.b,{py:2,to:e.href,children:e.label},e.label)}))})})]})},I=[{label:"Settings",href:"/settings"}],F=c(357),_=c(124),A=c(250),D=c(207),E=c(249),B=c(360),P=c.n(B),R={dots:!0,arrows:!1,fade:!0,infinite:!0,autoplay:!0,speed:500,autoplaySpeed:5e3,slidesToShow:1,slidesToScroll:1};function U(e){var t=n.a.useState(null),c=Object(O.a)(t,2),r=c[0],a=c[1],s=Object(D.a)({base:"90%",md:"50%"}),o=Object(D.a)({base:"30%",md:"40px"}),i=e.medias,l=void 0===i?[]:i;return Object(S.jsxs)(p.a,{position:"relative",height:e.height||"400px",width:e.width||"400px",overflow:"hidden",borderWidth:"1px",rounded:"lg",shadow:"lg",margin:"0 auto",children:[Object(S.jsx)(m.c,{"aria-label":"left-arrow",variant:"ghost",position:"absolute",left:o,top:s,transform:"translate(-50%, -50%)",zIndex:2,onClick:function(){return null===r||void 0===r?void 0:r.slickPrev()},children:Object(S.jsx)(E.a,{size:"40px"})}),Object(S.jsx)(m.c,{"aria-label":"right-arrow",variant:"ghost",position:"absolute",right:o,top:s,transform:"translate(50%, -50%)",zIndex:2,onClick:function(){return null===r||void 0===r?void 0:r.slickNext()},children:Object(S.jsx)(E.b,{size:"40px"})}),Object(S.jsx)(P.a,Object(x.a)(Object(x.a)({autoplay:!1},R),{},{ref:function(e){return a(e)},children:l.map((function(t,c){return Object(S.jsx)(p.a,{position:"relative",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundImage:"url(".concat(t.url?t.url():t.src,")"),children:Object(S.jsx)(p.c,{padding:"0",size:"container.lg",height:e.height||"400px",position:"relative",children:Object(S.jsx)(p.j,{padding:"0",w:"full",position:"absolute",bottom:"0",background:"#00000094"})})},c)}))}))]})}var M=c(81),q=c(25),G=c(11),H=c.n(G),V=c(109),J=c.n(V),N=c(171),X=c.n(N),K=c(16),Q="Something went wrong. Try again",Y={get:{loading:!1,success:{ok:!1,data:[]},failure:{error:!1,message:""}},post:{loading:!1,success:{ok:!1,data:null},failure:{error:!1,message:""}},patch:{loading:!1,success:{ok:!1,data:null},failure:{error:!1,message:""}},destroy:{loading:!1,success:{ok:!1,data:null},failure:{error:!1,message:""}}},Z=J()((function(e,t){return{looks:Y,getLooks:function(){var t=Object(q.a)(H.a.mark((function t(){var c,r,n,a,s,o,i,l,b,d,u=arguments;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=u.length>0&&void 0!==u[0]?u[0]:{},r=c.id,n=void 0===r?"":r,a=c.shop,s=void 0===a?window.lookbook.shop:a,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{looks:Object(x.a)(Object(x.a)({},e.looks),{},{get:Object(x.a)(Object(x.a)({},Y.get),{},{loading:!0})})})}))),t.prev=2,o=j.a.Object.extend("Looks"),(i=new j.a.Query(o)).equalTo("shop",s),i.descending("createdAt"),n?i.equalTo("objectId",n):null,!n){t.next=14;break}return t.next=11,i.first();case 11:t.t0=t.sent,t.next=17;break;case 14:return t.next=16,i.find();case 16:t.t0=t.sent;case 17:if(l=t.t0,!n||!l.get("products").length){t.next=24;break}return t.next=21,j.a.Cloud.run("get_products",{shop:s,ids:l.get("products").map((function(e){var t;if("string"===typeof e)return null===(t=e.split("/"))||void 0===t?void 0:t.pop()})).filter(Boolean)});case 21:b=t.sent,d=b.data,l.set("products",d);case 24:return e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{looks:Object(x.a)(Object(x.a)({},e.looks),{},{get:Object(x.a)(Object(x.a)({},Y.get),{},{success:{ok:!0,data:l}})})})}))),t.abrupt("return",l);case 28:t.prev=28,t.t1=t.catch(2),e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{looks:Object(x.a)(Object(x.a)({},e.looks),{},{get:Object(x.a)(Object(x.a)({},Y.get),{},{failure:{error:!0,message:t.t1.message||Q}})})})})));case 31:case"end":return t.stop()}}),t,null,[[2,28]])})));return function(){return t.apply(this,arguments)}}(),postLooks:function(){var t=Object(q.a)(H.a.mark((function t(c){var r,n,a,s,o,i,l,b,d;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.id,r=c.shop,n=void 0===r?window.lookbook.shop:r,a=c.name,s=c.medias,o=c.products,i=void 0===o?[]:o,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{looks:Object(x.a)(Object(x.a)({},e.looks),{},{post:Object(x.a)(Object(x.a)({},Y.post),{},{loading:!0})})})}))),t.prev=2,l=j.a.Object.extend("Looks"),(b=new l).set("name",a),b.set("medias",s),b.set("products",i),b.set("shop",n),t.next=11,b.save(null);case 11:return d=t.sent,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{looks:Object(x.a)(Object(x.a)({},e.looks),{},{post:Object(x.a)(Object(x.a)({},Y.post),{},{success:{ok:!0,data:d}})})})}))),t.abrupt("return",d);case 16:throw t.prev=16,t.t0=t.catch(2),console.error(t.t0),e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{looks:Object(x.a)(Object(x.a)({},e.looks),{},{post:Object(x.a)(Object(x.a)({},Y.post),{},{failure:{error:!0,message:t.t0.message||Q}})})})}))),t.t0;case 21:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(e){return t.apply(this,arguments)}}(),patchLooks:function(){var t=Object(q.a)(H.a.mark((function t(c){var r,n,a,s,o,i,l,b,d,u;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.id,n=c.shop,a=void 0===n?window.lookbook.shop:n,s=c.name,o=c.medias,i=c.products,l=void 0===i?[]:i,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{looks:Object(x.a)(Object(x.a)({},e.looks),{},{patch:Object(x.a)(Object(x.a)({},Y.patch),{},{loading:!0})})})}))),t.prev=2,b=j.a.Object.extend("Looks"),(d=new b).id=r,d.set("name",s),d.set("medias",o),d.set("products",l),d.set("shop",a),t.next=12,d.save(null);case 12:return u=t.sent,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{looks:Object(x.a)(Object(x.a)({},e.looks),{},{patch:Object(x.a)(Object(x.a)({},Y.patch),{},{success:{ok:!0,data:u}})})})}))),t.abrupt("return",u);case 17:throw t.prev=17,t.t0=t.catch(2),e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{looks:Object(x.a)(Object(x.a)({},e.looks),{},{patch:Object(x.a)(Object(x.a)({},Y.patch),{},{failure:{error:!0,message:t.t0.message||Q}})})})}))),t.t0;case 21:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e){return t.apply(this,arguments)}}(),destroyLooks:function(){var t=Object(q.a)(H.a.mark((function t(c){var r,n,a;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{looks:Object(x.a)(Object(x.a)({},e.looks),{},{destroy:Object(x.a)(Object(x.a)({},Y.destroy),{},{loading:!0})})})}))),t.prev=1,r=j.a.Object.extend("Looks"),(n=new r).id=c,t.next=7,n.destroy();case 7:return a=t.sent,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{looks:Object(x.a)(Object(x.a)({},e.looks),{},{destroy:Object(x.a)(Object(x.a)({},Y.destroy),{},{success:{ok:!0,data:a}})})})}))),t.abrupt("return",a);case 12:throw t.prev=12,t.t0=t.catch(1),e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{looks:Object(x.a)(Object(x.a)({},e.looks),{},{destroy:Object(x.a)(Object(x.a)({},Y.destroy),{},{failure:{error:!0,message:t.t0.message||Q}})})})}))),t.t0;case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()}})),$=Z,ee=function(e){e.look;return Object(S.jsxs)(p.i,{columns:2,spacing:5,marginTop:"5",children:[Object(S.jsxs)(p.f,{align:"top",children:[Object(S.jsx)(p.a,{color:"green.400",px:2,children:Object(S.jsx)(w.a,{as:M.f})}),Object(S.jsxs)(p.l,{align:"start",children:[Object(S.jsx)(p.k,{fontWeight:600,children:"Views"}),Object(S.jsx)(p.k,{color:"gray.600",marginTop:"0",style:{marginTop:0},children:"Total views"})]})]}),Object(S.jsxs)(p.f,{align:"top",children:[Object(S.jsx)(p.a,{color:"green.400",px:2,children:Object(S.jsx)(w.a,{as:M.g})}),Object(S.jsxs)(p.l,{align:"start",children:[Object(S.jsx)(p.k,{fontWeight:600,children:"Clicks"}),Object(S.jsx)(p.k,{color:"gray.600",marginTop:"0",style:{marginTop:0},children:"Total clicks"})]})]}),Object(S.jsxs)(p.f,{align:"top",children:[Object(S.jsx)(p.a,{color:"green.400",px:2,children:Object(S.jsx)(w.a,{as:M.c})}),Object(S.jsxs)(p.l,{align:"start",children:[Object(S.jsx)(p.k,{fontWeight:600,children:"Add to cart"}),Object(S.jsx)(p.k,{color:"gray.600",marginTop:"0",style:{marginTop:0},children:"Cart revenue"})]})]}),Object(S.jsxs)(p.f,{align:"top",children:[Object(S.jsx)(p.a,{color:"green.400",px:2,children:Object(S.jsx)(w.a,{as:M.h})}),Object(S.jsxs)(p.l,{align:"start",children:[Object(S.jsx)(p.k,{fontWeight:600,children:"Conversion"}),Object(S.jsx)(p.k,{color:"gray.600",marginTop:"0",style:{marginTop:0},children:"Total revenue"})]})]})]})},te=function(e){var t=e.orangeColorMode,c=e.look;return Object(S.jsxs)(p.a,{display:"flex",flex:"1",marginRight:"3",position:"relative",alignItems:"center",children:[Object(S.jsx)(p.a,{width:{base:"100%"},zIndex:"2",children:Object(S.jsx)(U,{medias:null===c||void 0===c?void 0:c.get("medias")})}),Object(S.jsx)(p.a,{zIndex:"1",width:"100%",position:"absolute",height:"100%",children:Object(S.jsx)(p.a,{bgGradient:t,backgroundSize:"20px 20px",opacity:"0.4",height:"100%"})})]})},ce=function(e){var t=A.DateTime.fromISO(e.date.toISOString());return Object(S.jsxs)(p.f,{display:"flex",alignItems:"center",children:[Object(S.jsx)(p.k,{fontWeight:"light",fontSize:"sm",children:"Created at:"}),Object(S.jsx)(p.k,{fontSize:"sm",children:t.toLocaleString(A.DateTime.DATETIME_MED)})]})},re=function(e){var t=e.looks,c=e.orangeColorMode,r=e.getLooks;return t.get.loading?Object(S.jsxs)(p.e,{alignItems:"flex-start",flexDirection:"row",children:[Object(S.jsx)(h.a,{children:Object(S.jsx)(U,{medias:[]})}),Object(S.jsxs)(p.e,{direction:"column",width:"90%",marginLeft:"5",children:[Object(S.jsx)(h.a,{width:"100%",height:"40px"}),Object(S.jsx)("br",{}),Object(S.jsx)(h.a,{width:"100%",height:"20px"}),Object(S.jsx)("br",{}),Object(S.jsx)(h.a,{width:"100%",height:"20px"}),Object(S.jsx)("br",{}),Object(S.jsx)(h.a,{width:"100%",height:"20px"})]})]}):t.get.failure.error?Object(S.jsx)(p.a,{children:Object(S.jsxs)(p.e,{direction:"column",align:"center",children:[Object(S.jsx)(p.l,{spacing:"3",children:Object(S.jsx)(p.g,{as:"h1",size:"md",children:t.get.failure.message})}),Object(S.jsx)("br",{}),Object(S.jsx)(p.d,{}),Object(S.jsx)("br",{}),Object(S.jsx)(p.l,{spacing:"3",children:Object(S.jsx)(m.a,{onClick:function(){return r()},children:"Try Again"})})]})}):t.get.success.data.length?t.get.success.data.map((function(e){return Object(S.jsxs)(p.a,{children:[Object(S.jsxs)(p.a,{marginTop:{base:"1",sm:"5"},marginBottom:{base:"1",sm:"5"},display:"flex",flexDirection:{base:"column",sm:"row"},justifyContent:"space-between",children:[te({orangeColorMode:c,look:e}),Object(S.jsxs)(p.a,{display:"flex",flex:"1",flexDirection:"column",justifyContent:"flex-start",marginTop:{base:"3",sm:"0"},children:[Object(S.jsxs)(h.a,{isLoaded:!t.get.loading,children:[Object(S.jsx)(p.g,{marginTop:"1",children:Object(S.jsx)(i.b,{textDecoration:"none",_hover:{textDecoration:"none"},to:"looks/".concat(e.id),children:e.get("name")})}),Object(S.jsx)(ce,{date:e.get("createdAt")})]}),ee({look:e}),Object(S.jsx)(p.j,{direction:"row",spacing:4,marginTop:"5",children:Object(S.jsx)(i.b,{to:"looks/".concat(e.id),children:Object(S.jsx)(m.a,{colorScheme:"blue",isFullWidth:!0,leftIcon:Object(S.jsx)(M.b,{}),variant:"solid",children:"View / Modify"})})})]})]},e.objectId),Object(S.jsx)(p.d,{marginTop:"1em",marginBottom:"1em"})]},e.id)})):t.get.success.data.length?null:Object(S.jsx)(p.a,{children:Object(S.jsxs)(p.e,{direction:"column",align:"center",children:[Object(S.jsx)(p.l,{spacing:"3",children:Object(S.jsx)(p.g,{as:"h1",size:"md",children:"You have not created any looks yet."})}),Object(S.jsx)("br",{}),Object(S.jsx)(p.d,{}),Object(S.jsx)("br",{}),Object(S.jsx)(p.l,{spacing:"3",children:Object(S.jsx)(i.b,{to:"/looks/create",children:Object(S.jsx)(m.a,{children:"Create Look"})})})]})})};function ne(e){var t=$((function(e){return e.looks})),c=$((function(e){return e.getLooks})),n=(Object(F.a)(),Object(f.d)("radial(orange.600 1px, transparent 1px)","radial(orange.300 1px, transparent 1px)"));return Object(r.useEffect)((function(){c()}),[]),Object(S.jsxs)(p.c,{maxW:"7xl",p:"12",children:[Object(S.jsxs)(_.a,{status:"info",children:[Object(S.jsx)(_.c,{}),'To enable or disable "Shop the look" widget on your store, please visit the \xa0',Object(S.jsx)(i.b,{to:"/settings",style:{textDecoration:"underline"},children:Object(S.jsx)("b",{children:"Settings page"})}),"."]}),Object(S.jsx)("br",{}),re({looks:t,orangeColorMode:n,getLooks:c})]})}ne.defaultProps={};var ae=ne,se=c(208),oe=c(339);function ie(){var e=Object(r.useState)(""),t=Object(O.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(!1),s=Object(O.a)(a,2),o=s[0],i=s[1];return Object(S.jsx)(p.a,{marginTop:"24",children:Object(S.jsx)(p.l,{children:Object(S.jsxs)(p.a,{boxSize:"lg",children:[Object(S.jsxs)(p.l,{spacing:"3",children:[Object(S.jsx)(p.g,{as:"h1",size:"md",children:"Shopify Store Authentication"}),Object(S.jsx)(p.k,{children:"The access data to your Shopify site has expired."})]}),Object(S.jsx)("br",{}),Object(S.jsx)(p.d,{}),Object(S.jsx)("br",{}),Object(S.jsxs)(p.l,{spacing:"3",children:[Object(S.jsxs)(se.a,{id:"shopify-site",isRequired:!0,isInvalid:o,children:[Object(S.jsx)(se.c,{children:"Shopify site sub domain"}),Object(S.jsxs)(oe.b,{children:[Object(S.jsx)(oe.c,{children:"https://"}),Object(S.jsx)(oe.a,{onChange:function(e){return n(e.target.value)},type:"text",value:c,placeholder:"yourstore.myshopify.com"})]}),Object(S.jsx)(se.b,{children:"This is required"})]}),Object(S.jsx)(m.a,{onClick:function(){if(!c)return i(!0),!1;window.location.href="".concat("https://shoplook.frangout.com","/shopify?shop=").concat(c)},isFullWidth:!0,children:"Authorize"})]})]})})})}var le=function(){var e=Object(r.useState)(!1),t=Object(O.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(!1),s=Object(O.a)(a,2),o=s[0],i=s[1],l=Object(r.useState)(!1),j=Object(O.a)(l,2),b=j[0],x=j[1],g=Object(r.useState)(!1),f=Object(O.a)(g,2),m=f[0],k=f[1],v=Object(r.useState)(!1),w=Object(O.a)(v,2),y=w[0],T=w[1];return Object(r.useEffect)((function(){var e=d(window.location.search),t=e.code,c=e.session,r=e.hmac,a=e.embed,s=e.host,o=void 0===s?"":s;e.userToken;window.lookbook=d(window.location.search),c?(n(!0),i(!1),x(!1),k(!1)):t?(n(!1),i(!1),x(!0),k(!1),window.location.replace("".concat("https://shoplook.frangout.com","/shopify/callback").concat(document.location.search))):r?(n(!1),i(!0),x(!1),k(!1),window.location.replace("".concat("https://shoplook.frangout.com","/shopify").concat(document.location.search))):!o||t||r?a&&(T(!0),n(!1),i(!1),x(!1),k(!1)):(k(!0),n(!1),i(!1),x(!1))}),[]),c?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(C,{}),Object(S.jsx)(ae,{})]}):y?Object(S.jsx)(u.a,{to:"/embed",replace:!0}):o||b||m?Object(S.jsx)(p.c,{maxW:"7xl",p:"12",children:Object(S.jsxs)(p.e,{alignItems:"flex-start",flexDirection:"row",children:[Object(S.jsx)(h.a,{children:Object(S.jsx)(p.a,{})}),Object(S.jsxs)(p.e,{direction:"column",width:"90%",marginLeft:"5",children:[Object(S.jsx)(h.a,{width:"100%",height:"40px"}),Object(S.jsx)("br",{}),Object(S.jsx)(h.a,{width:"100%",height:"20px"}),Object(S.jsx)("br",{}),Object(S.jsx)(h.a,{width:"100%",height:"20px"}),Object(S.jsx)("br",{}),Object(S.jsx)(h.a,{width:"100%",height:"20px"})]})]})}):Object(S.jsx)(ie,{})},je=c(72),be=c(209),de=c(4),ue=c(340),Oe=function(){var e=Object(q.a)(H.a.mark((function e(t){var c;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FileReader).readAsDataURL(t),e.abrupt("return",new Promise((function(e,t){c.onload=function(){return e(c.result)},c.onerror=function(e){return t(e)}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe={get:{loading:!1,success:{ok:!1,data:null},failure:{error:!1,message:""}},post:{loading:!1,success:{ok:!1,data:null},failure:{error:!1,message:""}},destroy:{loading:!1,success:{ok:!1,data:null},failure:{error:!1,message:""}}},he=J()((function(e,t){return{files:pe,getFiles:function(){var t=Object(q.a)(H.a.mark((function t(){var c;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{files:Object(x.a)(Object(x.a)({},e.files),{},{get:Object(x.a)(Object(x.a)({},pe.get),{},{loading:!0})})})}))),t.prev=1,t.next=4,X.a.get("",{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("thinkificAccessToken")),accept:"application/json"}});case 4:c=t.sent,c.data,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{files:Object(x.a)(Object(x.a)({},e.files),{},{get:Object(x.a)(Object(x.a)({},pe.get),{},{success:{ok:!0,data:[]}})})})}))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{files:Object(x.a)(Object(x.a)({},e.files),{},{get:Object(x.a)(Object(x.a)({},pe.get),{},{failure:{error:!0,message:t.t0.message||Q}})})})})));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),postFiles:function(){var t=Object(q.a)(H.a.mark((function t(c){var r,n;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{files:Object(x.a)(Object(x.a)({},e.files),{},{post:Object(x.a)(Object(x.a)({},pe.post),{},{loading:!0})})})}))),t.prev=1,t.next=4,Promise.all(c.map(function(){var e=Object(q.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(t);case 2:return e.t0=e.sent,e.t1=t.type,e.abrupt("return",{data:e.t0,type:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return r=t.sent,t.next=7,Promise.all(r.map(function(){var e=Object(q.a)(H.a.mark((function e(t){var c,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new j.a.File("looks",{base64:t.data},t.type),e.next=3,c.save();case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return n=t.sent,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{files:Object(x.a)(Object(x.a)({},e.files),{},{post:Object(x.a)(Object(x.a)({},pe.post),{},{success:{ok:!0,data:n}})})})}))),t.abrupt("return",n);case 12:throw t.prev=12,t.t0=t.catch(1),e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{files:Object(x.a)(Object(x.a)({},e.files),{},{post:Object(x.a)(Object(x.a)({},pe.post),{},{failure:{error:!0,message:t.t0.message||Q}})})})}))),t.t0;case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),destroyFiles:function(){var t=Object(q.a)(H.a.mark((function t(c){var r,n;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{files:Object(x.a)(Object(x.a)({},e.files),{},{destroy:Object(x.a)(Object(x.a)({},pe.destroy),{},{loading:!0})})})}))),t.prev=1,t.next=4,X.a.delete("",{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("thinkificAccessToken")),accept:"*/*","Access-Control-Allow-Origin":"*"}});case 4:return r=t.sent,n=r.data,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{files:Object(x.a)(Object(x.a)({},e.files),{},{destroy:Object(x.a)(Object(x.a)({},pe.destroy),{},{success:{ok:!0,data:n}})})})}))),t.abrupt("return",n);case 10:throw t.prev=10,t.t0=t.catch(1),e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{files:Object(x.a)(Object(x.a)({},e.files),{},{destroy:Object(x.a)(Object(x.a)({},pe.destroy),{},{failure:{error:!0,message:t.t0.message||Q}})})})}))),t.t0;case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}})),xe=he,ge=c(356),fe=c(363);var me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isOpen,c=void 0!==t&&t,n=e.onClose,a=(e.on,xe((function(e){return e.files}))),s=xe((function(e){return e.postFiles})),o=Object(F.a)(),i=Object(r.useState)([]),l=Object(O.a)(i,2),j=l[0],b=l[1],d=Object(r.useCallback)(function(){var e=Object(q.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(t.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u=Object(fe.a)({onDrop:d,accept:"image/*",maxFiles:3,multiple:!0}),h=u.getRootProps,g=u.getInputProps,k=u.isDragActive;Object(r.useEffect)((function(){b([])}),[]),Object(r.useEffect)((function(){return function(){j.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[j]);var v=function(){var e=Object(q.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(j);case 3:t=e.sent,b([]),n(t||[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o({title:e.t0.message||Q,status:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),w=k?"Drop upto 3 png, jpeg or gifs here ...":"Drag 'n' drop upto 3 png, jpeg or gifs files here, or click to select uploads",y=Object(f.d)("gray.100","gray.600"),C=Object(f.d)(k?"teal.300":"gray.300",k?"teal.500":"gray.500");return Object(S.jsxs)(ge.a,{isOpen:c,onClose:n,closeOnOverlayClick:!1,onEsc:function(){return b([])},children:[Object(S.jsx)(ge.g,{}),Object(S.jsxs)(ge.d,{children:[Object(S.jsx)(ge.f,{children:"Add images for this look."}),Object(S.jsxs)(ge.b,{children:[Object(S.jsx)(p.b,Object(x.a)(Object(x.a)({p:10,cursor:"pointer",bg:k?y:"transparent",_hover:{bg:y},transition:"background-color 0.2s ease",borderRadius:4,border:"3px dashed",borderColor:C},h()),{},{children:Object(S.jsx)(p.l,{children:Object(S.jsxs)("div",{children:[Object(S.jsx)("input",Object(x.a)({},g())),Object(S.jsx)(p.k,{textAlign:"center",children:w})]})})})),Object(S.jsx)(p.b,{children:Object(S.jsx)(p.i,{spacing:5,columns:3,marginTop:"5",children:j.map((function(e){return Object(S.jsx)(be.a,{src:e.preview,width:100,height:100,objectFit:"cover",borderRadius:"5",borderColor:"gray",borderWidth:"2"},e.name)}))})})]}),Object(S.jsxs)(ge.e,{children:[Object(S.jsx)(m.a,{variant:"ghost",onClick:function(){b([]),n([])},colorScheme:"red",children:"Close"}),Object(S.jsx)(m.a,{colorScheme:"teal",mr:3,onClick:v,loadingText:"Uploading...",isLoading:a.post.loading,children:"Upload"})]})]})]})};function ke(e){var t=Object(g.c)(),c=t.isOpen,n=t.onOpen,a=t.onClose,s=Object(g.c)(),o=s.isOpen,i=s.onOpen,l=s.onClose,j=$((function(e){return e.looks})),d=(xe((function(e){return e.files})),$((function(e){return e.getLooks}))),k=$((function(e){return e.postLooks})),v=$((function(e){return e.destroyLooks})),y=$((function(e){return e.patchLooks})),C=Object(u.h)().id,T=void 0===C?"":C,z=Object(F.a)(),L=(Object(u.g)(),Object(f.d)("gray.100","gray.700"),Object(r.useState)(e.looks.name)),W=Object(O.a)(L,2),I=W[0],_=W[1],A=Object(r.useState)(e.looks.files||[]),D=Object(O.a)(A,2),E=D[0],B=D[1],P=Object(r.useState)(e.looks.products||[]),R=Object(O.a)(P,2),U=R[0],G=R[1],V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];B([].concat(Object(je.a)(E),Object(je.a)(e))),a()},J=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};G([].concat(Object(je.a)(U.filter(Boolean)),Object(je.a)(null===t||void 0===t||null===(e=t.selection)||void 0===e?void 0:e.map((function(e){return{title:e.title,image:e.images[0]&&e.images[0].originalSrc||"",id:e.id}})).filter(Boolean)))),l()},N=function(){var e=Object(q.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=5;break}return e.next=3,d({id:T});case 3:(t=e.sent)&&(_(null===t||void 0===t?void 0:t.get("name")),B([].concat(Object(je.a)(E),Object(je.a)(null===t||void 0===t?void 0:t.get("medias")))),G([].concat(Object(je.a)(U),Object(je.a)(null===t||void 0===t?void 0:t.get("products").map((function(e){return{id:e.admin_graphql_api_id,title:e.title,image:e.image.src}}))))));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){N()}),[]);var X=function(){var e=Object(q.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(t);case 3:z({title:"Look deleted!",status:"success"}),window.history.back(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),z({title:e.t0.message||Q,status:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){return U.map((function(e,t){return Object(S.jsxs)(p.j,{id:e.id,justifyContent:"space-between",direction:"row",background:"white",padding:"3",borderRadius:"lg",marginBottom:"4",align:"center",children:[Object(S.jsxs)(p.e,{flexDirection:"row",alignItems:"center",children:[Object(S.jsx)(p.e,{w:16,h:16,align:"center",justify:"center",rounded:"full",children:Object(S.jsx)(be.a,{objectFit:"contain",width:"100%",height:"100%",src:e.image,color:"yellow.500"})}),Object(S.jsx)(p.e,{direction:"column",children:Object(S.jsx)(p.k,{marginLeft:"3",fontWeight:600,children:e.title})})]}),Object(S.jsx)(w.a,{as:M.d,color:"red.500",w:5,h:5,onClick:function(){return function(e){U.splice(e,1),G(Object(je.a)(U.filter(Boolean)))}(t)}})]},t)}))};return Object(S.jsxs)(p.a,{position:"relative",children:[Object(S.jsx)(p.c,{as:p.i,maxW:"7xl",columns:{base:1,md:1},spacing:{base:10,lg:32},py:{base:10,sm:15,lg:20},children:Object(S.jsx)(p.j,{bg:"gray.50",rounded:"xl",p:{base:4,sm:6,md:8},spacing:{base:8},maxW:"3xl",zIndex:"9",margin:"0 auto",width:"100%",children:function(){if(j.get.loading)return Object(S.jsxs)(p.e,{direction:"column",width:"100%",children:[Object(S.jsx)(h.a,{width:"100%",height:"40px",children:" "}),Object(S.jsx)(h.c,{mt:"4",noOfLines:1,spacing:"4"}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsxs)(p.a,{children:[Object(S.jsx)(h.b,{size:"20"}),Object(S.jsx)(h.c,{mt:"4",noOfLines:4,spacing:"4"})]})]});if(j.get.failure.error)return Object(S.jsx)(p.a,{children:Object(S.jsxs)(p.e,{direction:"column",align:"center",children:[Object(S.jsx)(p.l,{spacing:"3",children:Object(S.jsx)(p.g,{as:"h1",size:"md",children:j.get.failure.message})}),Object(S.jsx)("br",{}),Object(S.jsx)(p.d,{}),Object(S.jsx)("br",{}),Object(S.jsx)(p.l,{spacing:"3",children:Object(S.jsx)(m.a,{onClick:function(){return N()},children:"Try Again"})})]})});var t,r=(null===j||void 0===j||null===(t=j.get)||void 0===t?void 0:t.success).data;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(p.j,{spacing:4,children:[Object(S.jsx)(p.g,{color:"gray.800",lineHeight:1.1,fontSize:{base:"2xl",sm:"3xl",md:"4xl"},children:r&&r.get?r.get("name"):"Create a look"}),Object(S.jsx)(p.k,{color:"gray.500",fontSize:{base:"sm",sm:"md"},children:"Add a name for the look you create and link the products from your store that can form this look."})]}),Object(S.jsx)(p.a,{mt:10,children:Object(S.jsxs)(de.d.form,Object(x.a)(Object(x.a)({onSubmit:function(){var e=Object(q.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!T){e.next=7;break}return e.next=5,y({id:T,name:I,medias:E,products:U.map((function(e){return e.id}))});case 5:e.next=10;break;case 7:return e.next=9,k({name:I,medias:E,products:U.map((function(e){return e.id}))});case 9:window.history.back();case 10:z({title:"Looks ".concat(T?"updated":"created"," successfully!"),status:"success"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),z({title:e.t0.message||Q,status:"error"});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()},e),{},{children:[Object(S.jsxs)(p.j,{spacing:4,children:[Object(S.jsxs)(se.a,{id:"look-name",children:[Object(S.jsx)(se.c,{children:"Look name"}),Object(S.jsx)(oe.a,{placeholder:"Winter Fashion Look",name:"look_name",type:"text",value:I,onChange:function(e){return _(e.target.value)},required:!0})]}),Object(S.jsxs)(se.a,{children:[Object(S.jsx)(se.c,{children:"Add medias to this look"}),Object(S.jsxs)(ue.c,{children:[E.map((function(e,t){return Object(S.jsx)(ue.a,{name:e.name(),src:e.url(),size:"lg",position:"relative",zIndex:2,_before:{content:'""',width:"full",height:"full",rounded:"full",transform:"scale(1.125)",bgGradient:"linear(to-bl, red.400,pink.400)",position:"absolute",zIndex:-1,top:0,left:0},children:Object(S.jsx)(ue.b,{boxSize:"1.25em",bg:"red.500",onClick:function(){return function(e,t){E.splice(t,1),B(Object(je.a)(E.filter(Boolean)))}(0,t)},children:Object(S.jsx)(w.a,{as:M.e,color:"white.500",w:5,h:5})})},e.name()+t)})),Object(S.jsx)(ue.a,{onClick:n,size:"lg",bg:"pink.400",_hover:{bg:"pink.300"},cursor:"pointer",icon:Object(S.jsx)(M.a,{size:"2em",color:"white"}),_before:{content:'""',width:"full",height:"full",rounded:"full",transform:"scale(1.2)",bgGradient:"linear(to-bl, red.400,pink.400)",position:"absolute",zIndex:-1,top:0,left:0}})]}),Object(S.jsx)(me,{isOpen:c,onClose:V})]}),Object(S.jsx)("br",{}),Object(S.jsxs)(se.a,{id:"look-products",children:[Object(S.jsx)(se.c,{children:"Add products for this look"}),Object(S.jsx)(p.j,{spacing:4,children:K()}),Object(S.jsx)(m.a,{fontFamily:"heading",bg:"gray.200",color:"gray.800",onClick:i,children:"Link products +"}),Object(S.jsx)(b.ResourcePicker,{onSelection:J,onCancel:l,selectMultiple:!0,showVariants:!1,resourceType:"Product",open:o,initialSelectionIds:U.map((function(e){return{id:e.id}})).filter(Boolean)})]})]}),Object(S.jsxs)(m.b,{mt:8,width:"full",children:[r&&r.id?Object(S.jsx)(m.a,{isLoading:j.destroy.loading,onClick:function(){return X(r.id)},isFullWidth:!0,variant:"ghost",colorScheme:"red",children:"Delete Look"}):null,Object(S.jsx)(m.a,{isLoading:j.post.loading||j.patch.loading,disabled:j.post.loading||j.patch.loading,loadingText:"".concat(T?"Updating":"Saving"," look"),type:"submit",fontFamily:"heading",isFullWidth:!0,w:"full",bgGradient:"linear(to-r, red.400,pink.400)",color:"white",_hover:{bgGradient:"linear(to-r, red.400,pink.400)",boxShadow:"xl"},children:"".concat(T?"Update":"Save"," look")})]})]}))})]})}()})}),Object(S.jsx)(ve,{position:"absolute",top:-10,left:-10,style:{filter:"blur(70px)"}})]})}var ve=function(e){return Object(S.jsxs)(w.a,Object(x.a)(Object(x.a)({width:Object(D.a)({base:"100%",md:"40vw",lg:"30vw"}),zIndex:Object(D.a)({base:-1,md:-1,lg:0}),height:"560px",viewBox:"0 0 528 560",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[Object(S.jsx)("circle",{cx:"71",cy:"61",r:"111",fill:"#F56565"}),Object(S.jsx)("circle",{cx:"244",cy:"106",r:"139",fill:"#ED64A6"}),Object(S.jsx)("circle",{cy:"291",r:"139",fill:"#ED64A6"}),Object(S.jsx)("circle",{cx:"80.5",cy:"189.5",r:"101.5",fill:"#ED8936"}),Object(S.jsx)("circle",{cx:"196.5",cy:"317.5",r:"101.5",fill:"#ECC94B"}),Object(S.jsx)("circle",{cx:"70.5",cy:"458.5",r:"101.5",fill:"#48BB78"}),Object(S.jsx)("circle",{cx:"426.5",cy:"-0.5",r:"101.5",fill:"#4299E1"})]}))};ke.defaultProps={looks:{name:""}};var we=ke,ye={get:{loading:!1,success:{ok:!1,data:[]},failure:{error:!1,message:""}},post:{loading:!1,success:{ok:!1,data:null},failure:{error:!1,message:""}},patch:{loading:!1,success:{ok:!1,data:null},failure:{error:!1,message:""}},destroy:{loading:!1,success:{ok:!1,data:null},failure:{error:!1,message:""}}},Se=J()((function(e,t){return{scripts:ye,postScripts:function(){var t=Object(q.a)(H.a.mark((function t(){var c,r,n=arguments;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.length>0&&void 0!==n[0]?n[0]:window.lookbook.shop,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{scripts:Object(x.a)(Object(x.a)({},e.scripts),{},{post:Object(x.a)(Object(x.a)({},ye.post),{},{loading:!0})})})}))),t.prev=2,t.next=5,j.a.Cloud.run("post_scripts",{shop:c});case 5:return r=t.sent,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{scripts:Object(x.a)(Object(x.a)({},e.scripts),{},{post:Object(x.a)(Object(x.a)({},ye.post),{},{success:{ok:!0,data:r}})})})}))),t.abrupt("return",r);case 10:throw t.prev=10,t.t0=t.catch(2),e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{scripts:Object(x.a)(Object(x.a)({},e.scripts),{},{post:Object(x.a)(Object(x.a)({},ye.post),{},{failure:{error:!0,message:t.t0.message||Q}})})})}))),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),destroyScripts:function(){var t=Object(q.a)(H.a.mark((function t(){var c,r,n=arguments;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.length>0&&void 0!==n[0]?n[0]:window.lookbook.shop,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{scripts:Object(x.a)(Object(x.a)({},e.scripts),{},{destroy:Object(x.a)(Object(x.a)({},ye.destroy),{},{loading:!0})})})}))),t.prev=2,t.next=5,j.a.Cloud.run("destroy_scripts",{shop:c});case 5:return r=t.sent,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{scripts:Object(x.a)(Object(x.a)({},e.scripts),{},{destroy:Object(x.a)(Object(x.a)({},ye.destroy),{},{success:{ok:!0,data:r}})})})}))),t.abrupt("return",r);case 10:throw t.prev=10,t.t0=t.catch(2),e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{scripts:Object(x.a)(Object(x.a)({},e.scripts),{},{destroy:Object(x.a)(Object(x.a)({},ye.destroy),{},{failure:{error:!0,message:t.t0.message||Q}})})})}))),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}()}})),Ce=Se,Te=n.a.createContext(),ze=function(){var e=Object(r.useContext)(Te),t=Ce((function(e){return e.scripts})),c=Ce((function(e){return e.postScripts})),n=Ce((function(e){return e.destroyScripts})),a=Object(F.a)(),s=function(){var t=Object(q.a)(H.a.mark((function t(){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c(e);case 3:a({title:"Widget added successfully! Please visit your online store after 30 seconds to check the widget.",status:"success"}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),a({title:t.t0.message||Q,status:"error"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),o=function(){var t=Object(q.a)(H.a.mark((function t(){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(e);case 3:a({title:"Widget removed successfully!",status:"success"}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),a({title:t.t0.message||Q,status:"error"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(C,{}),Object(S.jsx)(p.c,{maxW:"7xl",p:"12",children:Object(S.jsx)(p.a,{as:"section",children:Object(S.jsxs)(p.a,{maxW:"2xl",mx:"auto",px:{base:"6",lg:"8"},py:{base:"16",sm:"20"},textAlign:"center",children:[Object(S.jsx)(p.g,{size:"3xl",fontWeight:"extrabold",letterSpacing:"tight",children:"Widget embed settings"}),Object(S.jsx)(p.k,{mt:"4",fontSize:"lg",children:'Enable or disable "Shop the look" widget on your store. The widget gets appended to the bottom of your store page above the footer on the home page.'}),Object(S.jsxs)(m.b,{mt:"8",variant:"outline",spacing:"6",children:[Object(S.jsx)(m.a,{isLoading:t.post.loading,fontWeight:"bold",size:"lg",colorScheme:"blue",onClick:s,children:"Enable Widget Embed"}),Object(S.jsx)(m.a,{isLoading:t.destroy.loading,fontWeight:"bold",size:"lg",colorScheme:"red",onClick:o,children:"Disable Widget Embed"})]})]})})})]})},Le={get:{loading:!1,success:{ok:!1,data:[]},failure:{error:!1,message:""}}},We=J()((function(e,t){return{products:Le,getProducts:function(){var t=Object(q.a)(H.a.mark((function t(){var c,r,n,a,s,o,i=arguments;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=i.length>0&&void 0!==i[0]?i[0]:{},r=c.products,n=void 0===r?[]:r,a=c.shop,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{products:Object(x.a)(Object(x.a)({},e.products),{},{get:Object(x.a)(Object(x.a)({},Le.get),{},{loading:!0})})})}))),t.prev=2,t.next=5,j.a.Cloud.run("get_products",{shop:a,ids:n.map((function(e){var t;if("string"===typeof e)return null===(t=e.split("/"))||void 0===t?void 0:t.pop()})).filter(Boolean)});case 5:return s=t.sent,o=s.data,e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{products:Object(x.a)(Object(x.a)({},e.products),{},{get:Object(x.a)(Object(x.a)({},Le.get),{},{success:{ok:!0,data:o}})})})}))),t.abrupt("return",o);case 11:t.prev=11,t.t0=t.catch(2),e(Object(K.a)((function(e){return Object(x.a)(Object(x.a)({},e),{},{products:Object(x.a)(Object(x.a)({},e.products),{},{get:Object(x.a)(Object(x.a)({},Le.get),{},{failure:{error:!0,message:t.t0.message||Q}})})})})));case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(){return t.apply(this,arguments)}}()}})),Ie=We,Fe=(c(819),function(e){var t=e.isOpen,c=e.onClose,n=e.productIds,a=void 0===n?[]:n,s=e.lookId,o=Ie((function(e){return e.products})),i=Ie((function(e){return e.getProducts})),l=Object(r.useContext)(Te);Object(r.useEffect)((function(){i({products:a,shop:l})}),[]);return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(ge.a,{isCentered:!0,scrollBehavior:"inside",closeOnOverlayClick:!0,blockScrollOnMount:!1,preserveScrollBarGap:!0,lockFocusAcrossFrames:!1,isOpen:t,onClose:c,size:"xl",children:[Object(S.jsx)(ge.g,{}),Object(S.jsxs)(ge.d,{children:[Object(S.jsx)(ge.f,{children:"Shop the products in this look"}),Object(S.jsx)(ge.c,{}),Object(S.jsx)(ge.b,{children:o.get.loading?Object(S.jsx)(p.i,{minChildWidth:"330px",spacing:"10px",children:[1,2,3].map((function(e,t){return Object(S.jsx)(p.b,{p:4,children:Object(S.jsx)(h.a,{width:"330px",height:"330px"})},t)}))}):o.get.failure.error?Object(S.jsx)(p.a,{children:Object(S.jsxs)(p.e,{direction:"column",align:"center",children:[Object(S.jsx)(p.l,{spacing:"3",children:Object(S.jsx)(p.g,{as:"h1",size:"md",children:o.get.failure.message})}),Object(S.jsx)("br",{}),Object(S.jsx)(p.d,{}),Object(S.jsx)("br",{}),Object(S.jsx)(p.l,{spacing:"3",children:Object(S.jsx)(m.a,{onClick:function(){return i({products:a,shop:l})},children:"Try Again"})})]})}):o.get.success.data.length?Object(S.jsx)(p.i,{minChildWidth:"330px",spacing:"10px",children:o.get.success.data.map((function(e){return Object(S.jsx)(p.b,{py:8,children:Object(S.jsxs)(p.a,{role:"group",p:4,maxW:"330px",w:"full",boxShadow:"2xl",rounded:"lg",pos:"relative",zIndex:1,children:[Object(S.jsx)(p.a,{rounded:"lg",mt:-12,pos:"relative",height:"260px",_groupHover:{_after:{filter:"blur(20px)"}},children:Object(S.jsx)(U,{medias:e.images,height:260,width:282})}),Object(S.jsxs)(p.j,{pt:3,align:"center",children:[Object(S.jsx)(p.k,{color:"gray.500",fontSize:"sm",textTransform:"uppercase",children:e.variants&&e.variants.length?"".concat(e.variants.length," variants available"):null}),Object(S.jsx)(p.g,{textAlign:"center",fontSize:"2xl",fontFamily:"body",fontWeight:500,children:e.title}),Object(S.jsx)(p.h,{marginTop:"10px",href:"http://".concat(l,"/products/").concat(e.handle,"?app=shoplook&lookid=").concat(s),target:"_blank",width:"full",children:Object(S.jsx)(m.a,{isFullWidth:!0,rightIcon:Object(S.jsx)(y.d,{}),children:"View Product"})})]})]})},e.admin_graphql_api_id||e.id)}))}):null}),Object(S.jsx)(ge.e,{children:Object(S.jsx)(m.a,{colorScheme:"blue",mr:3,onClick:c,children:"Close"})})]})]})})}),_e=function(e){var t=Object(f.d)("white","gray.800"),c=$((function(e){return e.looks})),n=$((function(e){return e.getLooks})),a=Object(r.useContext)(Te),s=Object(g.c)(),o=s.isOpen,i=s.onOpen,l=s.onClose,j=Object(r.useState)([]),b=Object(O.a)(j,2),d=b[0],u=b[1],x=Object(r.useState)(!1),k=Object(O.a)(x,2),v=k[0],w=k[1],y=Object(r.useState)(""),C=Object(O.a)(y,2),T=C[0],z=C[1];Object(r.useEffect)((function(){n({shop:a})}),[]);var L=function(){z(""),u([]),w(!1),l()};return Object(S.jsxs)(p.c,{maxW:"7xl",p:"12",children:[Object(S.jsx)(p.b,{children:Object(S.jsx)(p.g,{children:"Shop The Look"})}),Object(S.jsx)("br",{}),Object(S.jsx)(p.i,{minChildWidth:"330px",spacing:"10px",children:c.get.loading?[1,2,3].map((function(e,t){return Object(S.jsx)(p.b,{children:Object(S.jsx)(h.a,{width:"330px",height:"330px"})},t)})):c.get.failure.error?Object(S.jsx)(p.a,{children:Object(S.jsxs)(p.e,{direction:"column",align:"center",children:[Object(S.jsx)(p.l,{spacing:"3",children:Object(S.jsx)(p.g,{as:"h1",size:"md",children:c.get.failure.message})}),Object(S.jsx)("br",{}),Object(S.jsx)(p.d,{}),Object(S.jsx)("br",{}),Object(S.jsx)(p.l,{spacing:"3",children:Object(S.jsx)(m.a,{onClick:function(){return n({shop:a})},children:"Try Again"})})]})}):c.get.success.data.length?Object(S.jsxs)(S.Fragment,{children:[v?Object(S.jsx)(Fe,{isOpen:o,onClose:L,lookId:T,productIds:d}):null,c.get.success.data.map((function(e){return Object(S.jsx)(p.b,{py:8,children:Object(S.jsxs)(p.a,{role:"group",p:4,maxW:"330px",w:"full",bg:t,boxShadow:"2xl",rounded:"lg",pos:"relative",zIndex:1,children:[Object(S.jsx)(p.a,{rounded:"lg",mt:-12,pos:"relative",height:"260px",_groupHover:{_after:{filter:"blur(20px)"}},children:Object(S.jsx)(U,{medias:e.get("medias"),height:260,width:282})}),Object(S.jsxs)(p.j,{pt:3,align:"center",children:[Object(S.jsxs)(p.k,{color:"gray.500",fontSize:"sm",textTransform:"uppercase",children:[e.get("products").length," products in this look"]}),Object(S.jsx)(p.g,{fontSize:"2xl",fontFamily:"body",fontWeight:500,children:e.get("name")}),Object(S.jsx)(m.a,{marginTop:"10px",onClick:function(){return function(e){var t=e.lookId,c=e.products;u(c),z(t),w(!0),i()}({lookId:e.id,products:e.get("products")})},isFullWidth:!0,children:"Shop The Look"})]})]})},e.id||e.objectId)}))]}):void 0})]})},Ae=function(e){return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(u.d,{children:[Object(S.jsx)(u.b,{path:"/embed",element:Object(S.jsx)(_e,{})}),Object(S.jsx)(u.b,{path:"/settings",element:Object(S.jsx)(ze,{})}),Object(S.jsx)(u.b,{path:"/looks",element:Object(S.jsx)(le,{})}),Object(S.jsx)(u.b,{path:"/looks/:id",element:Object(S.jsx)(we,{})}),Object(S.jsx)(u.b,{path:"/looks/create",element:Object(S.jsx)(we,{})}),Object(S.jsx)(u.b,{path:"/shopify",element:Object(S.jsx)(le,{})}),Object(S.jsx)(u.b,{path:"/shopify/callback",element:Object(S.jsx)(le,{})}),Object(S.jsx)(u.b,{path:"/authorize",element:Object(S.jsx)(ie,{})}),Object(S.jsx)(u.b,{path:"/",element:Object(S.jsx)(le,{})})]})})};j.a.initialize("shoplooks","shoplooks"),j.a.serverURL="https://shoplook.frangout.com/parse";var De=d(window.location.search),Ee=De.host,Be=De.shop,Pe=void 0===Be?"":Be;Ee?s.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(o.a,{children:Object(S.jsx)(i.a,{children:Object(S.jsx)(b.Provider,{config:{apiKey:"7e2581c77e3cf42a12f9a1ef624ad7ea",host:Ee,forceRedirect:!0},children:Object(S.jsx)(Te.Provider,{value:Pe,children:Object(S.jsx)(Ae,{})})})})})}),document.getElementById("root")):s.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(o.a,{children:Object(S.jsx)(i.a,{children:Object(S.jsx)(Te.Provider,{value:Pe,children:Object(S.jsx)(Ae,{})})})})}),document.getElementById("root"))}},[[820,1,2]]]);
//# sourceMappingURL=main.39899c4d.chunk.js.map