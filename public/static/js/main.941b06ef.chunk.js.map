{"version":3,"sources":["utils/url/index.js","components/navbar/index.js","components/carousel/index.js","constants/strings/index.js","store/looks/index.js","routes/looks/index.js","routes/shopify/Authorize.js","App.js","utils/media/index.js","store/files/index.js","components/upload/index.js","routes/look/index.js","store/scripts/index.js","context/index.js","routes/settings/index.js","store/products/index.js","routes/embed/index.js","routes/index.js","index.js"],"names":["parseQuery","queryString","window","location","search","query","pairs","substr","split","i","length","pair","decodeURIComponent","WithSubnavigation","useDisclosure","isOpen","onToggle","bg","useColorModeValue","color","minH","py","base","px","borderBottom","borderStyle","borderColor","align","flex","md","ml","display","onClick","icon","w","h","variant","justify","to","direction","spacing","fontSize","fontWeight","href","_hover","in","animateOpacity","DesktopNav","linkColor","linkHoverColor","popoverContentBgColor","NAV_ITEMS","map","navItem","trigger","placement","p","textDecoration","label","children","border","boxShadow","rounded","minW","child","DesktopSubNav","subLabel","role","transition","_groupHover","transform","opacity","as","ChevronRightIcon","MobileNav","MobileNavItem","Link","ChevronDownIcon","style","marginTop","mt","pl","borderLeft","settings","dots","arrows","fade","infinite","autoplay","speed","autoplaySpeed","slidesToShow","slidesToScroll","CaptionCarousel","props","React","useState","slider","setSlider","top","useBreakpointValue","side","medias","position","height","width","overflow","borderWidth","shadow","margin","left","zIndex","slickPrev","size","right","slickNext","ref","media","index","backgroundPosition","backgroundRepeat","backgroundSize","backgroundImage","url","src","padding","bottom","background","INTERNAL_SERVER_ERROR","INITIAL_LOOKS_STATE","get","loading","success","ok","data","failure","error","message","post","patch","destroy","useLooksStore","create","set","looks","getLooks","a","id","shop","lookbook","produce","state","Looks","Parse","Object","extend","looksQuery","Query","equalTo","descending","first","User","current","find","Cloud","run","ids","pop","filter","Boolean","products","postLooks","name","acl","ACL","setPublicWriteAccess","setPublicReadAccess","setWriteAccess","setACL","save","console","patchLooks","destroyLooks","renderLookPoints","look","columns","IoEye","IoHandLeftSharp","IoCartSharp","IoLogoUsd","renderCarousel","orangeColorMode","marginRight","alignItems","bgGradient","LooksCreatedDate","date","DateTime","fromISO","toISOString","toLocaleString","DATETIME_MED","renderLooks","flexDirection","marginLeft","sm","marginBottom","justifyContent","isLoaded","colorScheme","isFullWidth","leftIcon","objectId","useToast","useEffect","maxW","status","defaultProps","Authorize","storeDomain","setStoreDomain","isShopifySiteURLInvalid","setIsShopifySiteURLInvalid","boxSize","isRequired","isInvalid","onChange","e","target","value","type","placeholder","process","App","shopifySessionAvailable","setShopifySessionAvailable","shopifyHmacAvailable","setShopifyHmacAvailable","shopifyCodeAvailable","setShopifyCodeAvailable","shopifyHostAvailable","setShopifyHostAvailable","isEmbed","setIsEmbed","code","session","hmac","embed","host","userToken","replace","document","logOut","then","become","catch","getBase64","file","reader","FileReader","readAsDataURL","Promise","reslove","reject","onload","result","onerror","INITIAL_FILES_STATE","useFilesStore","files","getFiles","axios","headers","Authorization","localStorage","getItem","accept","postFiles","uploads","all","upload","base64s","base64","parseFile","File","savedFile","savedFiles","destroyFiles","delete","Upload","onClose","on","toast","setUploads","onDrop","useCallback","acceptedUploads","assign","preview","URL","createObjectURL","useDropzone","maxFiles","multiple","getRootProps","getInputProps","isDragActive","forEach","revokeObjectURL","saveUploads","title","dropText","activeBg","closeOnOverlayClick","onEsc","cursor","borderRadius","textAlign","objectFit","mr","loadingText","isLoading","CreateLooks","onOpen","isResourcePickerOpen","onResourcePickerOpen","onResourcePickerClose","useParams","useNavigate","looksName","setLooksName","setProducts","onUploadWidgetClose","onResourcePickerDone","selection","d","image","images","originalSrc","getLooskById","admin_graphql_api_id","onDestroyLook","lookId","history","back","renderProducts","product","IoClose","splice","removeProduct","SimpleGrid","lg","noOfLines","lineHeight","form","onSubmit","preventDefault","required","_before","content","removeUpload","IoCloseCircleOutline","fontFamily","onSelection","onCancel","selectMultiple","showVariants","resourceType","open","initialSelectionIds","disabled","Blur","viewBox","fill","xmlns","cx","cy","r","INITIAL_SCRIPTS_STATE","useScriptsStore","scripts","postScripts","destroyScripts","ShopContext","createContext","SettingsRoute","useContext","enableWidget","disableWidget","mx","letterSpacing","INITIAL_PRODUCTS_STATE","useProductsStore","getProducts","ProductsModal","productIds","isCentered","scrollBehavior","blockScrollOnMount","preserveScrollBarGap","lockFocusAcrossFrames","minChildWidth","pos","_after","pt","textTransform","variants","handle","rightIcon","EmbedRoute","bgColor","setProductIds","isModalvis","setIsModalvis","currentLookId","setCurrentLookId","onModalClose","onLooksClick","AppRoutes","path","element","initialize","serverURL","ReactDOM","render","StrictMode","config","apiKey","forceRedirect","Provider","getElementById"],"mappings":"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","file":"static/js/main.941b06ef.chunk.js","sourcesContent":["export const parseQuery = (queryString = window.location.search) => {\n\tvar query = {};\n\tvar pairs = (queryString[0] === '?' ? queryString.substr(1) : queryString).split('&');\n\tfor (var i = 0; i < pairs.length; i++) {\n\t\t\tvar pair = pairs[i].split('=');\n\t\t\tquery[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');\n\t}\n\treturn query;\n}","import {\n    Box,\n    Flex,\n    Text,\n    IconButton,\n    Button,\n    Stack,\n    Collapse,\n    Icon,\n    Popover,\n    PopoverTrigger,\n    PopoverContent,\n    useColorModeValue,\n    useBreakpointValue,\n    useDisclosure,\n  } from '@chakra-ui/react';\n  import {\n    HamburgerIcon,\n    CloseIcon,\n    ChevronDownIcon,\n    ChevronRightIcon,\n  } from '@chakra-ui/icons';\n  import { Link } from \"react-router-dom\"\n  \n  export default function WithSubnavigation() {\n    const { isOpen, onToggle } = useDisclosure();\n  \n    return (\n      <Box>\n        <Flex\n          bg={useColorModeValue('white', 'gray.800')}\n          color={useColorModeValue('gray.600', 'white')}\n          minH={'60px'}\n          py={{ base: 2 }}\n          px={{ base: 4 }}\n          borderBottom={1}\n          borderStyle={'solid'}\n          borderColor={useColorModeValue('gray.200', 'gray.900')}\n          align={'center'}>\n          <Flex\n            flex={{ base: 1, md: 'auto' }}\n            ml={{ base: -2 }}\n            display={{ base: 'flex', md: 'none' }}>\n            <IconButton\n              onClick={onToggle}\n              icon={\n                isOpen ? <CloseIcon w={3} h={3} /> : <HamburgerIcon w={5} h={5} />\n              }\n              variant={'ghost'}\n              aria-label={'Toggle Navigation'}\n            />\n          </Flex>\n          <Flex flex={{ base: 1 }} justify={{ base: 'center', md: 'start' }}>  \n            <Flex display={{ base: 'none', md: 'flex' }} ml={10}>\n              <DesktopNav />\n            </Flex>\n          </Flex>\n            <Link to=\"/looks/create\">\n            <Stack\n              flex={{ base: 1, md: 0 }}\n              justify={'flex-end'}\n              direction={'row'}\n              spacing={6}>\n              <Button\n                display={{ base: 'none', md: 'inline-flex' }}\n                fontSize={'sm'}\n                fontWeight={600}\n                color={'white'}\n                bg={'pink.400'}\n                href={'#'}\n                _hover={{\n                  bg: 'pink.300',\n                }}>\n                Create Look\n              </Button>\n            </Stack>\n          </Link>\n        </Flex>\n  \n        <Collapse in={isOpen} animateOpacity>\n          <MobileNav />\n        </Collapse>\n      </Box>\n    );\n  }\n  \n  const DesktopNav = () => {\n    const linkColor = useColorModeValue('gray.600', 'gray.200');\n    const linkHoverColor = useColorModeValue('gray.800', 'white');\n    const popoverContentBgColor = useColorModeValue('white', 'gray.800');\n  \n    return (\n      <Stack direction={'row'} spacing={4}>\n        {NAV_ITEMS.map((navItem) => (\n          <Box key={navItem.label}>\n            <Popover trigger={'hover'} placement={'bottom-start'}>\n              <PopoverTrigger>\n                <Link\n                  p={2}\n                  to={navItem.href ?? '#'}\n                  fontSize={'sm'}\n                  fontWeight={500}\n                  color={linkColor}\n                  _hover={{\n                    textDecoration: 'none',\n                    color: linkHoverColor,\n                  }}>\n                  {navItem.label}\n                </Link>\n              </PopoverTrigger>\n  \n              {navItem.children && (\n                <PopoverContent\n                  border={0}\n                  boxShadow={'xl'}\n                  bg={popoverContentBgColor}\n                  p={4}\n                  rounded={'xl'}\n                  minW={'sm'}>\n                  <Stack>\n                    {navItem.children.map((child) => (\n                      <DesktopSubNav key={child.label} {...child} />\n                    ))}\n                  </Stack>\n                </PopoverContent>\n              )}\n            </Popover>\n          </Box>\n        ))}\n      </Stack>\n    );\n  };\n  \n  const DesktopSubNav = ({ label, href, subLabel }) => {\n    return (\n      <Link\n        to={href}\n        role={'group'}\n        display={'block'}\n        p={2}\n        rounded={'md'}\n        _hover={{ bg: useColorModeValue('pink.50', 'gray.900') }}>\n        <Stack direction={'row'} align={'center'}>\n          <Box>\n            <Text\n              transition={'all .3s ease'}\n              _groupHover={{ color: 'pink.400' }}\n              fontWeight={500}>\n              {label}\n            </Text>\n            <Text fontSize={'sm'}>{subLabel}</Text>\n          </Box>\n          <Flex\n            transition={'all .3s ease'}\n            transform={'translateX(-10px)'}\n            opacity={0}\n            _groupHover={{ opacity: '100%', transform: 'translateX(0)' }}\n            justify={'flex-end'}\n            align={'center'}\n            flex={1}>\n            <Icon color={'pink.400'} w={5} h={5} as={ChevronRightIcon} />\n          </Flex>\n        </Stack>\n      </Link>\n    );\n  };\n  \n  const MobileNav = () => {\n    return (\n      <Stack\n        bg={useColorModeValue('white', 'gray.800')}\n        p={4}\n        display={{ md: 'none' }}>\n        {NAV_ITEMS.map((navItem) => (\n          <MobileNavItem key={navItem.label} {...navItem} />\n        ))}\n      </Stack>\n    );\n  };\n  \n  const MobileNavItem = ({ label, children, href }) => {\n    const { isOpen, onToggle } = useDisclosure();\n  \n    return (\n      <Stack spacing={4} onClick={children && onToggle}>\n        <Flex\n          py={2}\n          as={Link}\n          to={href ?? '#'}\n          justify={'space-between'}\n          align={'center'}\n          _hover={{\n            textDecoration: 'none',\n          }}>\n          <Text\n            fontWeight={600}\n            color={useColorModeValue('gray.600', 'gray.200')}>\n            {label}\n          </Text>\n          {children && (\n            <Icon\n              as={ChevronDownIcon}\n              transition={'all .25s ease-in-out'}\n              transform={isOpen ? 'rotate(180deg)' : ''}\n              w={6}\n              h={6}\n            />\n          )}\n        </Flex>\n  \n        <Collapse in={isOpen} animateOpacity style={{ marginTop: '0!important' }}>\n          <Stack\n            mt={2}\n            pl={4}\n            borderLeft={1}\n            borderStyle={'solid'}\n            borderColor={useColorModeValue('gray.200', 'gray.700')}\n            align={'start'}>\n            {children &&\n              children.map((child) => (\n                <Link key={child.label} py={2} to={child.href}>\n                  {child.label}\n                </Link>\n              ))}\n          </Stack>\n        </Collapse>\n      </Stack>\n    );\n  };\n\n  const NAV_ITEMS = [\n    // {\n    //   label: 'Home',\n    //   children: [\n    //     {\n    //       label: 'Explore Design Work',\n    //       subLabel: 'Trending Design to inspire you',\n    //       href: '#',\n    //     },\n    //     {\n    //       label: 'New & Noteworthy',\n    //       subLabel: 'Up-and-coming Designers',\n    //       href: '#',\n    //     },\n    //   ],\n    // },\n    // {\n    //   label: 'Find Work',\n    //   children: [\n    //     {\n    //       label: 'Job Board',\n    //       subLabel: 'Find your dream design job',\n    //       href: '#',\n    //     },\n    //     {\n    //       label: 'Freelance Projects',\n    //       subLabel: 'An exclusive list for contract work',\n    //       href: '#',\n    //     },\n    //   ],\n    // },\n    // {\n    //   label: 'Looks',\n    //   href: '/looks',\n    // },\n    {\n        label: 'Settings',\n        href: '/settings',\n    },\n  ];","import React from 'react';\nimport {\n  Box,\n  IconButton,\n  useBreakpointValue,\n  Stack,\n  Heading,\n  Text,\n  Container,\n} from '@chakra-ui/react';\n// Here we have used react-icons package for the icons\nimport { BiLeftArrowAlt, BiRightArrowAlt } from 'react-icons/bi';\n// And react-slick as our Carousel Lib\nimport Slider from 'react-slick';\n\n// Settings for the slider\nconst settings = {\n  dots: true,\n  arrows: false,\n  fade: true,\n  infinite: true,\n  autoplay: true,\n  speed: 500,\n  autoplaySpeed: 5000,\n  slidesToShow: 1,\n  slidesToScroll: 1,\n};\n\nexport default function CaptionCarousel(props) {\n  // As we have used custom buttons, we need a reference variable to\n  // change the state\n  const [slider, setSlider] = React.useState(null);\n\n  // These are the breakpoints which changes the position of the\n  // buttons as the screen size changes\n  const top = useBreakpointValue({ base: '90%', md: '50%' });\n  const side = useBreakpointValue({ base: '30%', md: '40px' });\n  \n  const { medias = [] } = props;\n  // This list contains all the data for carousels\n  // This can be static or loaded from a server\n  return (\n    <Box\n      position={'relative'}\n      height={props.height || '400px'}\n      width={props.width || '400px'}\n      overflow={'hidden'}\n      borderWidth=\"1px\"\n\t\t\trounded=\"lg\"\n\t\t\tshadow=\"lg\"\n      margin=\"0 auto\"\n    > \n      {/* Left Icon */}\n      <IconButton\n        aria-label=\"left-arrow\"\n        variant=\"ghost\"\n        position=\"absolute\"\n        left={side}\n        top={top}\n        transform={'translate(-50%, -50%)'}\n        zIndex={2}\n        onClick={() => slider?.slickPrev()}>\n        <BiLeftArrowAlt size=\"40px\" />\n      </IconButton>\n      {/* Right Icon */}\n      <IconButton\n        aria-label=\"right-arrow\"\n        variant=\"ghost\"\n        position=\"absolute\"\n        right={side}\n        top={top}\n        transform={'translate(50%, -50%)'}\n        zIndex={2}\n        onClick={() => slider?.slickNext()}>\n        <BiRightArrowAlt size=\"40px\" />\n      </IconButton>\n      {/* Slider */}\n      <Slider autoplay={false} {...settings} ref={(slider) => setSlider(slider)}>\n        {medias.map((media, index) => (\n          <Box\n            key={index}\n            // height={'6xl'}\n            position=\"relative\"\n            backgroundPosition=\"center\"\n            backgroundRepeat=\"no-repeat\"\n            backgroundSize=\"cover\"\n            backgroundImage={`url(${media.url ? media.url() : media.src})`}>\n            {/* This is the block you need to change, to customize the caption */}\n            <Container padding=\"0\" size=\"container.lg\" height={props.height || '400px'} position=\"relative\">\n              <Stack\n                padding=\"0\"\n                w={'full'}\n                position=\"absolute\"\n                bottom=\"0\"\n                background=\"#00000094\"\n            >\n                {/* <Heading padding=\"1\" textAlign=\"center\" color=\"white\" fontSize={{ base: 'md', md: 'xl', lg: '2xl' }}>\n                  {card.title}\n                </Heading>\n                <Text margin=\"0\" padding=\"0\" fontSize={{ base: 'md', lg: 'lg' }} color=\"GrayText\">\n                  {card.text}\n                </Text> */}\n              </Stack>\n            </Container>\n          </Box>\n        ))}\n      </Slider>\n    </Box>\n  );\n}","export const INTERNAL_SERVER_ERROR = \"Something went wrong. Try again\"","import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\nimport Parse from \"parse\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\n\nconst INITIAL_LOOKS_STATE = {\n\tget: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: [],\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tpost: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tpatch: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tdestroy: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t}\n};\n\nconst useLooksStore = create((set, get) => ({\n\tlooks: INITIAL_LOOKS_STATE,\n\tgetLooks: async({ id = '', shop = window.lookbook.shop } = {}) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tlooks: {\n\t\t\t\t...state.looks,\n\t\t\t\tget: {\n\t\t\t\t\t...INITIAL_LOOKS_STATE.get,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst Looks = Parse.Object.extend('Looks');\n\t\t\tconst looksQuery = new Parse.Query(Looks);\n\t\t\tlooksQuery.equalTo('shop', shop);\n\t\t\tlooksQuery.descending('createdAt');\n\t\t\tconst fud = id ? looksQuery.equalTo('objectId', id) : null;\n\t\t\tconst data = id ? await looksQuery.first(Parse.User.current()) :  await looksQuery.find(Parse.User.current());\n\n\t\t\tif (id && data.get('products').length) {\n\t\t\t\tconst { data: products } = await Parse.Cloud.run('get_products', {\n\t\t\t\t\tshop: shop,\n\t\t\t\t\tids: data.get('products').map(p => {\n\t\t\t\t\t\tif (typeof p === \"string\") {\n\t\t\t\t\t\t\treturn p.split('/')?.pop()\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined\n\t\t\t\t\t}).filter(Boolean)\n\t\t\t\t});\n\t\t\t\tdata.set('products', products);\n\t\t\t}\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tget: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.get,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})));\n\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tget: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.get,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t}\n\t},\n\tpostLooks: async ({ id, shop = window.lookbook.shop, name, medias, products = [] }) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tlooks: {\n\t\t\t\t...state.looks,\n\t\t\t\tpost: {\n\t\t\t\t\t...INITIAL_LOOKS_STATE.post,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst Looks = Parse.Object.extend('Looks');\n\t\t\tconst looks = new Looks();\n\t\t\tlooks.set('name', name);\n\t\t\tlooks.set('medias', medias);\n\t\t\tlooks.set('products', products);\n\t\t\tlooks.set('shop', shop);\n\t\t\tif (Parse.User.current() && Parse.User.current().id) {\n\t\t\t\tlooks.set('createdBy', Parse.User.current());\n\t\t\t\tconst acl = new Parse.ACL();\n\t\t\t\tacl.setPublicWriteAccess(false);\n\t\t\t\tacl.setPublicReadAccess(true);\n\t\t\t\tacl.setWriteAccess(Parse.User.current().id, true);\n\t\t\t\tlooks.setACL(acl);\n\t\t\t}\n\t\t\tconst data = await looks.save(null, Parse.User.current());\n\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tpost: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.post,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tpost: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.post,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t},\n\tpatchLooks: async ({ id, shop = window.lookbook.shop, name, medias, products = [] }) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tlooks: {\n\t\t\t\t...state.looks,\n\t\t\t\tpatch: {\n\t\t\t\t\t...INITIAL_LOOKS_STATE.patch,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\t\ttry {\n\t\t\tconst Looks = Parse.Object.extend('Looks');\n\t\t\tconst looks = new Looks();\n\t\t\tlooks.id = id;\n\t\t\tlooks.set('name', name);\n\t\t\tlooks.set('medias', medias);\n\t\t\tlooks.set('products', products);\n\t\t\tlooks.set('shop', shop);\n\t\t\tconst data = await looks.save(null, Parse.User.current());\n\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tpatch: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.patch,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tpatch: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.patch,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t},\n\tdestroyLooks: async (id) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tlooks: {\n\t\t\t\t...state.looks,\n\t\t\t\tdestroy: {\n\t\t\t\t\t...INITIAL_LOOKS_STATE.destroy,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst Looks = Parse.Object.extend('Looks');\n\t\t\tconst looks = new Looks();\n\t\t\tlooks.id = id;\n\t\t\tconst data = await looks.destroy(Parse.User.current());\n\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tdestroy: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.destroy,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tlooks: {\n\t\t\t\t\t...state.looks,\n\t\t\t\t\tdestroy: {\n\t\t\t\t\t\t...INITIAL_LOOKS_STATE.destroy,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t}\n}));\n\nexport default useLooksStore;\n\t\n","import { useEffect } from \"react\";\nimport {\n\tBox,\n  Heading,\n  Icon,\n  Text,\n  Divider,\n  HStack,\n  Flex,\n  SimpleGrid,\n  Stack,\n  Button,\n  useColorModeValue,\n  Container,\n  VStack,\n\tuseToast,\n\tSkeleton,\n\tAlert,\n\tAlertIcon,\n} from '@chakra-ui/react';\nimport { DateTime } from \"luxon\";\nimport Carousel from \"../../components/carousel\";\nimport {\n\tIoCaretForwardOutline,\n\tIoHandLeftSharp,\n\tIoEye,\n\tIoCartSharp,\n\tIoLogoUsd\n} from 'react-icons/io5';\nimport { Link } from \"react-router-dom\"\nimport useLooksStore from \"../../store/looks\"\n\nconst renderSkeleton = (looks) => {\n\treturn (\n\t\t<Flex alignItems=\"flex-start\" flexDirection=\"row\">\n\t\t\t<Skeleton> \n\t\t\t\t<Carousel medias={[]} />\n\t\t\t</Skeleton>\n\t\t\t<Flex direction=\"column\" width=\"90%\" marginLeft=\"5\">\n\t\t\t<Skeleton width=\"100%\" height=\"40px\"> \n\t\t\t</Skeleton>\n\t\t\t<br />\n\t\t\t<Skeleton width=\"100%\" height=\"20px\"> \n\t\t\t</Skeleton>\n\t\t\t<br />\n\t\t\t<Skeleton width=\"100%\" height=\"20px\"> \n\t\t\t</Skeleton>\n\t\t\t<br />\n\t\t\t<Skeleton width=\"100%\" height=\"20px\"> \n\t\t\t</Skeleton>\n\t\t\t</Flex>\n\t\t</Flex>\t\n\t)\n}\n\nconst renderLookPoints = ({ look }) => {\n\treturn (\n\t\t<SimpleGrid columns={2} spacing={5} marginTop=\"5\">\n\t\t\t<HStack align={'top'}>\n\t\t\t\t<Box color={'green.400'} px={2}>\n\t\t\t\t\t<Icon as={IoEye} />\n\t\t\t\t</Box>\n\t\t\t\t<VStack align={'start'}>\n\t\t\t\t\t<Text fontWeight={600}>Views</Text>\n\t\t\t\t\t<Text color={'gray.600'} marginTop=\"0\" style={{ marginTop: 0 }}>Total views</Text>\n\t\t\t\t</VStack>\n\t\t\t</HStack>\n\t\t\t<HStack align={'top'}>\n\t\t\t\t<Box color={'green.400'} px={2}>\n\t\t\t\t\t<Icon as={IoHandLeftSharp} />\n\t\t\t\t</Box>\n\t\t\t\t<VStack align={'start'}>\n\t\t\t\t\t<Text fontWeight={600}>Clicks</Text>\n\t\t\t\t\t<Text color={'gray.600'} marginTop=\"0\" style={{ marginTop: 0 }}>Total clicks</Text>\n\t\t\t\t</VStack>\n\t\t\t</HStack>\n\t\t\t<HStack align={'top'}>\n\t\t\t\t<Box color={'green.400'} px={2}>\n\t\t\t\t\t<Icon as={IoCartSharp} />\n\t\t\t\t</Box>\n\t\t\t\t<VStack align={'start'}>\n\t\t\t\t\t<Text fontWeight={600}>Add to cart</Text>\n\t\t\t\t\t<Text color={'gray.600'} marginTop=\"0\" style={{ marginTop: 0 }}>Cart revenue</Text>\n\t\t\t\t</VStack>\n\t\t\t</HStack>\n\t\t\t<HStack align={'top'}>\n\t\t\t\t<Box color={'green.400'} px={2}>\n\t\t\t\t\t<Icon as={IoLogoUsd} />\n\t\t\t\t</Box>\n\t\t\t\t<VStack align={'start'}>\n\t\t\t\t\t<Text fontWeight={600}>Conversion</Text>\n\t\t\t\t\t<Text color={'gray.600'} marginTop=\"0\" style={{ marginTop: 0 }}>Total revenue</Text>\n\t\t\t\t</VStack>\n\t\t\t</HStack>\n\t</SimpleGrid>\n\t)\n}\n\nconst renderCarousel = ({ orangeColorMode, look }) => {\n\treturn (\n\t\t<Box\n\t\t\tdisplay=\"flex\"\n\t\t\tflex=\"1\"\n\t\t\tmarginRight=\"3\"\n\t\t\tposition=\"relative\"\n\t\t\talignItems=\"center\">\n\t\t\t<Box\n\t\t\t\twidth={{ base: '100%' }}\n\t\t\t\tzIndex=\"2\"\n\t\t\t>\n\t\t\t\t<Carousel medias={look?.get('medias')} />\n\t\t\t</Box>\n\t\t\t<Box zIndex=\"1\" width=\"100%\" position=\"absolute\" height=\"100%\">\n\t\t\t\t<Box\n\t\t\t\t\tbgGradient={orangeColorMode}\n\t\t\t\t\tbackgroundSize=\"20px 20px\"\n\t\t\t\t\topacity=\"0.4\"\n\t\t\t\t\theight=\"100%\"\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t</Box>\n\n\t)\n}\n\nexport const LooksCreatedDate = (props) => {\n\tconst date = DateTime.fromISO(props.date.toISOString())\n  return (\n    <HStack display=\"flex\" alignItems=\"center\">\n      <Text fontWeight=\"light\" fontSize=\"sm\">Created at:</Text>\n      <Text fontSize=\"sm\">{date.toLocaleString(DateTime.DATETIME_MED)}</Text>\n    </HStack>\n  );\n};\n\nexport const renderLooks = ({ looks, orangeColorMode, getLooks }) => {\n\tif (looks.get.loading) {\n\t\treturn renderSkeleton(looks);\n\t} else if (looks.get.failure.error) {\n\t\treturn (\n\t\t\t<Box>\n\t\t\t\t<Flex direction=\"column\" align=\"center\">\n\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t<Heading as=\"h1\" size=\"md\">{looks.get.failure.message}</Heading>\n\t\t\t\t\t</VStack>\n\t\t\t\t\t<br />\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<br />\n\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t<Button onClick={() => getLooks()}>Try Again</Button>\t\n\t\t\t\t\t</VStack>\n\t\t\t\t</Flex>\n\t\t\t</Box>\n\t\t);\n\t} else if (looks.get.success.data.length) {\n\t\treturn looks.get.success.data.map(look => (\n\t\t\t<Box key={look.id}>\n\t\t\t\t<Box\n\t\t\t\t\tmarginTop={{ base: '1', sm: '5' }}\n\t\t\t\t\tmarginBottom={{ base: '1', sm: '5' }}\n\t\t\t\t\tdisplay=\"flex\"\n\t\t\t\t\tflexDirection={{ base: 'column', sm: 'row' }}\n\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\tkey={look.objectId}\n\t\t\t\t>\n\t\t\t\t\t{renderCarousel({ orangeColorMode, look })}\n\t\t\t\t\t<Box\n\t\t\t\t\t\tdisplay=\"flex\"\n\t\t\t\t\t\tflex=\"1\"\n\t\t\t\t\t\tflexDirection=\"column\"\n\t\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\t\tmarginTop={{ base: '3', sm: '0' }}>\n\t\t\t\t\t\t{/* <BlogTags tags={['Engineering', 'Product']} /> */}\n\t\t\t\t\t\t<Skeleton isLoaded={!looks.get.loading}>\n\t\t\t\t\t\t<Heading marginTop=\"1\">\n\t\t\t\t\t\t\t<Link textDecoration=\"none\" _hover={{ textDecoration: 'none' }} to={`looks/${look.id}`}>\n\t\t\t\t\t\t\t\t{look.get('name')}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Heading>\n\t\t\t\t\t\t<LooksCreatedDate date={look.get('createdAt')} />\n\t\t\t\t\t\t</Skeleton>\n\t\t\t\t\t\t{renderLookPoints({ look })}\n\t\t\t\t\t\t<Stack direction='row' spacing={4} marginTop=\"5\">\n\t\t\t\t\t\t\t<Link to={`looks/${look.id}`}>\n\t\t\t\t\t\t\t\t<Button colorScheme=\"blue\" isFullWidth leftIcon={<IoCaretForwardOutline />} variant='solid'>\n\t\t\t\t\t\t\t\t\tView / Modify\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t\t<Divider marginTop=\"1em\" marginBottom=\"1em\"/>\n\t\t\t</Box>\n\t\t))\n\t} else if (!looks.get.success.data.length) {\n\t\treturn (\n\t\t\t<Box>\n\t\t\t\t<Flex direction=\"column\" align=\"center\">\n\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t<Heading as=\"h1\" size=\"md\">You have not created any looks yet.</Heading>\n\t\t\t\t\t</VStack>\n\t\t\t\t\t<br />\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<br />\n\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t<Link to=\"/looks/create\">\n\t\t\t\t\t\t\t<Button>Create Look</Button>\t\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</VStack>\n\t\t\t\t</Flex>\n\t\t\t</Box>\n\t\t)\n\t}\n\treturn null;\n}\n  \nfunction Looks(props) {\n    const looks = useLooksStore((state) => state.looks);\n    const getLooks = useLooksStore((state) => state.getLooks);\n    const toast = useToast();\n\t\tconst orangeColorMode = useColorModeValue(\n\t\t\t'radial(orange.600 1px, transparent 1px)',\n\t\t\t'radial(orange.300 1px, transparent 1px)'\n\t\t);\n\t\tuseEffect(() => {\n\t\t\tgetLooks();\n\t\t}, [])\n    \n    return (\n\t\t\t<Container maxW={'7xl'} p=\"12\">\n\t\t\t\t<Alert status='info'>\n\t\t\t\t\t<AlertIcon />\n\t\t\t\t\tTo enable or disable \"Shop the look\" widget on your store, please visit the &nbsp;<Link to=\"/settings\" style={{ textDecoration: 'underline'}}><b>Settings page</b></Link>.\n\t\t\t\t</Alert>\n\t\t\t\t<br />\n\t\t\t\t{renderLooks({ looks, orangeColorMode, getLooks })}\n    </Container>\n  );\n};\n\n  \n  Looks.defaultProps = {\n  }\n\n  export default Looks;","import { useState } from \"react\";\nimport {\n\tBox,\n\tFormControl,\n\tFormLabel,\n\tFormErrorMessage,\n\tButton,\n\tInput,\n\tInputLeftAddon,\n\tInputGroup,\n\tDivider,\n\tText,\n\tImage,\n\tVStack,\n\tHeading\n} from \"@chakra-ui/react\"\n// import FlagImage from \"../../assets/shopify/images/flag.svg\";\n\nexport default function Authorize() {\n\tconst [storeDomain, setStoreDomain] = useState(''); \n  const [isShopifySiteURLInvalid, setIsShopifySiteURLInvalid] = useState(false);\n\n    const onAuthorize = () => {\n      if (!storeDomain) {\n\t\t\tsetIsShopifySiteURLInvalid(true);\n\t\t\treturn false;\n\t\t}\n      window.location.href=`${process.env.REACT_APP_SERVER_URL}/shopify?shop=${storeDomain}`\n    }\n\treturn (\n\t\t<Box marginTop=\"24\">\n\t\t\t<VStack>\n\t\t\t\t<Box boxSize=\"lg\">\n\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t{/* <Image boxSize=\"200px\" src={FlagImage}/> */}\n\t\t\t\t\t\t<Heading as=\"h1\" size=\"md\">Shopify Store Authentication</Heading>\n\t\t\t\t\t\t<Text>The access data to your Shopify site has expired.</Text>\n\t\t\t\t\t</VStack>\n\t\t\t\t\t<br />\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<br />\n\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t<FormControl id=\"shopify-site\" isRequired isInvalid={isShopifySiteURLInvalid}>\n\t\t\t\t\t\t\t<FormLabel>Shopify site sub domain</FormLabel>\n\t\t\t\t\t\t\t<InputGroup>\n\t\t\t\t\t\t\t\t<InputLeftAddon children=\"https://\" />\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tonChange={(e) => setStoreDomain(e.target.value)}\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={storeDomain}\n\t\t\t\t\t\t\t\t\tplaceholder=\"yourstore.myshopify.com\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</InputGroup>\n\t\t\t\t\t\t\t<FormErrorMessage>This is required</FormErrorMessage>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t<Button onClick={onAuthorize} isFullWidth>Authorize</Button>\n\t\t\t\t\t</VStack>\n\t\t\t\t</Box>\n\t\t\t</VStack>\n\t\t</Box>\n\t);\n  }","import { useState, useEffect} from \"react\";\nimport {\n\tFlex,\n  Skeleton,\n  Box,\n  Container\n} from \"@chakra-ui/react\"\nimport {\n  Navigate\n} from \"react-router-dom\";\nimport NavBar from \"./components/navbar\";\nimport LooksRoute from \"./routes/looks\";\nimport { parseQuery } from \"./utils/url\";\nimport Authorize from \"./routes/shopify/Authorize\";\nimport Parse from \"parse\";\nfunction App() {\n  const [shopifySessionAvailable, setShopifySessionAvailable] = useState(false);\n  const [shopifyHmacAvailable, setShopifyHmacAvailable] = useState(false);\n  const [shopifyCodeAvailable, setShopifyCodeAvailable] = useState(false);\n  const [shopifyHostAvailable, setShopifyHostAvailable] = useState(false);\n\n  const [isEmbed, setIsEmbed] = useState(false);\n  useEffect(() => {\n    const { code, session, hmac, embed, host = '', userToken } = parseQuery(window.location.search);\n    window.lookbook = (parseQuery(window.location.search));\n    if (session) {\n      setShopifySessionAvailable(true);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(false);\n      setShopifyHostAvailable(false)\n    } else if (code) {\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(true);\n      setShopifyHostAvailable(false)\n      window.location.replace(`${process.env.REACT_APP_SERVER_URL}/shopify/callback${document.location.search}`)\n    } else if (hmac){\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(true);\n      setShopifyCodeAvailable(false)\n      setShopifyHostAvailable(false)\n      window.location.replace(`${process.env.REACT_APP_SERVER_URL}/shopify${document.location.search}`)\n    } else if (host && !code && !hmac) {\n      setShopifyHostAvailable(true);\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(false)\n    } else if (embed) {\n      setIsEmbed(true);\n      setShopifySessionAvailable(false);\n      setShopifyHmacAvailable(false);\n      setShopifyCodeAvailable(false)\n      setShopifyHostAvailable(false)\n    }\n\n    if (userToken) {\n      if (Parse.User.current()) {\n        if (Parse.User.current().get('sessionToken') !== userToken) {\n          Parse.User.logOut().then(() => Parse.User.become(userToken)).catch(() => Parse.User.become(userToken))\n        }\n      } else {\n        Parse.User.become(userToken);\n      }   \n    } else if (!userToken && !Parse.User.current()) {\n    }\n  }, []);\n  \n\n  if (shopifySessionAvailable) {\n    return (\n      <>\n        <NavBar />\n        <LooksRoute />\n      </>\n    );\n  } else if (isEmbed) {\n    return <Navigate to=\"/embed\" replace />\n  } else if ((shopifyHmacAvailable || shopifyCodeAvailable) || shopifyHostAvailable) {\n    return (\t\n      <Container maxW={'7xl'} p=\"12\">\n        <Flex alignItems=\"flex-start\" flexDirection=\"row\">\n          <Skeleton> \n            <Box></Box>\n          </Skeleton>\n          <Flex direction=\"column\" width=\"90%\" marginLeft=\"5\">\n            <Skeleton width=\"100%\" height=\"40px\"> \n          </Skeleton>\n          <br />\n          <Skeleton width=\"100%\" height=\"20px\"> \n          </Skeleton>\n          <br />\n          <Skeleton width=\"100%\" height=\"20px\"> \n          </Skeleton>\n          <br />\n          <Skeleton width=\"100%\" height=\"20px\"> \n          </Skeleton>\n          </Flex>\n        </Flex>\n      </Container>\n    )\n  } else {\n    return <Authorize />\n  }\n}\n\nexport default App;\n","const getBase64 = async (file) => {\n  var reader = new FileReader();\n  reader.readAsDataURL(file);\n\n  return new Promise((reslove, reject) => {\n    reader.onload = () => reslove(reader.result);\n    reader.onerror = (error) => reject(error);\n  })\n}\nexport { getBase64 };","import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\nimport Parse from \"parse\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\nimport { getBase64 } from \"../../utils/media\";\n\nconst INITIAL_FILES_STATE = {\n\tget: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tpost: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tdestroy: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t}\n};\n\nconst useFilesStore = create((set, get) => ({\n\tfiles: INITIAL_FILES_STATE,\n\tgetFiles: async() => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tfiles: {\n\t\t\t\t...state.files,\n\t\t\t\tget: {\n\t\t\t\t\t...INITIAL_FILES_STATE.get,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst { data } = await axios.get(``, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${window.localStorage.getItem('thinkificAccessToken')}`,\n\t\t\t\t\taccept: 'application/json',\n\t\t\t\t}\n\t\t\t});\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tfiles: {\n\t\t\t\t\t...state.files,\n\t\t\t\t\tget: {\n\t\t\t\t\t\t...INITIAL_FILES_STATE.get,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata: [],\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tfiles: {\n\t\t\t\t\t...state.files,\n\t\t\t\t\tget: {\n\t\t\t\t\t\t...INITIAL_FILES_STATE.get,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t}\n\t},\n\tpostFiles: async (uploads) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tfiles: {\n\t\t\t\t...state.files,\n\t\t\t\tpost: {\n\t\t\t\t\t...INITIAL_FILES_STATE.post,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst base64s = await Promise.all(uploads.map(async upload => {\n\t\t\t\treturn {\n\t\t\t\t\tdata: await getBase64(upload),\n\t\t\t\t\ttype: upload.type,\n\t\t\t\t}\n\t\t\t}));\n\t\t\tconst savedFiles = await Promise.all(base64s.map(async (base64) => {\n\t\t\t\tconst parseFile = new Parse.File(\"looks\", { base64: base64.data }, base64.type );\n\t\t\t\tconst savedFile = await parseFile.save();\n\t\t\t\treturn savedFile;\n\t\t\t}));\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tfiles: {\n\t\t\t\t\t...state.files,\n\t\t\t\t\tpost: {\n\t\t\t\t\t\t...INITIAL_FILES_STATE.post,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata: savedFiles\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn savedFiles;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tfiles: {\n\t\t\t\t\t...state.files,\n\t\t\t\t\tpost: {\n\t\t\t\t\t\t...INITIAL_FILES_STATE.post,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t},\n\tdestroyFiles: async (id) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tfiles: {\n\t\t\t\t...state.files,\n\t\t\t\tdestroy: {\n\t\t\t\t\t...INITIAL_FILES_STATE.destroy,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst { data } = await axios.delete(``,{\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${window.localStorage.getItem('thinkificAccessToken')}`,\n\t\t\t\t\taccept: '*/*',\n\t\t\t\t\t'Access-Control-Allow-Origin': '*',\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tfiles: {\n\t\t\t\t\t...state.files,\n\t\t\t\t\tdestroy: {\n\t\t\t\t\t\t...INITIAL_FILES_STATE.destroy,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tfiles: {\n\t\t\t\t\t...state.files,\n\t\t\t\t\tdestroy: {\n\t\t\t\t\t\t...INITIAL_FILES_STATE.destroy,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t}\n}));\n\nexport default useFilesStore;\n\t\n","import { useCallback, useState, useEffect } from \"react\";\nimport {\n\tModal,\n\tModalOverlay,\n\tModalContent,\n\tModalHeader,\n\tModalFooter,\n\tModalBody,\n\tModalCloseButton,\n\tSimpleGrid,\n\tButton,\n\tCenter,\n\tuseColorModeValue,\n\tText,\n\tImage,\n\tVStack,\n\tuseToast,\n} from '@chakra-ui/react'\nimport { useDropzone } from 'react-dropzone';\nimport useFilesStore from \"../../store/files\"; \nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\n\nfunction Upload(props = {}) {\n\tconst { isOpen = false, onClose, on } = props;\n\tconst files = useFilesStore((state) => state.files);\n  const postFiles = useFilesStore((state) => state.postFiles);\n\tconst toast = useToast()\n\tconst [uploads, setUploads] = useState([]);\n\t\n\tconst onDrop = useCallback(async (acceptedUploads) => {\n\t\tsetUploads(acceptedUploads.map(file => Object.assign(file, {\n\t\t\tpreview: URL.createObjectURL(file)\n\t\t})));\n\t});\n\tconst { getRootProps, getInputProps, isDragActive } = useDropzone({\n\t\tonDrop, accept: 'image/*', maxFiles: 3, multiple: true,\n\t});\n\tuseEffect(() => {\n\t\tsetUploads([])\n\t}, [])\n\tuseEffect(() => () => {\n\t\tuploads.forEach(file => URL.revokeObjectURL(file.preview));\n\t}, [uploads])\n\t\n\tconst saveUploads = async () => {\n\t\ttry {\n\t\t\tconst data = await postFiles(uploads);\n\t\t\tsetUploads([]);\n\t\t\tonClose(data || []);\n\t\t} catch (e) {\n\t\t\ttoast({\n\t\t\t\ttitle: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\tstatus: 'error'\n\t\t\t})\n\t\t}\n\t}\n\n\tconst dropText = isDragActive ? 'Drop upto 3 png, jpeg or gifs here ...' : 'Drag \\'n\\' drop upto 3 png, jpeg or gifs files here, or click to select uploads';\n\tconst activeBg = useColorModeValue('gray.100', 'gray.600');\n\tconst borderColor = useColorModeValue(\n\t\tisDragActive ? 'teal.300' : 'gray.300',\n\t\tisDragActive ? 'teal.500' : 'gray.500',\n\t);\n\n\treturn (\n\t\t<Modal isOpen={isOpen} onClose={onClose} closeOnOverlayClick={false} onEsc={() => setUploads([])}>\n\t\t\t<ModalOverlay />\n\t\t\t<ModalContent>\n\t\t\t\t<ModalHeader>Add images for this look.</ModalHeader>\n\t\t\t\t<ModalBody>\n\t\t\t\t\t<Center\n\t\t\t\t\t\tp={10}\n\t\t\t\t\t\tcursor=\"pointer\"\n\t\t\t\t\t\tbg={isDragActive ? activeBg : 'transparent'}\n\t\t\t\t\t\t_hover={{ bg: activeBg }}\n\t\t\t\t\t\ttransition=\"background-color 0.2s ease\"\n\t\t\t\t\t\tborderRadius={4}\n\t\t\t\t\t\tborder=\"3px dashed\"\n\t\t\t\t\t\tborderColor={borderColor}\n\t\t\t\t\t\t{...getRootProps()}\n\t\t\t\t\t>\n\t\t\t\t\t<VStack>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input {...getInputProps()} />\n\t\t\t\t\t\t<Text textAlign=\"center\">{dropText}</Text>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</VStack>\n\t\t\t\t</Center>\n\t\t\t\t<Center>\n\t\t\t\t\t<SimpleGrid spacing={5} columns={3} marginTop=\"5\">\n\t\t\t\t\t\t{uploads.map(file => (\n\t\t\t\t\t\t\t\t<Image key={file.name} src={file.preview} width={100} height={100} objectFit=\"cover\" borderRadius=\"5\" borderColor=\"gray\" borderWidth=\"2\" />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</SimpleGrid>\n\t\t\t\t</Center>\n\t\t\t\t</ModalBody>\n\n\t\t\t\t<ModalFooter>\n\t\t\t\t\t<Button variant='ghost' onClick={() => { setUploads([]); onClose([])}} colorScheme='red'>Close</Button>\n\t\t\t\t\t<Button colorScheme='teal' mr={3} onClick={saveUploads} loadingText=\"Uploading...\" isLoading={files.post.loading}>\n\t\t\t\t\t\tUpload\n\t\t\t\t\t</Button>\n\t\t\t\t</ModalFooter>\n\t\t\t</ModalContent>\n\t\t</Modal>\n\t)\n}\n\nexport default Upload;","import { useEffect, useState } from \"react\";\nimport {\n\t\tBox,\n\t\tFlex,\n\t\tStack,\n\t\tHeading,\n\t\tText,\n\t\tContainer,\n\t\tInput,\n\t\tButton,\n\t\tSimpleGrid,\n\t\tuseBreakpointValue,\n\t\tFormControl,\n\t\tFormLabel,\n\t\tIcon,\n\t\tStackDivider,\n\t\tuseColorModeValue,\n\t\tImage,\n\t\tuseDisclosure,\n\t\tchakra,\n\t\ttoast,\n\t\tuseToast,\n\t\tAvatar,\n\t\tAvatarGroup,\n\t\tSkeletonText,\n\t\tSkeletonCircle,\n\t\tSkeleton,\n\t\tVStack,\n\t\tDivider,\n\t\tAvatarBadge,\n\t\tButtonGroup\n} from '@chakra-ui/react';\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport {\n\t\tIoClose,\n\t\tIoAddOutline,\n\t\tIoCloseCircleOutline,\n\t} from 'react-icons/io5';\nimport {ResourcePicker} from '@shopify/app-bridge-react';\n\nimport useFilesStore from \"../../store/files\"; \n\nimport Upload from \"../../components/upload\";\nimport useLooksStore from \"../../store/looks\"\nimport { INTERNAL_SERVER_ERROR } from '../../constants/strings';\n\nconst renderSkeleton = () => {\n\treturn (\n\t\t<Flex direction=\"column\" width=\"100%\">\n\t\t\t<Skeleton width=\"100%\" height=\"40px\"> </Skeleton>\n\t\t\t<SkeletonText mt='4' noOfLines={1} spacing='4' />\n\t\t\t<br />\n\t\t\t<br />\n\t\t\t<Box >\n\t\t\t\t<SkeletonCircle size='20' />\n\t\t\t\t<SkeletonText mt='4' noOfLines={4} spacing='4' />\n\t\t\t</Box>\n\t\t</Flex>\n\t)\n}\n\n\t\nfunction CreateLooks(props) {\n\tconst { isOpen, onOpen, onClose } = useDisclosure()\n\tconst { isOpen: isResourcePickerOpen, onOpen: onResourcePickerOpen, onClose: onResourcePickerClose } = useDisclosure()\n\tconst looks = useLooksStore((state) => state.looks);\n\tconst files = useFilesStore((state) => state.files);\n\tconst getLooks = useLooksStore((state) => state.getLooks);\n\tconst postLooks = useLooksStore((state) => state.postLooks);\n\tconst destroyLooks = useLooksStore((state) => state.destroyLooks);\n\tconst patchLooks = useLooksStore((state) => state.patchLooks);\n\tconst { id = '' } = useParams();\n\tconst toast = useToast();\n\tconst navigate = useNavigate()\n\tconst colorMode = useColorModeValue('gray.100', 'gray.700');\n\tconst [looksName, setLooksName] = useState(\n\t\tprops.looks.name\n\t);\n\tconst [uploads, setUploads] = useState(\n\t\tprops.looks.files || []\n\t);\n\tconst [products, setProducts] = useState(\n\t\tprops.looks.products || []\n\t);\n\tconst onUploadWidgetClose = (data = []) => {\n\t\tsetUploads([\n\t\t\t...uploads,\n\t\t\t...data\n\t\t])\n\t\tonClose();\n\t}\n\n\tconst onResourcePickerDone = (data = {}) => {\n\t\tsetProducts([\n\t\t\t...products.filter(Boolean),\n\t\t\t...data?.selection?.map(d => {\n\t\t\t\treturn {\n\t\t\t\t\ttitle: d.title,\n\t\t\t\t\timage: d.images[0] && d.images[0].originalSrc || '',\n\t\t\t\t\tid: d.id,\n\t\t\t\t}\n\t\t\t}).filter(Boolean),\n\t\t])\n\t\tonResourcePickerClose()\n\t}\n\n\tconst getLooskById = async () => {\n\t\tif (id) {\n\t\t\tconst data = await getLooks({ id });\n\t\t\tif (data) {\n\t\t\t\tsetLooksName(data?.get('name'))\n\t\t\t\tsetUploads([\n\t\t\t\t\t...uploads,\n\t\t\t\t\t...data?.get('medias'), \n\t\t\t\t])\n\t\t\t\t\n\t\t\t\tsetProducts([\n\t\t\t\t\t...products,\n\t\t\t\t\t...data?.get('products').map(p => ({\n\t\t\t\t\t\tid: p.admin_graphql_api_id,\n\t\t\t\t\t\ttitle: p.title,\n\t\t\t\t\t\timage: p.image.src\n\t\t\t\t\t}))\n\t\t\t\t])\n\t\t\t}\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tgetLooskById()\n\t}, [])\n\n\tconst removeUpload = (upload, index) => {\n\t\tuploads.splice(index, 1)\n\t\tsetUploads([...uploads.filter(Boolean)])\n\t}\n\n\tconst removeProduct = (index) => {\n\t\tproducts.splice(index, 1);\n\t\tsetProducts([...products.filter(Boolean)])\n\t}\n\n\tconst onDestroyLook = async (lookId) => {\n\t\ttry {\n\t\t\tawait destroyLooks(lookId);\n\t\t\ttoast({\n\t\t\t\ttitle: `Look deleted!`,\n\t\t\t\tstatus: 'success'\n\t\t\t});\n\t\t\twindow.history.back();\n\t\t} catch (e) {\n\t\t\ttoast({\n\t\t\t\ttitle: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\tstatus: 'error'\n\t\t\t})\n\t\t}\n\t}\n\tconst renderProducts = () => {\n\t\treturn products.map((product, index) => (\n\t\t\t<Stack id={product.id} key={index} justifyContent=\"space-between\"  direction={'row'} background=\"white\" padding=\"3\" borderRadius=\"lg\" marginBottom=\"4\" align={'center'}>\n\t\t\t\t<Flex flexDirection=\"row\" alignItems=\"center\">\n\t\t\t\t\t<Flex\n\t\t\t\t\t\tw={16}\n\t\t\t\t\t\th={16}\n\t\t\t\t\t\talign={'center'}\n\t\t\t\t\t\tjustify={'center'}\n\t\t\t\t\t\trounded={'full'}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Image objectFit=\"contain\" width=\"100%\" height=\"100%\" src={product.image} color={'yellow.500'} />\n\t\t\t\t\t</Flex>\n\t\t\t\t\t<Flex direction=\"column\">\n\t\t\t\t\t\t<Text marginLeft=\"3\" fontWeight={600}>{product.title}</Text>\n\t\t\t\t\t</Flex>\n\t\t\t\t</Flex>\n\t\t\t\t<Icon as={IoClose} color={'red.500'} w={5} h={5} onClick={() => removeProduct(index)} />\n\t\t\t</Stack>\n\t\t));\n\t}\n\tconst renderLooks = () => {\n\t\tif (looks.get.loading) {\n\t\t\treturn renderSkeleton();\n\t\t} else if (looks.get.failure.error) {\n\t\t\treturn (\n\t\t\t\t<Box>\n\t\t\t\t\t<Flex direction=\"column\" align=\"center\">\n\t\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t\t<Heading as=\"h1\" size=\"md\">{looks.get.failure.message}</Heading>\n\t\t\t\t\t\t</VStack>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t\t<Button onClick={() => getLooskById()}>Try Again</Button>\t\n\t\t\t\t\t\t</VStack>\n\t\t\t\t\t</Flex>\n\t\t\t\t</Box>\n\t\t\t)\n\t\t} else {\n\t\t\tconst { data } = looks?.get?.success;\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<Stack spacing={4}>\n\t\t\t\t\t\t<Heading\n\t\t\t\t\t\t\tcolor={'gray.800'}\n\t\t\t\t\t\t\tlineHeight={1.1}\n\t\t\t\t\t\t\tfontSize={{ base: '2xl', sm: '3xl', md: '4xl' }}>\n\t\t\t\t\t\t\t{data && data.get ? data.get('name') : 'Create a look'}\n\t\t\t\t\t\t</Heading>\n\t\t\t\t\t\t<Text color={'gray.500'} fontSize={{ base: 'sm', sm: 'md' }}>\n\t\t\t\t\t\t\tAdd a name for the look you create and link the products from your store that can form this look.\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Stack>\n\t\t\t\t\t<Box mt={10}>\n\t\t\t\t\t\t<chakra.form\n\t\t\t\t\t\t\tonSubmit={async (e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tif (id) {\n\t\t\t\t\t\t\t\t\tawait patchLooks({\n\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\tname: looksName,\n\t\t\t\t\t\t\t\t\t\t\tmedias: uploads,\n\t\t\t\t\t\t\t\t\t\t\tproducts: products.map(product => product.id),\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tawait postLooks({\n\t\t\t\t\t\t\t\t\t\t\tname: looksName,\n\t\t\t\t\t\t\t\t\t\t\tmedias: uploads,\n\t\t\t\t\t\t\t\t\t\t\tproducts: products.map(product => product.id),\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\twindow.history.back()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttoast({\n\t\t\t\t\t\t\t\t\t\ttitle: `Looks ${id ? 'updated' : 'created'} successfully!`,\n\t\t\t\t\t\t\t\t\t\tstatus: 'success'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\ttoast({\n\t\t\t\t\t\t\t\t\t\ttitle: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\t\t\t\t\t\t\tstatus: 'error'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<Stack spacing={4}>\n\t\t\t\t\t\t\t<FormControl id='look-name'>\n\t\t\t\t\t\t\t\t<FormLabel>Look name</FormLabel>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tplaceholder=\"Winter Fashion Look\"\n\t\t\t\t\t\t\t\t\tname=\"look_name\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={looksName}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLooksName(e.target.value)}\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t<FormLabel>Add medias to this look</FormLabel>\n\t\t\t\t\t\t\t\t<AvatarGroup>\n\t\t\t\t\t\t\t\t\t{uploads.map((upload, index) => (\n\t\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\t\tkey={upload.name() + index}\n\t\t\t\t\t\t\t\t\t\t\tname={upload.name()}\n\t\t\t\t\t\t\t\t\t\t\tsrc={upload.url()}\n\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\t// size={useBreakpointValue({ base: 'md', md: 'lg' })}\n\t\t\t\t\t\t\t\t\t\t\tposition={'relative'}\n\t\t\t\t\t\t\t\t\t\t\tzIndex={2}\n\t\t\t\t\t\t\t\t\t\t\t_before={{\n\t\t\t\t\t\t\t\t\t\t\t\tcontent: '\"\"',\n\t\t\t\t\t\t\t\t\t\t\t\twidth: 'full',\n\t\t\t\t\t\t\t\t\t\t\t\theight: 'full',\n\t\t\t\t\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\t\t\t\t\ttransform: 'scale(1.125)',\n\t\t\t\t\t\t\t\t\t\t\t\tbgGradient: 'linear(to-bl, red.400,pink.400)',\n\t\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\t\t\tzIndex: -1,\n\t\t\t\t\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<AvatarBadge  boxSize='1.25em' bg='red.500' onClick={() => removeUpload(upload, index)}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon as={IoCloseCircleOutline} color={'white.500'} w={5} h={5} />\n\t\t\t\t\t\t\t\t\t\t\t</AvatarBadge>\n\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\tonClick={onOpen}\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\tbg={'pink.400'}\n\t\t\t\t\t\t\t\t\t\t_hover={{ bg: 'pink.300' }}\n\t\t\t\t\t\t\t\t\t\tcursor=\"pointer\"\n\t\t\t\t\t\t\t\t\t\ticon={<IoAddOutline size=\"2em\" color=\"white\" />}\n\t\t\t\t\t\t\t\t\t\t_before={{\n\t\t\t\t\t\t\t\t\t\t\tcontent: '\"\"',\n\t\t\t\t\t\t\t\t\t\t\twidth: 'full',\n\t\t\t\t\t\t\t\t\t\t\theight: 'full',\n\t\t\t\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\t\t\t\ttransform: 'scale(1.2)',\n\t\t\t\t\t\t\t\t\t\t\tbgGradient: 'linear(to-bl, red.400,pink.400)',\n\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\t\tzIndex: -1,\n\t\t\t\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t</AvatarGroup>\n\t\t\t\t\t\t\t\t<Upload isOpen={isOpen} onClose={onUploadWidgetClose} />\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<FormControl id='look-products'>\n\t\t\t\t\t\t\t\t\t<FormLabel>Add products for this look</FormLabel>\n\t\t\t\t\t\t\t\t\t<Stack\n\t\t\t\t\t\t\t\t\t\tspacing={4}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{renderProducts()}\n\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t\t<Button fontFamily={'heading'} bg={'gray.200'} color={'gray.800'} onClick={onResourcePickerOpen}>\n\t\t\t\t\t\t\t\t\t\t\tLink products +\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<ResourcePicker\n\t\t\t\t\t\t\t\t\t\tonSelection={onResourcePickerDone}\n\t\t\t\t\t\t\t\t\t\tonCancel={onResourcePickerClose}\n\t\t\t\t\t\t\t\t\t\tselectMultiple\n\t\t\t\t\t\t\t\t\t\tshowVariants={false}\n\t\t\t\t\t\t\t\t\t\tresourceType=\"Product\"\n\t\t\t\t\t\t\t\t\t\topen={isResourcePickerOpen}\n\t\t\t\t\t\t\t\t\t\tinitialSelectionIds={products.map(product => ({ id: product.id })).filter(Boolean)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t<ButtonGroup mt={8} width=\"full\">\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdata && data.id ? (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tisLoading={looks.destroy.loading}\n\t\t\t\t\t\t\t\t\t\tonClick={() => onDestroyLook(data.id)}\n\t\t\t\t\t\t\t\t\t\tisFullWidth\n\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\tcolorScheme=\"red\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tDelete Look\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisLoading={looks.post.loading || looks.patch.loading}\n\t\t\t\t\t\t\t\tdisabled={looks.post.loading || looks.patch.loading}\n\t\t\t\t\t\t\t\tloadingText={`${id ? 'Updating' : 'Saving'} look`}\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tfontFamily={'heading'}\n\t\t\t\t\t\t\t\tisFullWidth\n\t\t\t\t\t\t\t\tw={'full'}\n\t\t\t\t\t\t\t\tbgGradient=\"linear(to-r, red.400,pink.400)\"\n\t\t\t\t\t\t\t\tcolor={'white'}\n\t\t\t\t\t\t\t\t_hover={{\n\t\t\t\t\t\t\t\t\tbgGradient: 'linear(to-r, red.400,pink.400)',\n\t\t\t\t\t\t\t\t\tboxShadow: 'xl',\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t{`${id ? 'Update' : 'Save'} look`}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</chakra.form>\n\t\t\t\t\t</Box>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t\t\n\t}\n\n\treturn (\n\t\t<Box position={'relative'}>\n\t\t\t<Container\n\t\t\t\tas={SimpleGrid}\n\t\t\t\tmaxW={'7xl'}\n\t\t\t\tcolumns={{ base: 1, md: 1 }}\n\t\t\t\tspacing={{ base: 10, lg: 32 }}\n\t\t\t\tpy={{ base: 10, sm: 15, lg: 20 }}\n\t\t\t>\n\t\t\t\t\n\t\t\t\t<Stack\n\t\t\t\t\tbg={'gray.50'}\n\t\t\t\t\trounded={'xl'}\n\t\t\t\t\tp={{ base: 4, sm: 6, md: 8 }}\n\t\t\t\t\tspacing={{ base: 8 }}\n\t\t\t\t\tmaxW=\"3xl\"\n\t\t\t\t\tzIndex=\"9\"\n\t\t\t\t\tmargin=\"0 auto\"\n\t\t\t\t\twidth=\"100%\"\n\t\t\t\t>\n\t\t\t\t\t{renderLooks()}\n\t\t\t\t</Stack>\n\t\t\t</Container>\n\t\t\t<Blur\n\t\t\t\tposition={'absolute'}\n\t\t\t\ttop={-10}\n\t\t\t\tleft={-10}\n\t\t\t\tstyle={{ filter: 'blur(70px)' }}\n\t\t\t/>\n\t\t</Box>\n\t);\n}\n\t\n\texport const Blur = (props) => {\n\t\treturn (\n\t\t\t<Icon\n\t\t\t\twidth={useBreakpointValue({ base: '100%', md: '40vw', lg: '30vw' })}\n\t\t\t\tzIndex={useBreakpointValue({ base: -1, md: -1, lg: 0 })}\n\t\t\t\theight=\"560px\"\n\t\t\t\tviewBox=\"0 0 528 560\"\n\t\t\t\tfill=\"none\"\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t{...props}>\n\t\t\t\t<circle cx=\"71\" cy=\"61\" r=\"111\" fill=\"#F56565\" />\n\t\t\t\t<circle cx=\"244\" cy=\"106\" r=\"139\" fill=\"#ED64A6\" />\n\t\t\t\t<circle cy=\"291\" r=\"139\" fill=\"#ED64A6\" />\n\t\t\t\t<circle cx=\"80.5\" cy=\"189.5\" r=\"101.5\" fill=\"#ED8936\" />\n\t\t\t\t<circle cx=\"196.5\" cy=\"317.5\" r=\"101.5\" fill=\"#ECC94B\" />\n\t\t\t\t<circle cx=\"70.5\" cy=\"458.5\" r=\"101.5\" fill=\"#48BB78\" />\n\t\t\t\t<circle cx=\"426.5\" cy=\"-0.5\" r=\"101.5\" fill=\"#4299E1\" />\n\t\t\t</Icon>\n\t\t);\n\t};\n\n\n\tCreateLooks.defaultProps = {\n\t\tlooks: {\n\t\t\tname: ''\n\t\t}\n\t}\n\n\texport default CreateLooks;","import create from \"zustand\";\nimport axios from \"axios\";\nimport produce from \"immer\";\nimport Parse from \"parse\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\n\nconst INITIAL_SCRIPTS_STATE = {\n\tget: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: [],\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tpost: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tpatch: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n\tdestroy: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: null,\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t}\n};\n\nconst useScriptsStore = create((set, get) => ({\n\tscripts: INITIAL_SCRIPTS_STATE,\n\tpostScripts: async (shop = window.lookbook.shop) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tscripts: {\n\t\t\t\t...state.scripts,\n\t\t\t\tpost: {\n\t\t\t\t\t...INITIAL_SCRIPTS_STATE.post,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst data = await Parse.Cloud.run('post_scripts', { shop });\n\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tscripts: {\n\t\t\t\t\t...state.scripts,\n\t\t\t\t\tpost: {\n\t\t\t\t\t\t...INITIAL_SCRIPTS_STATE.post,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tscripts: {\n\t\t\t\t\t...state.scripts,\n\t\t\t\t\tpost: {\n\t\t\t\t\t\t...INITIAL_SCRIPTS_STATE.post,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t},\n\tdestroyScripts: async (shop = window.lookbook.shop) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tscripts: {\n\t\t\t\t...state.scripts,\n\t\t\t\tdestroy: {\n\t\t\t\t\t...INITIAL_SCRIPTS_STATE.destroy,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst data = await Parse.Cloud.run('destroy_scripts', { shop })\n\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tscripts: {\n\t\t\t\t\t...state.scripts,\n\t\t\t\t\tdestroy: {\n\t\t\t\t\t\t...INITIAL_SCRIPTS_STATE.destroy,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tscripts: {\n\t\t\t\t\t...state.scripts,\n\t\t\t\t\tdestroy: {\n\t\t\t\t\t\t...INITIAL_SCRIPTS_STATE.destroy,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t\tthrow e;\n\t\t}\n\t}\n}));\n\nexport default useScriptsStore;\n\t\n","import React from \"react\";\nexport const ShopContext = React.createContext();\n","import { useEffect, useContext } from \"react\";\nimport {\n\tBox,\n  Heading,\n  ButtonGroup,\n  Text,\n  Button,\n  Container,\n\tuseToast,\n\tCode,\n\tDivider\n} from '@chakra-ui/react';\nimport useScriptsStore from \"../../store/scripts\";\nimport { ShopContext } from \"../../context\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\nimport NavBar from \"../../components/navbar\";\n\n\nconst SettingsRoute = () => {\n\tconst shop = useContext(ShopContext);\n\tconst scripts = useScriptsStore((state) => state.scripts);\n  const postScripts = useScriptsStore((state) => state.postScripts);\n\tconst destroyScripts = useScriptsStore((state) => state.destroyScripts);\n\tconst toast = useToast();\n\n\tconst enableWidget = async () => {\n\t\ttry {\n\t\t\tawait postScripts(shop);\n\t\t\ttoast({\n\t\t\t\ttitle: `Widget added successfully! Please visit your online store after 30 seconds to check the widget.`,\n\t\t\t\tstatus: 'success'\n\t\t\t});\n\t\t} catch (e) {\n\t\t\ttoast({\n\t\t\t\ttitle: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\tstatus: 'error'\n\t\t\t})\n\t\t}\n\t}\n\n\tconst disableWidget = async () => {\n\t\ttry {\n\t\t\tawait destroyScripts(shop);\n\t\t\ttoast({\n\t\t\t\ttitle: `Widget removed successfully!`,\n\t\t\t\tstatus: 'success'\n\t\t\t});\n\t\t} catch (e) {\n\t\t\ttoast({\n\t\t\t\ttitle: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\tstatus: 'error'\n\t\t\t})\n\t\t}\n\t}\n\n\t\n\treturn  (\n\t\t<>\n\t\t<NavBar />\n\t\t<Container maxW={'7xl'} p=\"12\">\n\t\t\t<Box as=\"section\">\n\t\t\t\t<Box\n\t\t\t\t\tmaxW=\"2xl\"\n\t\t\t\t\tmx=\"auto\"\n\t\t\t\t\tpx={{ base: '6', lg: '8' }}\n\t\t\t\t\tpy={{ base: '16', sm: '20' }}\n\t\t\t\t\ttextAlign=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<Heading size=\"3xl\" fontWeight=\"extrabold\" letterSpacing=\"tight\">\n\t\t\t\t\t\tWidget embed settings\n\t\t\t\t\t</Heading>\n\t\t\t\t\t<Text mt=\"4\" fontSize=\"lg\">\n\t\t\t\t\t\tEnable or disable \"Shop the look\" widget on your store. The widget gets appended to the bottom of your store page above the\n\t\t\t\t\t\tfooter on the home page.\n\t\t\t\t\t</Text>\n\t\t\t\t\t<ButtonGroup mt=\"8\" variant='outline' spacing='6'>\n\t\t\t\t\t\t<Button isLoading={scripts.post.loading} fontWeight=\"bold\" size=\"lg\" colorScheme='blue' onClick={enableWidget}>Enable Widget Embed</Button>\n\t\t\t\t\t\t<Button isLoading={scripts.destroy.loading} fontWeight=\"bold\" size=\"lg\" colorScheme=\"red\" onClick={disableWidget}>Disable Widget Embed</Button>\n\t\t\t\t\t</ButtonGroup>\n\n\t\t\t\t\t{/* <br />\n\t\t\t\t\t<br />\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<Text mt=\"4\" fontSize=\"lg\">\n\t\t\t\t\t\tNOTE: If you want the widget only on certain pages or only in certain positions please add the following html tag to custom liquid or custom html section.\n\t\t\t\t\t</Text>\n\n\t\t\t\t\t<br />\n\t\t\t\t\t<Code children={`<div id=\"frangout-shop-look-app\"> </div>`}></Code>\n\t\t\t\t */}\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Container>\n\t\t</>\n\t)\n\n}\n\nexport default SettingsRoute;","import create from \"zustand\";\nimport produce from \"immer\";\nimport Parse from \"parse\";\nimport { INTERNAL_SERVER_ERROR } from \"../../constants/strings\";\n\nconst INITIAL_PRODUCTS_STATE = {\n\tget: {\n\t\tloading: false,\n\t\tsuccess: {\n\t\t\tok: false,\n\t\t\tdata: [],\n\t\t},\n\t\tfailure: {\n\t\t\terror: false,\n\t\t\tmessage: \"\",\n\t\t}\n\t},\n};\n\nconst useProductsStore = create((set, get) => ({\n\tproducts: INITIAL_PRODUCTS_STATE,\n\tgetProducts: async({ products = [], shop } = {}) => {\n\t\tset(produce(state => ({\n\t\t\t...state,\n\t\t\tproducts: {\n\t\t\t\t...state.products,\n\t\t\t\tget: {\n\t\t\t\t\t...INITIAL_PRODUCTS_STATE.get,\n\t\t\t\t\tloading: true,\n\t\t\t\t}\n\t\t\t}\n\t\t})))\n\n\t\ttry {\n\t\t\tconst { data } = await Parse.Cloud.run('get_products', {\n\t\t\t\tshop: shop,\n\t\t\t\tids: products.map(p => {\n\t\t\t\t\tif (typeof p === \"string\") {\n\t\t\t\t\t\treturn p.split('/')?.pop()\n\t\t\t\t\t}\n\t\t\t\t\treturn undefined\n\t\t\t\t}).filter(Boolean)\n\t\t\t});\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tproducts: {\n\t\t\t\t\t...state.products,\n\t\t\t\t\tget: {\n\t\t\t\t\t\t...INITIAL_PRODUCTS_STATE.get,\n\t\t\t\t\t\tsuccess: {\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})));\n\n\t\t\treturn data;\n\n\t\t} catch (e) {\n\t\t\tset(produce(state => ({\n\t\t\t\t...state,\n\t\t\t\tproducts: {\n\t\t\t\t\t...state.products,\n\t\t\t\t\tget: {\n\t\t\t\t\t\t...INITIAL_PRODUCTS_STATE.get,\n\t\t\t\t\t\tfailure: {\n\t\t\t\t\t\t\terror: true,\n\t\t\t\t\t\t\tmessage: e.message || INTERNAL_SERVER_ERROR,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})))\n\t\t}\n\t},\n}));\n\nexport default useProductsStore;\n\t\n","import { useEffect, useState, useContext } from \"react\";\nimport {\n  Container,\n\tBox,\n  Center,\n  useColorModeValue,\n  Heading,\n  Text,\n  Stack,\n  Link,\n\tButton,\n\tFlex,\n\tSimpleGrid,\n\tVStack,\n\tDivider,\n\tSkeleton,\n\tuseDisclosure,\n\tModal,\n\tModalBody,\n\tModalCloseButton,\n\tModalContent,\n\tModalFooter,\n\tModalOverlay,\n\tModalHeader,\n\tuseBreakpointValue\n} from '@chakra-ui/react';\nimport Carousel from \"../../components/carousel\";\nimport useLooksStore from \"../../store/looks\"\nimport useProductsStore from \"../../store/products\";\nimport { ExternalLinkIcon } from \"@chakra-ui/icons\";\nimport { ShopContext } from \"../../context\";\nimport \"../../embed.css\"\n\nconst ProductsModal = (props) => {\n\tconst { isOpen, onClose, productIds = [], lookId } = props;\n\tconst products = useProductsStore((state) => state.products);\n\tconst getProducts = useProductsStore((state) => state.getProducts);\n\tconst shop = useContext(ShopContext);\n\n\tuseEffect(() => {\n\t\tgetProducts({ products: productIds, shop });\n\t}, [])\n\n\tconst renderProducts = () => {\n\t\tif (products.get.loading) {\n\t\t\treturn <SimpleGrid  minChildWidth='330px' spacing='10px'>\n\t\t\t\t{\n\t\t\t\t\t[1,2,3].map((e,i) => (\n\t\t\t\t\t\t<Center p={4} key={i}>\n\t\t\t\t\t\t\t<Skeleton width=\"330px\" height=\"330px\" />\n\t\t\t\t\t\t</Center>\n\t\t\t\t\t))\n\t\t\t\t}\n\t\t\t</SimpleGrid>\n\t\t} else if (products.get.failure.error) {\n\t\t\treturn (\n\t\t\t\t<Box>\n\t\t\t\t\t<Flex direction=\"column\" align=\"center\">\n\t\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t\t<Heading as=\"h1\" size=\"md\">{products.get.failure.message}</Heading>\n\t\t\t\t\t\t</VStack>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t\t<Button onClick={() => getProducts({ products: productIds, shop })}>Try Again</Button>\t\n\t\t\t\t\t\t</VStack>\n\t\t\t\t\t</Flex>\n\t\t\t\t</Box>\n\t\t\t)\n\t\t} else if (products.get.success.data.length) {\n\t\t\treturn (\n\t\t\t\t<SimpleGrid  minChildWidth='330px' spacing='10px'>\n\t\t\t\t\t{\n\t\t\t\t\t\tproducts.get.success.data.map(product => (\n\t\t\t\t\t\t\t<Center py={8} key={product.admin_graphql_api_id || product.id}>\n\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\trole={'group'}\n\t\t\t\t\t\t\t\t\tp={4}\n\t\t\t\t\t\t\t\t\tmaxW={'330px'}\n\t\t\t\t\t\t\t\t\tw={'full'}\n\t\t\t\t\t\t\t\t\tboxShadow={'2xl'}\n\t\t\t\t\t\t\t\t\trounded={'lg'}\n\t\t\t\t\t\t\t\t\tpos={'relative'}\n\t\t\t\t\t\t\t\t\tzIndex={1}>\n\t\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\t\trounded={'lg'}\n\t\t\t\t\t\t\t\t\t\tmt={-12}\n\t\t\t\t\t\t\t\t\t\tpos={'relative'}\n\t\t\t\t\t\t\t\t\t\theight={'260px'}\n\t\t\t\t\t\t\t\t\t\t_groupHover={{\n\t\t\t\t\t\t\t\t\t\t\t_after: {\n\t\t\t\t\t\t\t\t\t\t\t\tfilter: 'blur(20px)',\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t<Carousel medias={product.images} height={260} width={282} />\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t<Stack pt={3} align={'center'}>\n\t\t\t\t\t\t\t\t\t\t<Text color={'gray.500'} fontSize={'sm'} textTransform={'uppercase'}>\n\t\t\t\t\t\t\t\t\t\t\t{product.variants && product.variants.length ? `${product.variants.length} variants available` : null }\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t<Heading textAlign=\"center\" fontSize={'2xl'} fontFamily={'body'} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t\t{product.title}\n\t\t\t\t\t\t\t\t\t\t</Heading>\n\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\tmarginTop={\"10px\"}\n\t\t\t\t\t\t\t\t\t\t\thref={`http://${shop}/products/${product.handle}?app=shoplook&lookid=${lookId}`}\n\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\twidth=\"full\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Button isFullWidth rightIcon={<ExternalLinkIcon />}>View Product</Button>\n\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t</SimpleGrid>\n\t\t\t);\n\t\t\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n  return (\n    <>\n      <Modal isCentered scrollBehavior={\"inside\"} closeOnOverlayClick blockScrollOnMount={false} preserveScrollBarGap lockFocusAcrossFrames={false} isOpen={isOpen} onClose={onClose} size=\"xl\">\n        <ModalOverlay />\n        <ModalContent>\n          <ModalHeader>Shop the products in this look</ModalHeader>\n          <ModalCloseButton />\n          <ModalBody>\n\t\t\t\t\t\t{renderProducts()}\n          </ModalBody>\n\n          <ModalFooter>\n            <Button colorScheme='blue' mr={3} onClick={onClose}>\n              Close\n            </Button>\n          </ModalFooter>\n        </ModalContent>\n      </Modal>\n    </>\n  )\n}\n\nconst EmbedRoute = (props) => {\n\tconst bgColor = useColorModeValue('white', 'gray.800');\n  const looks = useLooksStore((state) => state.looks);\n  const getLooks = useLooksStore((state) => state.getLooks);\n\tconst shop = useContext(ShopContext);\n\tconst { isOpen, onOpen, onClose } = useDisclosure();\n\tconst [productIds, setProductIds] = useState([]);\n\tconst [isModalvis, setIsModalvis] = useState(false);\n\tconst [currentLookId, setCurrentLookId] = useState('');\n\t\n\tuseEffect(() => {\n\t\tgetLooks({ shop })\n\t}, []);\n\n\tconst onLooksClick = ({ lookId, products }) => {\n\t\tsetProductIds(products);\n\t\tsetCurrentLookId(lookId);\n\t\tsetIsModalvis(true);\n\t\tonOpen();\n\t}\n\n\tconst onModalClose = () => {\n\t\tsetCurrentLookId('');\n\t\tsetProductIds([]);\n\t\tsetIsModalvis(false);\n\t\tonClose();\n\t}\n\n\tconst renderList = () => {\n\t\tif (looks.get.loading) {\n\t\t\treturn [1,2,3].map((e, i) => (\n\t\t\t\t<Center key={i}>\n\t\t\t\t\t<Skeleton width=\"330px\" height=\"330px\" />\n\t\t\t\t</Center>\n\t\t\t));\n\t\t} else if (looks.get.failure.error) {\n\t\t\treturn (\n\t\t\t\t<Box>\n\t\t\t\t\t<Flex direction=\"column\" align=\"center\">\n\t\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t\t<Heading as=\"h1\" size=\"md\">{looks.get.failure.message}</Heading>\n\t\t\t\t\t\t</VStack>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t\t\t<Button onClick={() => getLooks({ shop })}>Try Again</Button>\t\n\t\t\t\t\t\t</VStack>\n\t\t\t\t\t</Flex>\n\t\t\t\t</Box>\n\t\t\t);\n\t\t} else if (looks.get.success.data.length) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t{ isModalvis ? <ProductsModal isOpen={isOpen} onClose={onModalClose} lookId={currentLookId} productIds={productIds} /> : null }\n\t\t\t\t\t{\n\t\t\t\t\t\tlooks.get.success.data.map(look => (\n\t\t\t\t\t\t\t<Center py={8} key={look.id || look.objectId}>\n\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\trole={'group'}\n\t\t\t\t\t\t\t\t\tp={4}\n\t\t\t\t\t\t\t\t\tmaxW={'330px'}\n\t\t\t\t\t\t\t\t\tw={'full'}\n\t\t\t\t\t\t\t\t\tbg={bgColor}\n\t\t\t\t\t\t\t\t\tboxShadow={'2xl'}\n\t\t\t\t\t\t\t\t\trounded={'lg'}\n\t\t\t\t\t\t\t\t\tpos={'relative'}\n\t\t\t\t\t\t\t\t\tzIndex={1}>\n\t\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\t\trounded={'lg'}\n\t\t\t\t\t\t\t\t\t\tmt={-12}\n\t\t\t\t\t\t\t\t\t\tpos={'relative'}\n\t\t\t\t\t\t\t\t\t\theight={'260px'}\n\t\t\t\t\t\t\t\t\t\t// _after={{\n\t\t\t\t\t\t\t\t\t\t// \ttransition: 'all .3s ease',\n\t\t\t\t\t\t\t\t\t\t// \tcontent: '\"\"',\n\t\t\t\t\t\t\t\t\t\t// \tw: 'full',\n\t\t\t\t\t\t\t\t\t\t// \th: 'full',\n\t\t\t\t\t\t\t\t\t\t// \tpos: 'absolute',\n\t\t\t\t\t\t\t\t\t\t// \ttop: 5,\n\t\t\t\t\t\t\t\t\t\t// \tleft: 0,\n\t\t\t\t\t\t\t\t\t\t// \tbackgroundImage: `url(${look.get('medias')[0].url()})`,\n\t\t\t\t\t\t\t\t\t\t// \tfilter: 'blur(15px)',\n\t\t\t\t\t\t\t\t\t\t// \tzIndex: -1,\n\t\t\t\t\t\t\t\t\t\t// }}\n\t\t\t\t\t\t\t\t\t\t_groupHover={{\n\t\t\t\t\t\t\t\t\t\t\t_after: {\n\t\t\t\t\t\t\t\t\t\t\t\tfilter: 'blur(20px)',\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t{/* <Image\n\t\t\t\t\t\t\t\t\t\t\trounded={'lg'}\n\t\t\t\t\t\t\t\t\t\t\theight={230}\n\t\t\t\t\t\t\t\t\t\t\twidth={282}\n\t\t\t\t\t\t\t\t\t\t\tobjectFit={'cover'}\n\t\t\t\t\t\t\t\t\t\t\tsrc={'https://images.unsplash.com/photo-1518051870910-a46e30d9db16?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=1350&q=80'}\n\t\t\t\t\t\t\t\t\t\t/> */}\n\t\t\t\t\t\t\t\t\t\t<Carousel medias={look.get('medias')} height={260} width={282} />\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t<Stack pt={3} align={'center'}>\n\t\t\t\t\t\t\t\t\t\t<Text color={'gray.500'} fontSize={'sm'} textTransform={'uppercase'}>\n\t\t\t\t\t\t\t\t\t\t\t{look.get('products').length} products in this look\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t<Heading fontSize={'2xl'} fontFamily={'body'} fontWeight={500}>\n\t\t\t\t\t\t\t\t\t\t\t{look.get('name')}\n\t\t\t\t\t\t\t\t\t\t</Heading>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tmarginTop={\"10px\"}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => onLooksClick({ lookId: look.id, products: look.get('products')})}\n\t\t\t\t\t\t\t\t\t\t\tisFullWidth\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tShop The Look\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t}\n\t\n\treturn  (\n\t\t<Container maxW={'7xl'} p=\"12\">\n\t\t\t<Center>\n\t\t\t\t<Heading>Shop The Look</Heading>\n\t\t\t</Center>\n\t\t\t<br />\n\t\t\t<SimpleGrid minChildWidth='330px' spacing='10px'>\t\t\t\t\n\t\t\t\t{renderList()}\n\t\t\t</SimpleGrid>\n\t\t</Container>\n\t)\n\n}\n\nexport default EmbedRoute;","import React, { useEffect } from 'react';\nimport {\n  Routes,\n  Route,\n  Navigate,\n} from \"react-router-dom\";\nimport App from '../App';\nimport LookRoute from \"./look\";\nimport Authorize from \"./shopify/Authorize\";\nimport SettingsRoute from \"./settings\";\nimport EmbedRoute from './embed';\n// You should always import these components even without using else app back navigation will break\nimport { ClientRouter, useClientRouting, useRoutePropagation, RoutePropagator } from '@shopify/app-bridge-react';\nconst AppRoutes = (props) => {\n\n\n\treturn (\n\t\t<>\n\t\t<Routes>\n\t\t\t{/* <Route path=\"/shopify\" element={<Authorize />} />\n\t\t\t<Route path=\"/shopify/callback\" element={<Authorize />} />\n\t\t\t<Route\n\t\t\t\t\tpath=\"/install\"\n\t\t\t\t\telement={<Navigate to={{\n\t\t\t\t\t\tpathname: \"/shopify/authorize\",\n\t\t\t\t\t\tsearch: window.location.search,\n\t\t\t\t\t}} replace={true} />}\n\t\t\t\t/>\n\t\t\t<Route path=\"/shopify/authorize\" element={<Authorize />} /> */}\n\t\t\t<Route path=\"/embed\" element={<EmbedRoute />} />\n\t\t\t<Route path=\"/settings\" element={<SettingsRoute />} />\n\t\t\t<Route path=\"/looks\" element={<App />} />\n\t\t\t<Route path=\"/looks/:id\" element={<LookRoute />} />\n\t\t\t<Route path=\"/looks/create\" element={<LookRoute />} />\n\t\t\t<Route path=\"/shopify\" element={<App />} />\n\t\t\t<Route path=\"/shopify/callback\" element={<App />} />\n\t\t\t<Route path=\"/authorize\" element={<Authorize />} />\n\t\t\t<Route path=\"/\" element={<App />} />\n\t\t</Routes>\n\t\t</>\n\t)\n}\n\nexport default AppRoutes","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ChakraProvider } from \"@chakra-ui/react\"\nimport {\n  BrowserRouter,\n} from \"react-router-dom\";\nimport Parse from \"parse\";\nimport './index.css';\nimport {Provider} from '@shopify/app-bridge-react';\nimport { parseQuery } from \"./utils/url\";\nimport AppRoutes from \"./routes\"\nimport { ShopContext } from \"./context\";\n\nParse.initialize(process.env.REACT_APP_API_SHOPLOOKS_PARSE_APP_ID, process.env.REACT_APP_API_SHOPLOOKS_PARSE_JSKEY);\nParse.serverURL = process.env.REACT_APP_API_SHOPLOOKS_SERVER_URL + '/parse';\n\nconst { host, shop = '' } = parseQuery(window.location.search);\nif (!host) {\n  ReactDOM.render(\n    <React.StrictMode>\n        <ChakraProvider>\n          <BrowserRouter>\n            <ShopContext.Provider value={shop}>\n              <AppRoutes />\n            </ShopContext.Provider>\n          </BrowserRouter>\n        </ChakraProvider>\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n  \n} else {\n  ReactDOM.render(\n    <React.StrictMode>\n        <ChakraProvider>\n          <BrowserRouter>\n            <Provider config={{ apiKey: process.env.REACT_APP_SHOPIFY_API_KEY, host: host,  forceRedirect: true }}>\n              <ShopContext.Provider value={shop}>\n                <AppRoutes />\n              </ShopContext.Provider>\n            </Provider>\n          </BrowserRouter>\n        </ChakraProvider>\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n}\n"],"sourceRoot":""}